(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false };modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1);},function(module,exports,__webpack_require__){const GrowthAnalyser=__webpack_require__(2);FusionCharts.register('extension',['private','legend-ext',function(){function LegendExt(){this.toolbox=FusionCharts.getComponent('api','toolbox');this.HorizontalToolbar=this.toolbox.HorizontalToolbar;this.ComponentGroup=this.toolbox.ComponentGroup;this.SymbolStore=this.toolbox.SymbolStore}LegendExt.prototype.constructor=LegendExt;LegendExt.prototype.renderChange=function(){var chartInstance=this.tsObject.chartInstance,componentStore=chartInstance.apiInstance.getComponentStore(),i=0;for(i=0;componentStore.getCanvasByIndex(i);i+=1){componentStore.getCanvasByIndex(i).getComposition().PlotManager.plot()}};LegendExt.prototype.analyser=function(mode){var ga=this.ga||{},store=this.tsObject.apiInstance.getComponentStore(),canvas=store.getCanvasByIndex(0),nav=store.getNavigatorByIndex(0),comp=canvas.getComposition(),ds=ga.ds||comp.dataset,i,idMap=ga.idMap||{},storeAr=ga.storeAr||[],nStoreArr=[],yAxis=canvas.composition.yAxis;if(mode==='reset'){yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val}}else{yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val+'%'}}this.ga=ga;if(!ga.storeAr){store={};if(!ga.idMap){ds.forEachSeries(function(a,b,c,series){store[series.getId()]=series.getOriginalData()});for(i in store){storeAr.push(store[i]);idMap[i]=storeAr.length-1;}ga.idMap=idMap;ga.ds=ds;ga.storeAr=storeAr;ga.gAnalyser=new GrowthAnalyser(storeAr)}}nStoreArr=ga.gAnalyser.analyse(mode);ds.setDataBySeries(function(series){if(nStoreArr.length){series.setOriginalData(nStoreArr[idMap[series.getId()]])}});comp.impl.update()};LegendExt.prototype.init=function(require){var instance=this;require(['xAxis','yAxis','graphics','chart','dataset','PlotManager','canvasConfig','MarkerManager','reactiveModel','globalReactiveModel','spaceManagerInstance','smartLabel','chartInstance','canvasData',function(xAxis,yAxis,graphics,chart,dataset,plotManager,canvasConfig,markerManager,reactiveModel,globalReactiveModel,spaceManagerInstance,smartLabel,chartInstance,canvasData){instance.xAxis=xAxis;instance.yAxis=yAxis;instance.graphics=graphics;instance.chart=chart;instance.dataset=dataset;instance.plotManager=plotManager;instance.markerManager=markerManager;instance.canvasConfig=canvasConfig;instance.reactiveModel=reactiveModel;instance.globalReactiveModel=globalReactiveModel;instance.spaceManagerInstance=spaceManagerInstance;instance.smartLabel=smartLabel;instance.chartInstance=chartInstance;instance.canvasData=canvasData}]);this.spaceManagerInstance=instance.spaceManagerInstance;this.globalReactiveModel=instance.globalReactiveModel;this.tsObject=instance.chartInstance;this.startDt=instance.globalReactiveModel.model['x-axis-visible-range-start'];this.endDt=instance.globalReactiveModel.model['x-axis-visible-range-end'];this.startDataset=instance.globalReactiveModel.model['x-axis-absolute-range-start'];this.endDataset=instance.globalReactiveModel.model['x-axis-absolute-range-end'];this.toolbars=[];this.measurement={};this.toolbars.push(this.createToolbar());return this};LegendExt.prototype.createToolbar=function(){var toolbar,group,self=this,contextMenu,contextArray=[],gaOptionsObj={},popup,paper=this.graphics.paper,chartContainer=this.graphics.container,subCatStyle={'font-size':'12px','color':'#696969','fontFamily':'Myriad Pro'},catStyle={'font-size':'13px','color':'#696969','font-family':'Myriad Pro Semibold'};toolbar=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});toolbar.setConfig({fill:'#fff',borderThickness:0});group=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});group.setConfig({fill:'#fff',borderThickness:0});gaOptionsObj={'Fixed-Number':'dialogBox','Functions':['Minimum','Maximum','Mean','Median','Standard Deviation'],'Position':'dialogBox','Dataset':['Previous Dataset','Next Dataset'],'Relative-Position':['Next','Previous']};contextMenu=new this.toolbox.SymbolWithContext('ContextIcon',{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{width:24,height:24,position:'right',stroke:'#ced5d4',strokeWidth:'1',radius:'1',symbolStroke:'#696969',symbolStrokeWidth:'2'});contextArray.push({'Growth Analyser':{style:catStyle}});popup=function(callback){var box,header,style={fontSize:10+'px',lineHeight:15+'px',fontFamily:'Lucida Grande',stroke:'#676767','stroke-width':'2'},headerWidth=180,headerText,cross,inputField,applyButton,x=500,y=100;box=paper.html('div',{fill:'#f7f7f7',x:x-200,y:y+100,width:180,height:80},style,chartContainer);header=paper.html('div',{fill:'#e8e8e8',width:headerWidth,height:20},style,box);headerText=paper.html('div',{fill:'transparent',width:headerWidth*0.6,height:20,x:10,y:2},style,header);headerText.attr({text:'Provide Specific Value'});cross=paper.html('div',{fill:'transparent',width:10,height:10,position:'relative',float:'right',text:'X',cursor:'pointer'},style,header);cross.on('click',function(){box.hide()});inputField=paper.html('input',{width:100,height:20,x:10,y:30},style,box);applyButton=paper.html('div',{width:50,height:20,x:120,y:30,fill:'#555555'},{fontSize:10+'px',lineHeight:15+'px',fontFamily:'Lucida Grande',fill:'#eaeaea',color:'#eaeaea',stroke:'#eaeaea',cursor:'pointer'},box);applyButton.on('click',function(){box.hide();callback(inputField.val())});applyButton.attr({text:'Apply'});inputField.element.focus();function inputFieldNumberHandler(){inputField.element.value=inputField.element.value.replace(/[^\d.-]/g,'')}inputField.element.addEventListener('keyup',inputFieldNumberHandler);cross.element.style['position']='relative';cross.element.style['backgroundColor']='#d2d2d2';cross.element.style['border']='2px solid #cbcbcb';cross.element.style['padding']='0px 0px 3.5px 2px';cross.element.style['color']='#8c8c8c';cross.element.style['margin']='1px 2px';cross.element.style['float']='right';inputField.element.style['marginTop']='8px';inputField.element.style['border']='2px solid #dadbda';applyButton.element.style['marginTop']='8px';box.element.style['border']='1px solid #d4d2d3';header.element.style['border']='1px solid #d4d2d3';header.element.style['width']='179px';headerText.element.style['fontSize']='11.5px';headerText.element.style['marginTop']='0.5px';headerText.element.style['color']='#676767';header.element.style['fontFamily']='Myriad pro Semibold';applyButton.element.style['textAlign']='center';applyButton.element.style['fontSize']='11px';applyButton.element.style['paddingTop']='3px';applyButton.element.style['borderRadius']='3px';applyButton.element.style['color']='#e4e4e4'};for(let i in gaOptionsObj){let key,obj={},subObj={};if(gaOptionsObj[i]==='dialogBox'){key='&nbsp; &nbsp; '+i;obj[key]={};obj[key]={style:subCatStyle,handler:function(){if(i==='Fixed-Number'){let popupVal=popup(function(str){self.analyser(parseInt(str))})}else if(i==='Position'){let popupVal=popup(function(str){self.analyser({position:str})})}},action:'click'}}else{key='&#9666&nbsp; '+i;obj[key]={};obj[key].action='click';obj[key].style=subCatStyle;obj[key].handler=[];for(let j=0;j<gaOptionsObj[i].length;j+=1){let subMenuName=gaOptionsObj[i][j];subObj={};subObj['&nbsp;'+subMenuName]={};subObj['&nbsp;'+subMenuName].handler=function(){if(subMenuName==='Minimum'||subMenuName==='Maximum'||subMenuName==='Mean'||subMenuName==='Median'||subMenuName==='Standard Deviation'){self.analyser(subMenuName)}else if(subMenuName==='Previous Dataset'){self.analyser({reldatasetposition:-1})}else if(subMenuName==='Next Dataset'){self.analyser({reldatasetposition:1})}else if(subMenuName==='Next'){self.analyser({relposition:-1})}else if(subMenuName==='Previous'){self.analyser({relposition:1})}};subObj['&nbsp;'+subMenuName].action='click';subObj['&nbsp;'+subMenuName].style=subCatStyle;obj[key].handler.push(subObj);if(j!==gaOptionsObj[i].length-1){obj[key].handler.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}}}contextArray.push(obj);contextArray.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}contextArray.push({'&nbsp; &nbsp; Reset View':{handler:function(){self.analyser('reset')},action:'click',style:subCatStyle}});contextMenu.appendAsList(contextArray);this.SymbolStore.register('ContextIcon',function(posx,posy,rad){var x=posx,y=posy,r=rad*2,space=Math.round(r/4),halfWidth=Math.round(r/2)*0.7,startX=(x-halfWidth),endX=(x+halfWidth),startY=(y+space),endY=(y-space);return['M',startX,y,'L',endX,y,'M',startX,startY,'L',endX,startY,'M',startX,endY,'L',endX,endY]});group.addSymbol(contextMenu);toolbar.addComponent(group);return toolbar};LegendExt.prototype.getLogicalSpace=function(availableWidth,availableHeight){availableWidth/=2;var logicalSpace,width=0,height=0,i,ln;for(i=0,ln=this.toolbars.length;i<ln;i+=1){logicalSpace=this.toolbars[i].getLogicalSpace(availableWidth,availableHeight);width=Math.max(logicalSpace.width,width);height+=logicalSpace.height;this.toolbars[i].width=logicalSpace.width;this.toolbars[i].height=logicalSpace.height}height+=this.padding;return{width:width>availableWidth?0:width,height:height>availableHeight?0:height}};LegendExt.prototype.placeInCanvas=function(){var self=this;self.padding=5;self.spaceManagerInstance.add([{name:function(){return 'ToolBoxExt'},ref:function(obj){return obj['0']},self:function(){return self},priority:function(){return 2},layout:function(obj){return obj.inline},orientation:[{type:function(obj){return obj.horizontal},position:[{type:function(obj){return obj.top},alignment:[{type:function(obj){return obj.right},dimensions:[function(){var parent=this.getParentComponentGroup();return self.getLogicalSpace(parent.getWidth(),parent.getHeight())}]}]}]}]}])};LegendExt.prototype.setDrawingConfiguration=function(x,y,width,height,group){var mes=this.measurement;mes.x=x;mes.y=y;mes.width=width;mes.height=height;this.parentGroup=group;return this};LegendExt.prototype.draw=function(x,y,width,height,group){var measurement=this.measurement,toolbars=this.toolbars,ln,i,toolbar;x=x===undefined?measurement.x:x;y=y===undefined?measurement.y:y;width=width===undefined?measurement.width:width;height=height===undefined?measurement.height:height;group=group===undefined?this.parentGroup:group;if(width&&height){for(i=0,ln=toolbars.length;i<ln;i+=1){toolbar=toolbars[i];toolbar.draw(x,y)}}};FusionCharts.registerComponent('extensions','legendExt',LegendExt)}]);},function(module,exports){'use strict';class GrowthAnalyser{constructor(data){this.data=data.map((a)=>{return a.map((b)=>{return b})});this.Formulae=Formulae}analyse(mode){let i=0,ii=0,j=0,jj=0,num=0,checkArr=[],checkNum=0,dataAr=this.data,nDataAr=[],tempAr=[],temp=0;if(typeof mode==='string'&&mode.toLowerCase()==='reset'){return dataAr.map((a)=>{return a.map((b)=>{return b})})}else if(!isNaN(mode)){checkNum= +mode;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(typeof mode==='string'){mode=this.Formulae[mode];for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];checkNum=mode(dataAr[i]);for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(checkNum===0){temp=undefined}else{temp=100*(num-checkNum)/checkNum}tempAr.push(temp)}nDataAr.push(tempAr)}}else if(!isNaN(mode.relposition)){mode=mode.relposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(j+mode>=0&&j+mode<jj){checkNum=dataAr[i][j+mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.position)){mode=mode.position;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(mode>=0&&mode<jj){checkNum=dataAr[i][mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.reldatasetposition)){mode=mode.reldatasetposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];if(i+mode>=0&&i+mode<ii){checkArr=dataAr[i+mode]}else{checkArr=dataAr[i]}for(j=0,jj=dataAr[i].length;j<jj;j+=1){checkNum=checkArr[j];num=dataAr[i][j];tempAr.push(100*(num-checkNum)/num)}nDataAr.push(tempAr)}}for(i=0,ii=nDataAr.length;i<ii;i+=1){for(j=0,jj=nDataAr[i].length;j<jj;j+=1){if(!Number.isFinite(nDataAr[i][j])){nDataAr[i][j]=null}}}return nDataAr}}var Formulae={Minimum:(arr)=>{return arr.reduce((a,b)=>{return a>b?b:a})},Maximum:(arr)=>{return arr.reduce((a,b)=>{return a<b?b:a})},Mean:(arr)=>{return arr.reduce((a,b)=>{return a+b})/arr.length},Median:(arr)=>{return arr.map((a)=>a).sort((a,b)=>{return a-b})[arr.length/2]},'Standard Deviation':(values)=>{function average(data){var sum,avg;sum=data.reduce(function(sum,value){return sum+value},0);avg=sum/data.length;return avg}var avg=0,squareDiffs=0,sqrDiff=0,avgSquareDiff=0,stdDev=0,diff=0;avg=average(values);squareDiffs=values.map(function(value){diff=value-avg;sqrDiff=diff*diff;return sqrDiff});avgSquareDiff=average(squareDiffs);stdDev=Math.sqrt(avgSquareDiff);return stdDev}};module.exports=GrowthAnalyser;}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMTViMTJhMWZmZGI4NjkxNmZjOGUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V4dGVuc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3Jvd3RoYW5hbHlzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDdENBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZSxvQ0FBb0M7QUFDbkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsMkNBQTBDLHdDQUF3QyxFQUFFO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxR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cyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDE1YjEyYTFmZmRiODY5MTZmYzhlIiwiY29uc3QgR3Jvd3RoQW5hbHlzZXIgPSByZXF1aXJlKCcuL2dyb3d0aGFuYWx5c2VyJyk7XG5cbkZ1c2lvbkNoYXJ0cy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ2xlZ2VuZC1leHQnLCBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIExlZ2VuZEV4dCAoKSB7XG4gICAgdGhpcy50b29sYm94ID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcbiAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG4gICAgdGhpcy5TeW1ib2xTdG9yZSA9IHRoaXMudG9vbGJveC5TeW1ib2xTdG9yZTtcbiAgfVxuICBMZWdlbmRFeHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGVnZW5kRXh0O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUucmVuZGVyQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjaGFydEluc3RhbmNlID0gdGhpcy50c09iamVjdC5jaGFydEluc3RhbmNlLFxuICAgICAgY29tcG9uZW50U3RvcmUgPSBjaGFydEluc3RhbmNlLmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCksXG4gICAgICBpID0gMDtcbiAgICBmb3IgKGkgPSAwOyBjb21wb25lbnRTdG9yZS5nZXRDYW52YXNCeUluZGV4KGkpOyArK2kpIHtcbiAgICAgIGNvbXBvbmVudFN0b3JlLmdldENhbnZhc0J5SW5kZXgoaSkuZ2V0Q29tcG9zaXRpb24oKS5QbG90TWFuYWdlci5wbG90KCk7XG4gICAgfVxuICB9O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUuYW5hbHlzZXIgPSBmdW5jdGlvbiAobW9kZSkge1xuICAgIHZhciBnYSA9IHRoaXMuZ2EgfHwge30sXG4gICAgICBzdG9yZSA9IHRoaXMudHNPYmplY3QuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcbiAgICAgIGNhbnZhcyA9IHN0b3JlLmdldENhbnZhc0J5SW5kZXgoMCksXG4gICAgICBuYXYgPSBzdG9yZS5nZXROYXZpZ2F0b3JCeUluZGV4KDApLFxuICAgICAgY29tcCA9IGNhbnZhcy5nZXRDb21wb3NpdGlvbigpLFxuICAgICAgZHMgPSBnYS5kcyB8fCBjb21wLmRhdGFzZXQsXG4gICAgICBpLFxuICAgICAgaWRNYXAgPSBnYS5pZE1hcCB8fCB7fSxcbiAgICAgIHN0b3JlQXIgPSBnYS5zdG9yZUFyIHx8IFtdLFxuICAgICAgblN0b3JlQXJyID0gW10sXG4gICAgICB5QXhpcyA9IGNhbnZhcy5jb21wb3NpdGlvbi55QXhpcztcbiAgICAvLyBDaGFuZ2luZyB5IEF4aXMgZm9ybWF0dG9yXG4gICAgaWYgKG1vZGUgPT09ICdyZXNldCcpIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCArICclJztcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIERlY2xhcmF0aW9uIGVuZHNcbiAgICB0aGlzLmdhID0gZ2E7XG4gICAgaWYgKCFnYS5zdG9yZUFyKSB7XG4gICAgICBzdG9yZSA9IHt9O1xuICAgICAgaWYgKCFnYS5pZE1hcCkge1xuICAgICAgICBkcy5mb3JFYWNoU2VyaWVzKGZ1bmN0aW9uIChhLCBiLCBjLCBzZXJpZXMpIHtcbiAgICAgICAgICBzdG9yZVtzZXJpZXMuZ2V0SWQoKV0gPSBzZXJpZXMuZ2V0T3JpZ2luYWxEYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGkgaW4gc3RvcmUpIHtcbiAgICAgICAgICBzdG9yZUFyLnB1c2goc3RvcmVbaV0pO1xuICAgICAgICAgIGlkTWFwW2ldID0gc3RvcmVBci5sZW5ndGggLSAxO1xuICAgICAgICAgIC8vID0gc3RvcmVbaV0ubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiAyMCAqIGUgKyAoTWF0aC5yYW5kb20oKSAqIDEwMDApOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBnYS5pZE1hcCA9IGlkTWFwO1xuICAgICAgICBnYS5kcyA9IGRzO1xuICAgICAgICBnYS5zdG9yZUFyID0gc3RvcmVBcjtcbiAgICAgICAgZ2EuZ0FuYWx5c2VyID0gbmV3IEdyb3d0aEFuYWx5c2VyKHN0b3JlQXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBuU3RvcmVBcnIgPSBnYS5nQW5hbHlzZXIuYW5hbHlzZShtb2RlKTtcbiAgICBkcy5zZXREYXRhQnlTZXJpZXMoZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgaWYgKG5TdG9yZUFyci5sZW5ndGgpIHtcbiAgICAgICAgc2VyaWVzLnNldE9yaWdpbmFsRGF0YShuU3RvcmVBcnJbaWRNYXBbc2VyaWVzLmdldElkKCldXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29tcC5pbXBsLnVwZGF0ZSgpO1xuICB9O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChyZXF1aXJlKSB7XG4gICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICByZXF1aXJlKFtcbiAgICAgICd4QXhpcycsXG4gICAgICAneUF4aXMnLFxuICAgICAgJ2dyYXBoaWNzJyxcbiAgICAgICdjaGFydCcsXG4gICAgICAnZGF0YXNldCcsXG4gICAgICAnUGxvdE1hbmFnZXInLFxuICAgICAgJ2NhbnZhc0NvbmZpZycsXG4gICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAncmVhY3RpdmVNb2RlbCcsXG4gICAgICAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsXG4gICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgJ3NtYXJ0TGFiZWwnLFxuICAgICAgJ2NoYXJ0SW5zdGFuY2UnLFxuICAgICAgJ2NhbnZhc0RhdGEnLFxuICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgeEF4aXMsXG4gICAgICAgICAgICB5QXhpcyxcbiAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICBkYXRhc2V0LFxuICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICBjYW52YXNDb25maWcsXG4gICAgICAgICAgICBtYXJrZXJNYW5hZ2VyLFxuICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgIGdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICBzcGFjZU1hbmFnZXJJbnN0YW5jZSxcbiAgICAgICAgICAgIHNtYXJ0TGFiZWwsXG4gICAgICAgICAgICBjaGFydEluc3RhbmNlLFxuICAgICAgICAgICAgY2FudmFzRGF0YSkge1xuICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcbiAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcbiAgICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0RhdGEgPSBjYW52YXNEYXRhO1xuICAgICAgfVxuICAgIF0pO1xuICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgIHRoaXMudHNPYmplY3QgPSBpbnN0YW5jZS5jaGFydEluc3RhbmNlO1xuICAgIHRoaXMuc3RhcnREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcbiAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG4gICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBMZWdlbmRFeHQucHJvdG90eXBlLmNyZWF0ZVRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRvb2xiYXIsXG4gICAgICBncm91cCxcbiAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgY29udGV4dE1lbnUsXG4gICAgICBjb250ZXh0QXJyYXkgPSBbXSxcbiAgICAgIGdhT3B0aW9uc09iaiA9IHt9LFxuICAgICAgcG9wdXAsXG4gICAgICBwYXBlciA9IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydENvbnRhaW5lciA9IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyLFxuICAgICAgc3ViQ2F0U3R5bGUgPSB7XG4gICAgICAgICdmb250LXNpemUnOiAnMTJweCcsXG4gICAgICAgICdjb2xvcic6ICcjNjk2OTY5JyxcbiAgICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkIFBybydcbiAgICAgIH0sXG4gICAgICBjYXRTdHlsZSA9IHtcbiAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxM3B4JyxcbiAgICAgICAgJ2NvbG9yJzogJyM2OTY5NjknLFxuICAgICAgICAnZm9udC1mYW1pbHknOiAnTXlyaWFkIFBybyBTZW1pYm9sZCdcbiAgICAgIH07XG5cbiAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuXG4gICAgdG9vbGJhci5zZXRDb25maWcoe1xuICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgfSk7XG5cbiAgICBncm91cCA9IG5ldyB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXAoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuXG4gICAgZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgIH0pO1xuXG4gICAgZ2FPcHRpb25zT2JqID0ge1xuICAgICAgJ0ZpeGVkLU51bWJlcic6ICdkaWFsb2dCb3gnLFxuICAgICAgJ0Z1bmN0aW9ucyc6IFsnTWluaW11bScsICdNYXhpbXVtJywgJ01lYW4nLCAnTWVkaWFuJywgJ1N0YW5kYXJkIERldmlhdGlvbiddLFxuICAgICAgJ1Bvc2l0aW9uJzogJ2RpYWxvZ0JveCcsXG4gICAgICAnRGF0YXNldCc6IFsnUHJldmlvdXMgRGF0YXNldCcsICdOZXh0IERhdGFzZXQnXSxcbiAgICAgICdSZWxhdGl2ZS1Qb3NpdGlvbic6IFsnTmV4dCcsICdQcmV2aW91cyddXG4gICAgfTtcblxuICAgIGNvbnRleHRNZW51ID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2xXaXRoQ29udGV4dCgnQ29udGV4dEljb24nLCB7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSwge1xuICAgICAgd2lkdGg6IDI0LFxuICAgICAgaGVpZ2h0OiAyNCxcbiAgICAgIHBvc2l0aW9uOiAncmlnaHQnLFxuICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICBzdHJva2VXaWR0aDogJzEnLFxuICAgICAgcmFkaXVzOiAnMScsXG4gICAgICBzeW1ib2xTdHJva2U6ICcjNjk2OTY5JyxcbiAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMidcbiAgICB9KTtcblxuICAgIGNvbnRleHRBcnJheS5wdXNoKHtcbiAgICAgICdHcm93dGggQW5hbHlzZXInOiB7XG4gICAgICAgIHN0eWxlOiBjYXRTdHlsZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHBvcHVwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgYm94LFxuICAgICAgICBoZWFkZXIsXG4gICAgICAgIHN0eWxlID0ge1xuICAgICAgICAgIGZvbnRTaXplOiAxMCArICdweCcsXG4gICAgICAgICAgbGluZUhlaWdodDogMTUgKyAncHgnLFxuICAgICAgICAgIGZvbnRGYW1pbHk6ICdMdWNpZGEgR3JhbmRlJyxcbiAgICAgICAgICBzdHJva2U6ICcjNjc2NzY3JyxcbiAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogJzInXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRlcldpZHRoID0gMTgwLFxuICAgICAgICBoZWFkZXJUZXh0LFxuICAgICAgICBjcm9zcyxcbiAgICAgICAgaW5wdXRGaWVsZCxcbiAgICAgICAgYXBwbHlCdXR0b24sXG4gICAgICAgIHggPSA1MDAsXG4gICAgICAgIHkgPSAxMDA7XG5cbiAgICAgIGJveCA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJyNmN2Y3ZjcnLFxuICAgICAgICB4OiB4IC0gMjAwLFxuICAgICAgICB5OiB5ICsgMTAwLFxuICAgICAgICB3aWR0aDogMTgwLFxuICAgICAgICBoZWlnaHQ6IDgwXG4gICAgICB9LCBzdHlsZSwgY2hhcnRDb250YWluZXIpO1xuXG4gICAgICBoZWFkZXIgPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICcjZThlOGU4JyxcbiAgICAgICAgd2lkdGg6IGhlYWRlcldpZHRoLFxuICAgICAgICBoZWlnaHQ6IDIwXG4gICAgICB9LCBzdHlsZSwgYm94KTtcblxuICAgICAgaGVhZGVyVGV4dCA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgd2lkdGg6IGhlYWRlcldpZHRoICogMC42LFxuICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICB4OiAxMCxcbiAgICAgICAgeTogMlxuICAgICAgfSwgc3R5bGUsIGhlYWRlcik7XG5cbiAgICAgIGhlYWRlclRleHQuYXR0cih7XG4gICAgICAgIHRleHQ6ICdQcm92aWRlIFNwZWNpZmljIFZhbHVlJ1xuICAgICAgfSk7XG5cbiAgICAgIGNyb3NzID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICB3aWR0aDogMTAsXG4gICAgICAgIGhlaWdodDogMTAsXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICBmbG9hdDogJ3JpZ2h0JyxcbiAgICAgICAgdGV4dDogJ1gnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuICAgICAgfSwgc3R5bGUsIGhlYWRlcik7XG5cbiAgICAgIGNyb3NzLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm94LmhpZGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnB1dEZpZWxkID0gcGFwZXIuaHRtbCgnaW5wdXQnLCB7XG4gICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIHg6IDEwLFxuICAgICAgICB5OiAzMFxuICAgICAgfSwgc3R5bGUsIGJveCk7XG5cbiAgICAgIGFwcGx5QnV0dG9uID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICB3aWR0aDogNTAsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIHg6IDEyMCxcbiAgICAgICAgeTogMzAsXG4gICAgICAgIGZpbGw6ICcjNTU1NTU1J1xuICAgICAgfSwge1xuICAgICAgICBmb250U2l6ZTogMTAgKyAncHgnLFxuICAgICAgICBsaW5lSGVpZ2h0OiAxNSArICdweCcsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdMdWNpZGEgR3JhbmRlJyxcbiAgICAgICAgZmlsbDogJyNlYWVhZWEnLFxuICAgICAgICBjb2xvcjogJyNlYWVhZWEnLFxuICAgICAgICBzdHJva2U6ICcjZWFlYWVhJyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgIH0sIGJveCk7XG5cbiAgICAgIGFwcGx5QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm94LmhpZGUoKTtcbiAgICAgICAgY2FsbGJhY2soaW5wdXRGaWVsZC52YWwoKSk7XG4gICAgICB9KTtcbiAgICAgIGFwcGx5QnV0dG9uLmF0dHIoe1xuICAgICAgICB0ZXh0OiAnQXBwbHknXG4gICAgICB9KTtcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5mb2N1cygpO1xuICAgICAgZnVuY3Rpb24gaW5wdXRGaWVsZE51bWJlckhhbmRsZXIgKCkge1xuICAgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUgPSBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUucmVwbGFjZSgvW15cXGQuLV0vZywgJycpO1xuICAgICAgfVxuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaW5wdXRGaWVsZE51bWJlckhhbmRsZXIpO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsncG9zaXRpb24nXSA9ICdyZWxhdGl2ZSc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydiYWNrZ3JvdW5kQ29sb3InXSA9ICcjZDJkMmQyJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzJweCBzb2xpZCAjY2JjYmNiJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ3BhZGRpbmcnXSA9ICcwcHggMHB4IDMuNXB4IDJweCc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyM4YzhjOGMnO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnbWFyZ2luJ10gPSAnMXB4IDJweCc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydmbG9hdCddID0gJ3JpZ2h0JztcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4JztcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMnB4IHNvbGlkICNkYWRiZGEnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4JztcbiAgICAgIGJveC5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcxcHggc29saWQgI2Q0ZDJkMyc7XG4gICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMXB4IHNvbGlkICNkNGQyZDMnO1xuICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ3dpZHRoJ10gPSAnMTc5cHgnO1xuICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExLjVweCc7XG4gICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzAuNXB4JztcbiAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjNjc2NzY3JztcbiAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWydmb250RmFtaWx5J10gPSAnTXlyaWFkIHBybyBTZW1pYm9sZCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWyd0ZXh0QWxpZ24nXSA9ICdjZW50ZXInO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnZm9udFNpemUnXSA9ICcxMXB4JztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ3BhZGRpbmdUb3AnXSA9ICczcHgnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnYm9yZGVyUmFkaXVzJ10gPSAnM3B4JztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ2NvbG9yJ10gPSAnI2U0ZTRlNCc7XG4gICAgfTtcblxuICAgIGZvciAobGV0IGkgaW4gZ2FPcHRpb25zT2JqKSB7XG4gICAgICBsZXQga2V5LFxuICAgICAgICBvYmogPSB7fSxcbiAgICAgICAgc3ViT2JqID0ge307XG4gICAgICBpZiAoZ2FPcHRpb25zT2JqW2ldID09PSAnZGlhbG9nQm94Jykge1xuICAgICAgICBrZXkgPSAnJm5ic3A7ICZuYnNwOyAnICsgaTtcbiAgICAgICAgb2JqW2tleV0gPSB7fTtcbiAgICAgICAgb2JqW2tleV0gPSB7XG4gICAgICAgICAgc3R5bGU6IHN1YkNhdFN0eWxlLFxuICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGxldCBwb3B1cFZhbCA9IHBvcHVwKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIC8vICAgc2VsZi5hbmFseXNlcihwYXJzZUludChzdHIpKTtcbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgaWYgKGkgPT09ICdGaXhlZC1OdW1iZXInKSB7XG4gICAgICAgICAgICAgIC8vIHNlbGYuYW5hbHlzZXIocGFyc2VJbnQod2luZG93LnByb21wdCgnRW50ZXIgdmFsdWUnKSkpO1xuICAgICAgICAgICAgICBsZXQgcG9wdXBWYWwgPSBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcihwYXJzZUludChzdHIpKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09ICdQb3NpdGlvbicpIHtcbiAgICAgICAgICAgICAgbGV0IHBvcHVwVmFsID0gcG9wdXAoZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3Bvc2l0aW9uOiBzdHJ9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleSA9ICcmIzk2NjYmbmJzcDsgJyArIGk7XG4gICAgICAgIG9ialtrZXldID0ge307XG4gICAgICAgIG9ialtrZXldLmFjdGlvbiA9ICdjbGljayc7XG4gICAgICAgIG9ialtrZXldLnN0eWxlID0gc3ViQ2F0U3R5bGU7XG4gICAgICAgIG9ialtrZXldLmhhbmRsZXIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYU9wdGlvbnNPYmpbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBsZXQgc3ViTWVudU5hbWUgPSBnYU9wdGlvbnNPYmpbaV1bal07XG4gICAgICAgICAgc3ViT2JqID0ge307XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdID0ge307XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLmhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBbJ01pbmltdW0nLCAnTWF4aW11bScsICdNZWFuJywgJ01lZGlhbicsICdTdGFuZGFyZCBEZXZpYXRpb24nXVxuICAgICAgICAgICAgLy8gWydQcmV2aW91cyBEYXRhc2V0JywgJ05leHQgRGF0YXNldCddXG4gICAgICAgICAgICAvLyBbJ05leHQnLCAnUHJldmlvdXMnXVxuICAgICAgICAgICAgaWYgKHN1Yk1lbnVOYW1lID09PSAnTWluaW11bScgfHxcbiAgICAgICAgICAgICAgc3ViTWVudU5hbWUgPT09ICdNYXhpbXVtJyB8fCBzdWJNZW51TmFtZSA9PT0gJ01lYW4nIHx8XG4gICAgICAgICAgICAgIHN1Yk1lbnVOYW1lID09PSAnTWVkaWFuJyB8fCBzdWJNZW51TmFtZSA9PT0gJ1N0YW5kYXJkIERldmlhdGlvbicpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcihzdWJNZW51TmFtZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnUHJldmlvdXMgRGF0YXNldCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cmVsZGF0YXNldHBvc2l0aW9uOiAtMX0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ05leHQgRGF0YXNldCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cmVsZGF0YXNldHBvc2l0aW9uOiAxfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnTmV4dCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cmVscG9zaXRpb246IC0xfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnUHJldmlvdXMnKSB7XG4gICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3JlbHBvc2l0aW9uOiAxfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uYWN0aW9uID0gJ2NsaWNrJztcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcbiAgICAgICAgICBvYmpba2V5XS5oYW5kbGVyLnB1c2goc3ViT2JqKTtcbiAgICAgICAgICBpZiAoaiAhPT0gZ2FPcHRpb25zT2JqW2ldLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaCh7XG4gICAgICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkNWQyZDInLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMXB4JyxcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogJzFweCcsXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMHB4J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250ZXh0QXJyYXkucHVzaChvYmopO1xuICAgICAgY29udGV4dEFycmF5LnB1c2goe1xuICAgICAgICAnJzoge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZDVkMmQyJyxcbiAgICAgICAgICAgIGhlaWdodDogJzFweCcsXG4gICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuICAgICAgICAgICAgcGFkZGluZzogJzBweCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnRleHRBcnJheS5wdXNoKHtcbiAgICAgICcmbmJzcDsgJm5ic3A7IFJlc2V0IFZpZXcnOiB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLmFuYWx5c2VyKCdyZXNldCcpO1xuICAgICAgICB9LFxuICAgICAgICBhY3Rpb246ICdjbGljaycsXG4gICAgICAgIHN0eWxlOiBzdWJDYXRTdHlsZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29udGV4dE1lbnUuYXBwZW5kQXNMaXN0KGNvbnRleHRBcnJheSk7XG5cbiAgICB0aGlzLlN5bWJvbFN0b3JlLnJlZ2lzdGVyKCdDb250ZXh0SWNvbicsIGZ1bmN0aW9uIChwb3N4LCBwb3N5LCByYWQpIHtcbiAgICAgIHZhciB4ID0gcG9zeCxcbiAgICAgICAgeSA9IHBvc3ksXG4gICAgICAgIHIgPSByYWQgKiAyLFxuICAgICAgICBzcGFjZSA9IE1hdGgucm91bmQociAvIDQpLFxuICAgICAgICBoYWxmV2lkdGggPSBNYXRoLnJvdW5kKHIgLyAyKSAqIDAuNyxcbiAgICAgICAgc3RhcnRYID0gKHggLSBoYWxmV2lkdGgpLFxuICAgICAgICBlbmRYID0gKHggKyBoYWxmV2lkdGgpLFxuICAgICAgICBzdGFydFkgPSAoeSArIHNwYWNlKSxcbiAgICAgICAgZW5kWSA9ICh5IC0gc3BhY2UpO1xuICAgICAgcmV0dXJuIFsnTScsIHN0YXJ0WCwgeSwgJ0wnLCBlbmRYLCB5LCAnTScsIHN0YXJ0WCwgc3RhcnRZLCAnTCcsIGVuZFgsIHN0YXJ0WSwgJ00nLCBzdGFydFgsIGVuZFksICdMJywgZW5kWCwgZW5kWV07XG4gICAgfSk7XG5cbiAgICBncm91cC5hZGRTeW1ib2woY29udGV4dE1lbnUpO1xuICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcbiAgICByZXR1cm4gdG9vbGJhcjtcbiAgfTtcblxuICBMZWdlbmRFeHQucHJvdG90eXBlLmdldExvZ2ljYWxTcGFjZSA9IGZ1bmN0aW9uIChhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KSB7XG4gICAgYXZhaWxhYmxlV2lkdGggLz0gMjtcbiAgICB2YXIgbG9naWNhbFNwYWNlLFxuICAgICAgd2lkdGggPSAwLFxuICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgIGksXG4gICAgICBsbjtcblxuICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcbiAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG4gICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgfVxuICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB3aWR0aCA+IGF2YWlsYWJsZVdpZHRoID8gMCA6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQgPiBhdmFpbGFibGVIZWlnaHQgPyAwIDogaGVpZ2h0XG4gICAgfTtcbiAgfTtcblxuICBMZWdlbmRFeHQucHJvdG90eXBlLnBsYWNlSW5DYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFkZGluZyA9IDU7XG4gICAgc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcbiAgICAgIG5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdUb29sQm94RXh0JztcbiAgICAgIH0sXG4gICAgICByZWY6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuICAgICAgfSxcbiAgICAgIHNlbGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9LFxuICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgICB9LFxuICAgICAgbGF5b3V0OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmouaW5saW5lO1xuICAgICAgfSxcbiAgICAgIG9yaWVudGF0aW9uOiBbe1xuICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICB9LFxuICAgICAgICBwb3NpdGlvbjogW3tcbiAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLnRvcDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9iai5yaWdodDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XVxuICAgIH1dKTtcbiAgfTtcblxuICBMZWdlbmRFeHQucHJvdG90eXBlLnNldERyYXdpbmdDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgbWVzLnggPSB4O1xuICAgIG1lcy55ID0geTtcbiAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTGVnZW5kRXh0LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgdmFyIG1lYXN1cmVtZW50ID0gdGhpcy5tZWFzdXJlbWVudCxcbiAgICAgIHRvb2xiYXJzID0gdGhpcy50b29sYmFycyxcbiAgICAgIGxuLFxuICAgICAgaSxcbiAgICAgIHRvb2xiYXI7XG4gICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcbiAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcbiAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG4gICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEZ1c2lvbkNoYXJ0cy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdsZWdlbmRFeHQnLCBMZWdlbmRFeHQpO1xufV0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZXh0ZW5zaW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcbmNsYXNzIEdyb3d0aEFuYWx5c2VyIHtcbiAgY29uc3RydWN0b3IgKGRhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhLm1hcCgoYSkgPT4ge1xuICAgICAgcmV0dXJuIGEubWFwKChiKSA9PiB7IHJldHVybiBiOyB9KTtcbiAgICB9KTtcbiAgICB0aGlzLkZvcm11bGFlID0gRm9ybXVsYWU7XG4gIH1cbiAgYW5hbHlzZSAobW9kZSkge1xuICAgIGxldCBpID0gMCxcbiAgICAgIGlpID0gMCxcbiAgICAgIGogPSAwLFxuICAgICAgamogPSAwLFxuICAgICAgbnVtID0gMCxcbiAgICAgIGNoZWNrQXJyID0gW10sXG4gICAgICBjaGVja051bSA9IDAsXG4gICAgICBkYXRhQXIgPSB0aGlzLmRhdGEsXG4gICAgICBuRGF0YUFyID0gW10sXG4gICAgICB0ZW1wQXIgPSBbXSxcbiAgICAgIHRlbXAgPSAwO1xuICAgIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycgJiYgbW9kZS50b0xvd2VyQ2FzZSgpID09PSAncmVzZXQnKSB7XG4gICAgICByZXR1cm4gZGF0YUFyLm1hcCgoYSkgPT4ge1xuICAgICAgICByZXR1cm4gYS5tYXAoKGIpID0+IHsgcmV0dXJuIGI7IH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZSkpIHsgLy8gSGFuZGxpbmcgYSBudW1iZXJcbiAgICAgIGNoZWNrTnVtID0gK21vZGU7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1vZGUgPSB0aGlzLkZvcm11bGFlW21vZGVdO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgY2hlY2tOdW0gPSBtb2RlKGRhdGFBcltpXSk7XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgaWYgKGNoZWNrTnVtID09PSAwKSB7XG4gICAgICAgICAgICB0ZW1wID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZW1wID0gMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wQXIucHVzaCh0ZW1wKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnJlbHBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucmVscG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIGlmIChqICsgbW9kZSA+PSAwICYmIGogKyBtb2RlIDwgamopIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW2ogKyBtb2RlXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBudW07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5wb3NpdGlvbikpIHtcbiAgICAgIG1vZGUgPSBtb2RlLnBvc2l0aW9uO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcbiAgICAgICAgICBpZiAobW9kZSA+PSAwICYmIG1vZGUgPCBqaikge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bbW9kZV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gbnVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW0pO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucmVsZGF0YXNldHBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucmVsZGF0YXNldHBvc2l0aW9uO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgaWYgKGkgKyBtb2RlID49IDAgJiYgaSArIG1vZGUgPCBpaSkge1xuICAgICAgICAgIGNoZWNrQXJyID0gZGF0YUFyW2kgKyBtb2RlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja0FyciA9IGRhdGFBcltpXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgY2hlY2tOdW0gPSBjaGVja0FycltqXTtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIG51bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoaSA9IDAsIGlpID0gbkRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBmb3IgKGogPSAwLCBqaiA9IG5EYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShuRGF0YUFyW2ldW2pdKSkge1xuICAgICAgICAgIG5EYXRhQXJbaV1bal0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuRGF0YUFyO1xuICB9XG59XG5cbnZhciBGb3JtdWxhZSA9IHtcbiAgTWluaW11bTogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSA+IGIgPyBiIDogYTtcbiAgICB9KTtcbiAgfSxcbiAgTWF4aW11bTogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSA8IGIgPyBiIDogYTtcbiAgICB9KTtcbiAgfSxcbiAgTWVhbjogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSArIGI7XG4gICAgfSkgLyBhcnIubGVuZ3RoO1xuICB9LFxuICBNZWRpYW46IChhcnIpID0+IHtcbiAgICByZXR1cm4gYXJyLm1hcCgoYSkgPT4gYSkuc29ydCgoYSwgYikgPT4geyByZXR1cm4gYSAtIGI7IH0pW2Fyci5sZW5ndGggLyAyXTtcbiAgfSxcbiAgJ1N0YW5kYXJkIERldmlhdGlvbic6ICh2YWx1ZXMpID0+IHtcbiAgICBmdW5jdGlvbiBhdmVyYWdlIChkYXRhKSB7XG4gICAgICB2YXIgc3VtLCBhdmc7XG4gICAgICBzdW0gPSBkYXRhLnJlZHVjZShmdW5jdGlvbiAoc3VtLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gc3VtICsgdmFsdWU7XG4gICAgICB9LCAwKTtcblxuICAgICAgYXZnID0gc3VtIC8gZGF0YS5sZW5ndGg7XG4gICAgICByZXR1cm4gYXZnO1xuICAgIH1cbiAgICB2YXIgYXZnID0gMCxcbiAgICAgIHNxdWFyZURpZmZzID0gMCxcbiAgICAgIHNxckRpZmYgPSAwLFxuICAgICAgYXZnU3F1YXJlRGlmZiA9IDAsXG4gICAgICBzdGREZXYgPSAwLFxuICAgICAgZGlmZiA9IDA7XG4gICAgYXZnID0gYXZlcmFnZSh2YWx1ZXMpO1xuICAgIHNxdWFyZURpZmZzID0gdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGRpZmYgPSB2YWx1ZSAtIGF2ZztcbiAgICAgIHNxckRpZmYgPSBkaWZmICogZGlmZjtcbiAgICAgIHJldHVybiBzcXJEaWZmO1xuICAgIH0pO1xuICAgIGF2Z1NxdWFyZURpZmYgPSBhdmVyYWdlKHNxdWFyZURpZmZzKTtcbiAgICBzdGREZXYgPSBNYXRoLnNxcnQoYXZnU3F1YXJlRGlmZik7XG4gICAgcmV0dXJuIHN0ZERldjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHcm93dGhBbmFseXNlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyb3d0aGFuYWx5c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdfQ==