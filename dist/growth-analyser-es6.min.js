(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false };modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1);},function(module,exports,__webpack_require__){const GrowthAnalyser=__webpack_require__(2);FusionCharts.register('extension',['private','growth-analyser-ext',function(){function GrowthAnalyserExt(){this.toolbox=FusionCharts.getComponent('api','toolbox');this.HorizontalToolbar=this.toolbox.HorizontalToolbar;this.ComponentGroup=this.toolbox.ComponentGroup;this.SymbolStore=this.toolbox.SymbolStore}GrowthAnalyserExt.prototype.constructor=GrowthAnalyserExt;GrowthAnalyserExt.prototype.renderChange=function(){var chartInstance=this.tsObject.chartInstance,componentStore=chartInstance.apiInstance.getComponentStore(),i=0;for(i=0;componentStore.getCanvasByIndex(i);i+=1){componentStore.getCanvasByIndex(i).getComposition().PlotManager.plot()}};GrowthAnalyserExt.prototype.analyser=function(mode){var ga=this.ga||{},store=this.tsObject.apiInstance.getComponentStore(),canvas=store.getCanvasByIndex(0),nav=store.getNavigatorByIndex(0),comp=canvas.getComposition(),ds=ga.ds||comp.dataset,i,idMap=ga.idMap||{},storeAr=ga.storeAr||[],nStoreArr=[],yAxis=canvas.composition.yAxis;if(mode==='reset'){yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val}}else{yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val+'%'}}this.ga=ga;if(!ga.storeAr){store={};if(!ga.idMap){ds.forEachSeries(function(a,b,c,series){store[series.getId()]=series.getOriginalData()});for(i in store){storeAr.push(store[i]);idMap[i]=storeAr.length-1;}ga.idMap=idMap;ga.ds=ds;ga.storeAr=storeAr;ga.gAnalyser=new GrowthAnalyser(storeAr)}}nStoreArr=ga.gAnalyser.analyse(mode);ds.setDataBySeries(function(series){if(nStoreArr.length){series.setOriginalData(nStoreArr[idMap[series.getId()]])}});comp.impl.update()};GrowthAnalyserExt.prototype.init=function(require){var instance=this;require(['xAxis','yAxis','graphics','chart','dataset','PlotManager','canvasConfig','MarkerManager','reactiveModel','globalReactiveModel','spaceManagerInstance','smartLabel','chartInstance','canvasData',function(xAxis,yAxis,graphics,chart,dataset,plotManager,canvasConfig,markerManager,reactiveModel,globalReactiveModel,spaceManagerInstance,smartLabel,chartInstance,canvasData){instance.xAxis=xAxis;instance.yAxis=yAxis;instance.graphics=graphics;instance.chart=chart;instance.dataset=dataset;instance.plotManager=plotManager;instance.markerManager=markerManager;instance.canvasConfig=canvasConfig;instance.reactiveModel=reactiveModel;instance.globalReactiveModel=globalReactiveModel;instance.spaceManagerInstance=spaceManagerInstance;instance.smartLabel=smartLabel;instance.chartInstance=chartInstance;instance.canvasData=canvasData}]);this.spaceManagerInstance=instance.spaceManagerInstance;this.globalReactiveModel=instance.globalReactiveModel;this.tsObject=instance.chartInstance;this.startDt=instance.globalReactiveModel.model['x-axis-visible-range-start'];this.endDt=instance.globalReactiveModel.model['x-axis-visible-range-end'];this.startDataset=instance.globalReactiveModel.model['x-axis-absolute-range-start'];this.endDataset=instance.globalReactiveModel.model['x-axis-absolute-range-end'];this.toolbars=[];this.measurement={};this.toolbars.push(this.createToolbar());return this};GrowthAnalyserExt.prototype.createToolbar=function(){var toolbar,group,self=this,contextMenu,contextArray=[],gaOptionsObj={},popup,paper=this.graphics.paper,chartContainer=this.graphics.container,subCatStyle={'font-size':'12px','color':'#696969','fontFamily':'Myriad Pro'},catStyle={'font-size':'13px','color':'#696969','font-family':'Myriad Pro Semibold'};toolbar=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});toolbar.setConfig({fill:'#fff',borderThickness:0});group=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});group.setConfig({fill:'#fff',borderThickness:0});gaOptionsObj={'Fixed-Number':'dialogBox','Functions':['Minimum','Maximum','Mean','Median','Standard Deviation'],'Position':'dialogBox','Dataset':['Previous Dataset','Next Dataset'],'Relative-Position':['Next','Previous']};contextMenu=new this.toolbox.SymbolWithContext('ContextIcon',{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{width:24,height:24,position:'right',stroke:'#ced5d4',strokeWidth:'1',radius:'1',symbolStroke:'#696969',symbolStrokeWidth:'2'});contextArray.push({'Growth Analyser':{style:catStyle}});popup=function(callback){var box,header,style={fontSize:10+'px',lineHeight:15+'px',fontFamily:'Lucida Grande',stroke:'#676767','stroke-width':'2'},headerWidth=180,headerText,cross,inputField,applyButton,x=500,y=100;box=paper.html('div',{fill:'#f7f7f7',x:x-200,y:y+100,width:180,height:80},style,chartContainer);header=paper.html('div',{fill:'#e8e8e8',width:headerWidth,height:20},style,box);headerText=paper.html('div',{fill:'transparent',width:headerWidth*0.6,height:20,x:10,y:2},style,header);headerText.attr({text:'Provide Specific Value'});cross=paper.html('div',{fill:'transparent',width:10,height:10,position:'relative',float:'right',text:'X',cursor:'pointer'},style,header);cross.on('click',function(){box.hide()});inputField=paper.html('input',{width:100,height:20,x:10,y:30},style,box);applyButton=paper.html('div',{width:50,height:20,x:120,y:30,fill:'#555555'},{fontSize:10+'px',lineHeight:15+'px',fontFamily:'Lucida Grande',fill:'#eaeaea',color:'#eaeaea',stroke:'#eaeaea',cursor:'pointer'},box);applyButton.on('click',function(){box.hide();callback(inputField.val())});applyButton.attr({text:'Apply'});inputField.element.focus();function inputFieldNumberHandler(){inputField.element.value=inputField.element.value.replace(/[^\d.-]/g,'')}inputField.element.addEventListener('keyup',inputFieldNumberHandler);cross.element.style['position']='relative';cross.element.style['backgroundColor']='#d2d2d2';cross.element.style['border']='2px solid #cbcbcb';cross.element.style['padding']='0px 0px 3.5px 2px';cross.element.style['color']='#8c8c8c';cross.element.style['margin']='1px 2px';cross.element.style['float']='right';inputField.element.style['marginTop']='8px';inputField.element.style['border']='2px solid #dadbda';applyButton.element.style['marginTop']='8px';box.element.style['border']='1px solid #d4d2d3';header.element.style['border']='1px solid #d4d2d3';header.element.style['width']='179px';headerText.element.style['fontSize']='11.5px';headerText.element.style['marginTop']='0.5px';headerText.element.style['color']='#676767';header.element.style['fontFamily']='Myriad pro Semibold';applyButton.element.style['textAlign']='center';applyButton.element.style['fontSize']='11px';applyButton.element.style['paddingTop']='3px';applyButton.element.style['borderRadius']='3px';applyButton.element.style['color']='#e4e4e4'};for(let i in gaOptionsObj){let key,obj={},subObj={};if(gaOptionsObj[i]==='dialogBox'){key='&nbsp; &nbsp; '+i;obj[key]={};obj[key]={style:subCatStyle,handler:function(){if(i==='Fixed-Number'){let popupVal=popup(function(str){self.analyser(parseInt(str))})}else if(i==='Position'){let popupVal=popup(function(str){self.analyser({position:str})})}},action:'click'}}else{key='&#9666&nbsp; '+i;obj[key]={};obj[key].action='click';obj[key].style=subCatStyle;obj[key].handler=[];for(let j=0;j<gaOptionsObj[i].length;j+=1){let subMenuName=gaOptionsObj[i][j];subObj={};subObj['&nbsp;'+subMenuName]={};subObj['&nbsp;'+subMenuName].handler=function(){if(subMenuName==='Minimum'||subMenuName==='Maximum'||subMenuName==='Mean'||subMenuName==='Median'||subMenuName==='Standard Deviation'){self.analyser(subMenuName)}else if(subMenuName==='Previous Dataset'){self.analyser({reldatasetposition:-1})}else if(subMenuName==='Next Dataset'){self.analyser({reldatasetposition:1})}else if(subMenuName==='Next'){self.analyser({relposition:-1})}else if(subMenuName==='Previous'){self.analyser({relposition:1})}};subObj['&nbsp;'+subMenuName].action='click';subObj['&nbsp;'+subMenuName].style=subCatStyle;obj[key].handler.push(subObj);if(j!==gaOptionsObj[i].length-1){obj[key].handler.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}}}contextArray.push(obj);contextArray.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}contextArray.push({'&nbsp; &nbsp; Reset View':{handler:function(){self.analyser('reset')},action:'click',style:subCatStyle}});contextMenu.appendAsList(contextArray);this.SymbolStore.register('ContextIcon',function(posx,posy,rad){var x=posx,y=posy,r=rad*2,space=Math.round(r/4),halfWidth=Math.round(r/2)*0.7,startX=(x-halfWidth),endX=(x+halfWidth),startY=(y+space),endY=(y-space);return['M',startX,y,'L',endX,y,'M',startX,startY,'L',endX,startY,'M',startX,endY,'L',endX,endY]});group.addSymbol(contextMenu);toolbar.addComponent(group);return toolbar};GrowthAnalyserExt.prototype.getLogicalSpace=function(availableWidth,availableHeight){availableWidth/=2;var logicalSpace,width=0,height=0,i,ln;for(i=0,ln=this.toolbars.length;i<ln;i+=1){logicalSpace=this.toolbars[i].getLogicalSpace(availableWidth,availableHeight);width=Math.max(logicalSpace.width,width);height+=logicalSpace.height;this.toolbars[i].width=logicalSpace.width;this.toolbars[i].height=logicalSpace.height}height+=this.padding;return{width:width>availableWidth?0:width,height:height>availableHeight?0:height}};GrowthAnalyserExt.prototype.placeInCanvas=function(){var self=this;self.padding=5;self.spaceManagerInstance.add([{name:function(){return 'ToolBoxExt'},ref:function(obj){return obj['0']},self:function(){return self},priority:function(){return 2},layout:function(obj){return obj.inline},orientation:[{type:function(obj){return obj.horizontal},position:[{type:function(obj){return obj.top},alignment:[{type:function(obj){return obj.right},dimensions:[function(){var parent=this.getParentComponentGroup();return self.getLogicalSpace(parent.getWidth(),parent.getHeight())}]}]}]}]}])};GrowthAnalyserExt.prototype.setDrawingConfiguration=function(x,y,width,height,group){var mes=this.measurement;mes.x=x;mes.y=y;mes.width=width;mes.height=height;this.parentGroup=group;return this};GrowthAnalyserExt.prototype.draw=function(x,y,width,height,group){var measurement=this.measurement,toolbars=this.toolbars,ln,i,toolbar;x=x===undefined?measurement.x:x;y=y===undefined?measurement.y:y;width=width===undefined?measurement.width:width;height=height===undefined?measurement.height:height;group=group===undefined?this.parentGroup:group;if(width&&height){for(i=0,ln=toolbars.length;i<ln;i+=1){toolbar=toolbars[i];toolbar.draw(x,y)}}};FusionCharts.registerComponent('extensions','GrowthAnalyserExt',GrowthAnalyserExt)}]);},function(module,exports){'use strict';class GrowthAnalyser{constructor(data){this.data=data.map((a)=>{return a.map((b)=>{return b})});this.Formulae=Formulae}analyse(mode){let i=0,ii=0,j=0,jj=0,num=0,checkArr=[],checkNum=0,dataAr=this.data,nDataAr=[],tempAr=[],temp=0;if(typeof mode==='string'&&mode.toLowerCase()==='reset'){return dataAr.map((a)=>{return a.map((b)=>{return b})})}else if(!isNaN(mode)){checkNum= +mode;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(typeof mode==='string'){mode=this.Formulae[mode];for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];checkNum=mode(dataAr[i]);for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(checkNum===0){temp=undefined}else{temp=100*(num-checkNum)/checkNum}tempAr.push(temp)}nDataAr.push(tempAr)}}else if(!isNaN(mode.relposition)){mode=mode.relposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(j+mode>=0&&j+mode<jj){checkNum=dataAr[i][j+mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.position)){mode=mode.position;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(mode>=0&&mode<jj){checkNum=dataAr[i][mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.reldatasetposition)){mode=mode.reldatasetposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];if(i+mode>=0&&i+mode<ii){checkArr=dataAr[i+mode]}else{checkArr=dataAr[i]}for(j=0,jj=dataAr[i].length;j<jj;j+=1){checkNum=checkArr[j];num=dataAr[i][j];tempAr.push(100*(num-checkNum)/num)}nDataAr.push(tempAr)}}for(i=0,ii=nDataAr.length;i<ii;i+=1){for(j=0,jj=nDataAr[i].length;j<jj;j+=1){if(!Number.isFinite(nDataAr[i][j])){nDataAr[i][j]=null}}}return nDataAr}}var Formulae={Minimum:(arr)=>{return arr.reduce((a,b)=>{return a>b?b:a})},Maximum:(arr)=>{return arr.reduce((a,b)=>{return a<b?b:a})},Mean:(arr)=>{return arr.reduce((a,b)=>{return a+b})/arr.length},Median:(arr)=>{return arr.map((a)=>a).sort((a,b)=>{return a-b})[arr.length/2]},'Standard Deviation':(values)=>{function average(data){var sum,avg;sum=data.reduce(function(sum,value){return sum+value},0);avg=sum/data.length;return avg}var avg=0,squareDiffs=0,sqrDiff=0,avgSquareDiff=0,stdDev=0,diff=0;avg=average(values);squareDiffs=values.map(function(value){diff=value-avg;sqrDiff=diff*diff;return sqrDiff});avgSquareDiff=average(squareDiffs);stdDev=Math.sqrt(avgSquareDiff);return stdDev}};module.exports=GrowthAnalyser;}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYWQ2M2MyNmFkNDQwMGZjMTRkMGUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V4dGVuc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3Jvd3RoYW5hbHlzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDdENBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZSxvQ0FBb0M7QUFDbkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsMkNBQTBDLHdDQUF3QyxFQUFFO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxR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cyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGFkNjNjMjZhZDQ0MDBmYzE0ZDBlIiwiY29uc3QgR3Jvd3RoQW5hbHlzZXIgPSByZXF1aXJlKCcuL2dyb3d0aGFuYWx5c2VyJyk7XG5cbkZ1c2lvbkNoYXJ0cy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ2dyb3d0aC1hbmFseXNlci1leHQnLCBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEdyb3d0aEFuYWx5c2VyRXh0ICgpIHtcbiAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG4gICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcbiAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuICB9XG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdyb3d0aEFuYWx5c2VyRXh0O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5yZW5kZXJDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNoYXJ0SW5zdGFuY2UgPSB0aGlzLnRzT2JqZWN0LmNoYXJ0SW5zdGFuY2UsXG4gICAgICBjb21wb25lbnRTdG9yZSA9IGNoYXJ0SW5zdGFuY2UuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcbiAgICAgIGkgPSAwO1xuICAgIGZvciAoaSA9IDA7IGNvbXBvbmVudFN0b3JlLmdldENhbnZhc0J5SW5kZXgoaSk7ICsraSkge1xuICAgICAgY29tcG9uZW50U3RvcmUuZ2V0Q2FudmFzQnlJbmRleChpKS5nZXRDb21wb3NpdGlvbigpLlBsb3RNYW5hZ2VyLnBsb3QoKTtcbiAgICB9XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmFuYWx5c2VyID0gZnVuY3Rpb24gKG1vZGUpIHtcbiAgICB2YXIgZ2EgPSB0aGlzLmdhIHx8IHt9LFxuICAgICAgc3RvcmUgPSB0aGlzLnRzT2JqZWN0LmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCksXG4gICAgICBjYW52YXMgPSBzdG9yZS5nZXRDYW52YXNCeUluZGV4KDApLFxuICAgICAgbmF2ID0gc3RvcmUuZ2V0TmF2aWdhdG9yQnlJbmRleCgwKSxcbiAgICAgIGNvbXAgPSBjYW52YXMuZ2V0Q29tcG9zaXRpb24oKSxcbiAgICAgIGRzID0gZ2EuZHMgfHwgY29tcC5kYXRhc2V0LFxuICAgICAgaSxcbiAgICAgIGlkTWFwID0gZ2EuaWRNYXAgfHwge30sXG4gICAgICBzdG9yZUFyID0gZ2Euc3RvcmVBciB8fCBbXSxcbiAgICAgIG5TdG9yZUFyciA9IFtdLFxuICAgICAgeUF4aXMgPSBjYW52YXMuY29tcG9zaXRpb24ueUF4aXM7XG4gICAgLy8gQ2hhbmdpbmcgeSBBeGlzIGZvcm1hdHRvclxuICAgIGlmIChtb2RlID09PSAncmVzZXQnKSB7XG4gICAgICB5QXhpcy5nZXRTY2FsZU9iaigpLmdldEludGVydmFsT2JqKCkuZ2V0Q29uZmlnKCdpbnRlcnZhbHMnKS5tYWpvci5mb3JtYXR0ZXIgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB5QXhpcy5nZXRTY2FsZU9iaigpLmdldEludGVydmFsT2JqKCkuZ2V0Q29uZmlnKCdpbnRlcnZhbHMnKS5tYWpvci5mb3JtYXR0ZXIgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWwgKyAnJSc7XG4gICAgICB9O1xuICAgIH1cbiAgICAvLyBEZWNsYXJhdGlvbiBlbmRzXG4gICAgdGhpcy5nYSA9IGdhO1xuICAgIGlmICghZ2Euc3RvcmVBcikge1xuICAgICAgc3RvcmUgPSB7fTtcbiAgICAgIGlmICghZ2EuaWRNYXApIHtcbiAgICAgICAgZHMuZm9yRWFjaFNlcmllcyhmdW5jdGlvbiAoYSwgYiwgYywgc2VyaWVzKSB7XG4gICAgICAgICAgc3RvcmVbc2VyaWVzLmdldElkKCldID0gc2VyaWVzLmdldE9yaWdpbmFsRGF0YSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChpIGluIHN0b3JlKSB7XG4gICAgICAgICAgc3RvcmVBci5wdXNoKHN0b3JlW2ldKTtcbiAgICAgICAgICBpZE1hcFtpXSA9IHN0b3JlQXIubGVuZ3RoIC0gMTtcbiAgICAgICAgICAvLyA9IHN0b3JlW2ldLm1hcChmdW5jdGlvbiAoZSkgeyByZXR1cm4gMjAgKiBlICsgKE1hdGgucmFuZG9tKCkgKiAxMDAwKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2EuaWRNYXAgPSBpZE1hcDtcbiAgICAgICAgZ2EuZHMgPSBkcztcbiAgICAgICAgZ2Euc3RvcmVBciA9IHN0b3JlQXI7XG4gICAgICAgIGdhLmdBbmFseXNlciA9IG5ldyBHcm93dGhBbmFseXNlcihzdG9yZUFyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgblN0b3JlQXJyID0gZ2EuZ0FuYWx5c2VyLmFuYWx5c2UobW9kZSk7XG4gICAgZHMuc2V0RGF0YUJ5U2VyaWVzKGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgIGlmIChuU3RvcmVBcnIubGVuZ3RoKSB7XG4gICAgICAgIHNlcmllcy5zZXRPcmlnaW5hbERhdGEoblN0b3JlQXJyW2lkTWFwW3Nlcmllcy5nZXRJZCgpXV0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbXAuaW1wbC51cGRhdGUoKTtcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChyZXF1aXJlKSB7XG4gICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICByZXF1aXJlKFtcbiAgICAgICd4QXhpcycsXG4gICAgICAneUF4aXMnLFxuICAgICAgJ2dyYXBoaWNzJyxcbiAgICAgICdjaGFydCcsXG4gICAgICAnZGF0YXNldCcsXG4gICAgICAnUGxvdE1hbmFnZXInLFxuICAgICAgJ2NhbnZhc0NvbmZpZycsXG4gICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAncmVhY3RpdmVNb2RlbCcsXG4gICAgICAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsXG4gICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgJ3NtYXJ0TGFiZWwnLFxuICAgICAgJ2NoYXJ0SW5zdGFuY2UnLFxuICAgICAgJ2NhbnZhc0RhdGEnLFxuICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgeEF4aXMsXG4gICAgICAgICAgICB5QXhpcyxcbiAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICBkYXRhc2V0LFxuICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICBjYW52YXNDb25maWcsXG4gICAgICAgICAgICBtYXJrZXJNYW5hZ2VyLFxuICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgIGdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICBzcGFjZU1hbmFnZXJJbnN0YW5jZSxcbiAgICAgICAgICAgIHNtYXJ0TGFiZWwsXG4gICAgICAgICAgICBjaGFydEluc3RhbmNlLFxuICAgICAgICAgICAgY2FudmFzRGF0YSkge1xuICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcbiAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcbiAgICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0RhdGEgPSBjYW52YXNEYXRhO1xuICAgICAgfVxuICAgIF0pO1xuICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgIHRoaXMudHNPYmplY3QgPSBpbnN0YW5jZS5jaGFydEluc3RhbmNlO1xuICAgIHRoaXMuc3RhcnREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcbiAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG4gICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuY3JlYXRlVG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdG9vbGJhcixcbiAgICAgIGdyb3VwLFxuICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICBjb250ZXh0TWVudSxcbiAgICAgIGNvbnRleHRBcnJheSA9IFtdLFxuICAgICAgZ2FPcHRpb25zT2JqID0ge30sXG4gICAgICBwb3B1cCxcbiAgICAgIHBhcGVyID0gdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0Q29udGFpbmVyID0gdGhpcy5ncmFwaGljcy5jb250YWluZXIsXG4gICAgICBzdWJDYXRTdHlsZSA9IHtcbiAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMnB4JyxcbiAgICAgICAgJ2NvbG9yJzogJyM2OTY5NjknLFxuICAgICAgICAnZm9udEZhbWlseSc6ICdNeXJpYWQgUHJvJ1xuICAgICAgfSxcbiAgICAgIGNhdFN0eWxlID0ge1xuICAgICAgICAnZm9udC1zaXplJzogJzEzcHgnLFxuICAgICAgICAnY29sb3InOiAnIzY5Njk2OScsXG4gICAgICAgICdmb250LWZhbWlseSc6ICdNeXJpYWQgUHJvIFNlbWlib2xkJ1xuICAgICAgfTtcblxuICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSk7XG5cbiAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICB9KTtcblxuICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSk7XG5cbiAgICBncm91cC5zZXRDb25maWcoe1xuICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgfSk7XG5cbiAgICBnYU9wdGlvbnNPYmogPSB7XG4gICAgICAnRml4ZWQtTnVtYmVyJzogJ2RpYWxvZ0JveCcsXG4gICAgICAnRnVuY3Rpb25zJzogWydNaW5pbXVtJywgJ01heGltdW0nLCAnTWVhbicsICdNZWRpYW4nLCAnU3RhbmRhcmQgRGV2aWF0aW9uJ10sXG4gICAgICAnUG9zaXRpb24nOiAnZGlhbG9nQm94JyxcbiAgICAgICdEYXRhc2V0JzogWydQcmV2aW91cyBEYXRhc2V0JywgJ05leHQgRGF0YXNldCddLFxuICAgICAgJ1JlbGF0aXZlLVBvc2l0aW9uJzogWydOZXh0JywgJ1ByZXZpb3VzJ11cbiAgICB9O1xuXG4gICAgY29udGV4dE1lbnUgPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbFdpdGhDb250ZXh0KCdDb250ZXh0SWNvbicsIHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9LCB7XG4gICAgICB3aWR0aDogMjQsXG4gICAgICBoZWlnaHQ6IDI0LFxuICAgICAgcG9zaXRpb246ICdyaWdodCcsXG4gICAgICBzdHJva2U6ICcjY2VkNWQ0JyxcbiAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICByYWRpdXM6ICcxJyxcbiAgICAgIHN5bWJvbFN0cm9rZTogJyM2OTY5NjknLFxuICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJ1xuICAgIH0pO1xuXG4gICAgY29udGV4dEFycmF5LnB1c2goe1xuICAgICAgJ0dyb3d0aCBBbmFseXNlcic6IHtcbiAgICAgICAgc3R5bGU6IGNhdFN0eWxlXG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9wdXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBib3gsXG4gICAgICAgIGhlYWRlcixcbiAgICAgICAgc3R5bGUgPSB7XG4gICAgICAgICAgZm9udFNpemU6IDEwICsgJ3B4JyxcbiAgICAgICAgICBsaW5lSGVpZ2h0OiAxNSArICdweCcsXG4gICAgICAgICAgZm9udEZhbWlseTogJ0x1Y2lkYSBHcmFuZGUnLFxuICAgICAgICAgIHN0cm9rZTogJyM2NzY3NjcnLFxuICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAnMidcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGVyV2lkdGggPSAxODAsXG4gICAgICAgIGhlYWRlclRleHQsXG4gICAgICAgIGNyb3NzLFxuICAgICAgICBpbnB1dEZpZWxkLFxuICAgICAgICBhcHBseUJ1dHRvbixcbiAgICAgICAgeCA9IDUwMCxcbiAgICAgICAgeSA9IDEwMDtcblxuICAgICAgYm94ID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAnI2Y3ZjdmNycsXG4gICAgICAgIHg6IHggLSAyMDAsXG4gICAgICAgIHk6IHkgKyAxMDAsXG4gICAgICAgIHdpZHRoOiAxODAsXG4gICAgICAgIGhlaWdodDogODBcbiAgICAgIH0sIHN0eWxlLCBjaGFydENvbnRhaW5lcik7XG5cbiAgICAgIGhlYWRlciA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJyNlOGU4ZTgnLFxuICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogMjBcbiAgICAgIH0sIHN0eWxlLCBib3gpO1xuXG4gICAgICBoZWFkZXJUZXh0ID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGggKiAwLjYsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIHg6IDEwLFxuICAgICAgICB5OiAyXG4gICAgICB9LCBzdHlsZSwgaGVhZGVyKTtcblxuICAgICAgaGVhZGVyVGV4dC5hdHRyKHtcbiAgICAgICAgdGV4dDogJ1Byb3ZpZGUgU3BlY2lmaWMgVmFsdWUnXG4gICAgICB9KTtcblxuICAgICAgY3Jvc3MgPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgIHdpZHRoOiAxMCxcbiAgICAgICAgaGVpZ2h0OiAxMCxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgIGZsb2F0OiAncmlnaHQnLFxuICAgICAgICB0ZXh0OiAnWCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG4gICAgICB9LCBzdHlsZSwgaGVhZGVyKTtcblxuICAgICAgY3Jvc3Mub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBib3guaGlkZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGlucHV0RmllbGQgPSBwYXBlci5odG1sKCdpbnB1dCcsIHtcbiAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgICAgeDogMTAsXG4gICAgICAgIHk6IDMwXG4gICAgICB9LCBzdHlsZSwgYm94KTtcblxuICAgICAgYXBwbHlCdXR0b24gPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIHdpZHRoOiA1MCxcbiAgICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgICAgeDogMTIwLFxuICAgICAgICB5OiAzMCxcbiAgICAgICAgZmlsbDogJyM1NTU1NTUnXG4gICAgICB9LCB7XG4gICAgICAgIGZvbnRTaXplOiAxMCArICdweCcsXG4gICAgICAgIGxpbmVIZWlnaHQ6IDE1ICsgJ3B4JyxcbiAgICAgICAgZm9udEZhbWlseTogJ0x1Y2lkYSBHcmFuZGUnLFxuICAgICAgICBmaWxsOiAnI2VhZWFlYScsXG4gICAgICAgIGNvbG9yOiAnI2VhZWFlYScsXG4gICAgICAgIHN0cm9rZTogJyNlYWVhZWEnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuICAgICAgfSwgYm94KTtcblxuICAgICAgYXBwbHlCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBib3guaGlkZSgpO1xuICAgICAgICBjYWxsYmFjayhpbnB1dEZpZWxkLnZhbCgpKTtcbiAgICAgIH0pO1xuICAgICAgYXBwbHlCdXR0b24uYXR0cih7XG4gICAgICAgIHRleHQ6ICdBcHBseSdcbiAgICAgIH0pO1xuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LmZvY3VzKCk7XG4gICAgICBmdW5jdGlvbiBpbnB1dEZpZWxkTnVtYmVySGFuZGxlciAoKSB7XG4gICAgICAgIGlucHV0RmllbGQuZWxlbWVudC52YWx1ZSA9IGlucHV0RmllbGQuZWxlbWVudC52YWx1ZS5yZXBsYWNlKC9bXlxcZC4tXS9nLCAnJyk7XG4gICAgICB9XG4gICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBpbnB1dEZpZWxkTnVtYmVySGFuZGxlcik7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydwb3NpdGlvbiddID0gJ3JlbGF0aXZlJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2JhY2tncm91bmRDb2xvciddID0gJyNkMmQyZDInO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMnB4IHNvbGlkICNjYmNiY2InO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsncGFkZGluZyddID0gJzBweCAwcHggMy41cHggMnB4JztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2NvbG9yJ10gPSAnIzhjOGM4Yyc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydtYXJnaW4nXSA9ICcxcHggMnB4JztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2Zsb2F0J10gPSAncmlnaHQnO1xuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICc4cHgnO1xuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcycHggc29saWQgI2RhZGJkYSc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICc4cHgnO1xuICAgICAgYm94LmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzFweCBzb2xpZCAjZDRkMmQzJztcbiAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcxcHggc29saWQgI2Q0ZDJkMyc7XG4gICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnd2lkdGgnXSA9ICcxNzlweCc7XG4gICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ2ZvbnRTaXplJ10gPSAnMTEuNXB4JztcbiAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnMC41cHgnO1xuICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyM2NzY3NjcnO1xuICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ2ZvbnRGYW1pbHknXSA9ICdNeXJpYWQgcHJvIFNlbWlib2xkJztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ3RleHRBbGlnbiddID0gJ2NlbnRlcic7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExcHgnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsncGFkZGluZ1RvcCddID0gJzNweCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydib3JkZXJSYWRpdXMnXSA9ICczcHgnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjZTRlNGU0JztcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgaSBpbiBnYU9wdGlvbnNPYmopIHtcbiAgICAgIGxldCBrZXksXG4gICAgICAgIG9iaiA9IHt9LFxuICAgICAgICBzdWJPYmogPSB7fTtcbiAgICAgIGlmIChnYU9wdGlvbnNPYmpbaV0gPT09ICdkaWFsb2dCb3gnKSB7XG4gICAgICAgIGtleSA9ICcmbmJzcDsgJm5ic3A7ICcgKyBpO1xuICAgICAgICBvYmpba2V5XSA9IHt9O1xuICAgICAgICBvYmpba2V5XSA9IHtcbiAgICAgICAgICBzdHlsZTogc3ViQ2F0U3R5bGUsXG4gICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gbGV0IHBvcHVwVmFsID0gcG9wdXAoZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgLy8gICBzZWxmLmFuYWx5c2VyKHBhcnNlSW50KHN0cikpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICBpZiAoaSA9PT0gJ0ZpeGVkLU51bWJlcicpIHtcbiAgICAgICAgICAgICAgLy8gc2VsZi5hbmFseXNlcihwYXJzZUludCh3aW5kb3cucHJvbXB0KCdFbnRlciB2YWx1ZScpKSk7XG4gICAgICAgICAgICAgIGxldCBwb3B1cFZhbCA9IHBvcHVwKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHBhcnNlSW50KHN0cikpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gJ1Bvc2l0aW9uJykge1xuICAgICAgICAgICAgICBsZXQgcG9wdXBWYWwgPSBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cG9zaXRpb246IHN0cn0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAga2V5ID0gJyYjOTY2NiZuYnNwOyAnICsgaTtcbiAgICAgICAgb2JqW2tleV0gPSB7fTtcbiAgICAgICAgb2JqW2tleV0uYWN0aW9uID0gJ2NsaWNrJztcbiAgICAgICAgb2JqW2tleV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcbiAgICAgICAgb2JqW2tleV0uaGFuZGxlciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdhT3B0aW9uc09ialtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGxldCBzdWJNZW51TmFtZSA9IGdhT3B0aW9uc09ialtpXVtqXTtcbiAgICAgICAgICBzdWJPYmogPSB7fTtcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0gPSB7fTtcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uaGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFsnTWluaW11bScsICdNYXhpbXVtJywgJ01lYW4nLCAnTWVkaWFuJywgJ1N0YW5kYXJkIERldmlhdGlvbiddXG4gICAgICAgICAgICAvLyBbJ1ByZXZpb3VzIERhdGFzZXQnLCAnTmV4dCBEYXRhc2V0J11cbiAgICAgICAgICAgIC8vIFsnTmV4dCcsICdQcmV2aW91cyddXG4gICAgICAgICAgICBpZiAoc3ViTWVudU5hbWUgPT09ICdNaW5pbXVtJyB8fFxuICAgICAgICAgICAgICBzdWJNZW51TmFtZSA9PT0gJ01heGltdW0nIHx8IHN1Yk1lbnVOYW1lID09PSAnTWVhbicgfHxcbiAgICAgICAgICAgICAgc3ViTWVudU5hbWUgPT09ICdNZWRpYW4nIHx8IHN1Yk1lbnVOYW1lID09PSAnU3RhbmRhcmQgRGV2aWF0aW9uJykge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHN1Yk1lbnVOYW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdQcmV2aW91cyBEYXRhc2V0Jykge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHtyZWxkYXRhc2V0cG9zaXRpb246IC0xfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnTmV4dCBEYXRhc2V0Jykge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHtyZWxkYXRhc2V0cG9zaXRpb246IDF9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdOZXh0Jykge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHtyZWxwb3NpdGlvbjogLTF9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdQcmV2aW91cycpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cmVscG9zaXRpb246IDF9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXS5hY3Rpb24gPSAnY2xpY2snO1xuICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXS5zdHlsZSA9IHN1YkNhdFN0eWxlO1xuICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaChzdWJPYmopO1xuICAgICAgICAgIGlmIChqICE9PSBnYU9wdGlvbnNPYmpbaV0ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgb2JqW2tleV0uaGFuZGxlci5wdXNoKHtcbiAgICAgICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2Q1ZDJkMicsXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxuICAgICAgICAgICAgICAgICAgbWFyZ2luOiAnMXB4JyxcbiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICcwcHgnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnRleHRBcnJheS5wdXNoKG9iaik7XG4gICAgICBjb250ZXh0QXJyYXkucHVzaCh7XG4gICAgICAgICcnOiB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkNWQyZDInLFxuICAgICAgICAgICAgaGVpZ2h0OiAnMXB4JyxcbiAgICAgICAgICAgIG1hcmdpbjogJzFweCcsXG4gICAgICAgICAgICBwYWRkaW5nOiAnMHB4J1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29udGV4dEFycmF5LnB1c2goe1xuICAgICAgJyZuYnNwOyAmbmJzcDsgUmVzZXQgVmlldyc6IHtcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYuYW5hbHlzZXIoJ3Jlc2V0Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFjdGlvbjogJ2NsaWNrJyxcbiAgICAgICAgc3R5bGU6IHN1YkNhdFN0eWxlXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250ZXh0TWVudS5hcHBlbmRBc0xpc3QoY29udGV4dEFycmF5KTtcblxuICAgIHRoaXMuU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ0NvbnRleHRJY29uJywgZnVuY3Rpb24gKHBvc3gsIHBvc3ksIHJhZCkge1xuICAgICAgdmFyIHggPSBwb3N4LFxuICAgICAgICB5ID0gcG9zeSxcbiAgICAgICAgciA9IHJhZCAqIDIsXG4gICAgICAgIHNwYWNlID0gTWF0aC5yb3VuZChyIC8gNCksXG4gICAgICAgIGhhbGZXaWR0aCA9IE1hdGgucm91bmQociAvIDIpICogMC43LFxuICAgICAgICBzdGFydFggPSAoeCAtIGhhbGZXaWR0aCksXG4gICAgICAgIGVuZFggPSAoeCArIGhhbGZXaWR0aCksXG4gICAgICAgIHN0YXJ0WSA9ICh5ICsgc3BhY2UpLFxuICAgICAgICBlbmRZID0gKHkgLSBzcGFjZSk7XG4gICAgICByZXR1cm4gWydNJywgc3RhcnRYLCB5LCAnTCcsIGVuZFgsIHksICdNJywgc3RhcnRYLCBzdGFydFksICdMJywgZW5kWCwgc3RhcnRZLCAnTScsIHN0YXJ0WCwgZW5kWSwgJ0wnLCBlbmRYLCBlbmRZXTtcbiAgICB9KTtcblxuICAgIGdyb3VwLmFkZFN5bWJvbChjb250ZXh0TWVudSk7XG4gICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgIHJldHVybiB0b29sYmFyO1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5nZXRMb2dpY2FsU3BhY2UgPSBmdW5jdGlvbiAoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCkge1xuICAgIGF2YWlsYWJsZVdpZHRoIC89IDI7XG4gICAgdmFyIGxvZ2ljYWxTcGFjZSxcbiAgICAgIHdpZHRoID0gMCxcbiAgICAgIGhlaWdodCA9IDAsXG4gICAgICBpLFxuICAgICAgbG47XG5cbiAgICBmb3IgKGkgPSAwLCBsbiA9IHRoaXMudG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgbG9naWNhbFNwYWNlID0gdGhpcy50b29sYmFyc1tpXS5nZXRMb2dpY2FsU3BhY2UoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCk7XG4gICAgICB3aWR0aCA9IE1hdGgubWF4KGxvZ2ljYWxTcGFjZS53aWR0aCwgd2lkdGgpO1xuICAgICAgaGVpZ2h0ICs9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgICB0aGlzLnRvb2xiYXJzW2ldLndpZHRoID0gbG9naWNhbFNwYWNlLndpZHRoO1xuICAgICAgdGhpcy50b29sYmFyc1tpXS5oZWlnaHQgPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgIH1cbiAgICBoZWlnaHQgKz0gdGhpcy5wYWRkaW5nO1xuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogd2lkdGggPiBhdmFpbGFibGVXaWR0aCA/IDAgOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0ID4gYXZhaWxhYmxlSGVpZ2h0ID8gMCA6IGhlaWdodFxuICAgIH07XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnBsYWNlSW5DYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFkZGluZyA9IDU7XG4gICAgc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcbiAgICAgIG5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdUb29sQm94RXh0JztcbiAgICAgIH0sXG4gICAgICByZWY6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuICAgICAgfSxcbiAgICAgIHNlbGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9LFxuICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgICB9LFxuICAgICAgbGF5b3V0OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmouaW5saW5lO1xuICAgICAgfSxcbiAgICAgIG9yaWVudGF0aW9uOiBbe1xuICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICB9LFxuICAgICAgICBwb3NpdGlvbjogW3tcbiAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLnRvcDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9iai5yaWdodDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XVxuICAgIH1dKTtcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICB2YXIgbWVzID0gdGhpcy5tZWFzdXJlbWVudDtcbiAgICBtZXMueCA9IHg7XG4gICAgbWVzLnkgPSB5O1xuICAgIG1lcy53aWR0aCA9IHdpZHRoO1xuICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG4gICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICBsbixcbiAgICAgIGksXG4gICAgICB0b29sYmFyO1xuICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcbiAgICB5ID0geSA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueSA6IHk7XG4gICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcbiAgICBncm91cCA9IGdyb3VwID09PSB1bmRlZmluZWQgPyB0aGlzLnBhcmVudEdyb3VwIDogZ3JvdXA7XG4gICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICAgIHRvb2xiYXIgPSB0b29sYmFyc1tpXTtcbiAgICAgICAgdG9vbGJhci5kcmF3KHgsIHkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBGdXNpb25DaGFydHMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnR3Jvd3RoQW5hbHlzZXJFeHQnLCBHcm93dGhBbmFseXNlckV4dCk7XG59XSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9leHRlbnNpb24uanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuY2xhc3MgR3Jvd3RoQW5hbHlzZXIge1xuICBjb25zdHJ1Y3RvciAoZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGEubWFwKChhKSA9PiB7XG4gICAgICByZXR1cm4gYS5tYXAoKGIpID0+IHsgcmV0dXJuIGI7IH0pO1xuICAgIH0pO1xuICAgIHRoaXMuRm9ybXVsYWUgPSBGb3JtdWxhZTtcbiAgfVxuICBhbmFseXNlIChtb2RlKSB7XG4gICAgbGV0IGkgPSAwLFxuICAgICAgaWkgPSAwLFxuICAgICAgaiA9IDAsXG4gICAgICBqaiA9IDAsXG4gICAgICBudW0gPSAwLFxuICAgICAgY2hlY2tBcnIgPSBbXSxcbiAgICAgIGNoZWNrTnVtID0gMCxcbiAgICAgIGRhdGFBciA9IHRoaXMuZGF0YSxcbiAgICAgIG5EYXRhQXIgPSBbXSxcbiAgICAgIHRlbXBBciA9IFtdLFxuICAgICAgdGVtcCA9IDA7XG4gICAgaWYgKHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJyAmJiBtb2RlLnRvTG93ZXJDYXNlKCkgPT09ICdyZXNldCcpIHtcbiAgICAgIHJldHVybiBkYXRhQXIubWFwKChhKSA9PiB7XG4gICAgICAgIHJldHVybiBhLm1hcCgoYikgPT4geyByZXR1cm4gYjsgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlKSkgeyAvLyBIYW5kbGluZyBhIG51bWJlclxuICAgICAgY2hlY2tOdW0gPSArbW9kZTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgbW9kZSA9IHRoaXMuRm9ybXVsYWVbbW9kZV07XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBjaGVja051bSA9IG1vZGUoZGF0YUFyW2ldKTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcbiAgICAgICAgICBpZiAoY2hlY2tOdW0gPT09IDApIHtcbiAgICAgICAgICAgIHRlbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXAgPSAxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRlbXBBci5wdXNoKHRlbXApO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucmVscG9zaXRpb24pKSB7XG4gICAgICBtb2RlID0gbW9kZS5yZWxwb3NpdGlvbjtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgaWYgKGogKyBtb2RlID49IDAgJiYgaiArIG1vZGUgPCBqaikge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1baiArIG1vZGVdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja051bSA9IG51bTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIGlmIChtb2RlID49IDAgJiYgbW9kZSA8IGpqKSB7XG4gICAgICAgICAgICBjaGVja051bSA9IGRhdGFBcltpXVttb2RlXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBudW07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5yZWxkYXRhc2V0cG9zaXRpb24pKSB7XG4gICAgICBtb2RlID0gbW9kZS5yZWxkYXRhc2V0cG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBpZiAoaSArIG1vZGUgPj0gMCAmJiBpICsgbW9kZSA8IGlpKSB7XG4gICAgICAgICAgY2hlY2tBcnIgPSBkYXRhQXJbaSArIG1vZGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrQXJyID0gZGF0YUFyW2ldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBjaGVja051bSA9IGNoZWNrQXJyW2pdO1xuICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcbiAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gbnVtKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChpID0gMCwgaWkgPSBuRGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGZvciAoaiA9IDAsIGpqID0gbkRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG5EYXRhQXJbaV1bal0pKSB7XG4gICAgICAgICAgbkRhdGFBcltpXVtqXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5EYXRhQXI7XG4gIH1cbn1cblxudmFyIEZvcm11bGFlID0ge1xuICBNaW5pbXVtOiAoYXJyKSA9PiB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhID4gYiA/IGIgOiBhO1xuICAgIH0pO1xuICB9LFxuICBNYXhpbXVtOiAoYXJyKSA9PiB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhIDwgYiA/IGIgOiBhO1xuICAgIH0pO1xuICB9LFxuICBNZWFuOiAoYXJyKSA9PiB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhICsgYjtcbiAgICB9KSAvIGFyci5sZW5ndGg7XG4gIH0sXG4gIE1lZGlhbjogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIubWFwKChhKSA9PiBhKS5zb3J0KChhLCBiKSA9PiB7IHJldHVybiBhIC0gYjsgfSlbYXJyLmxlbmd0aCAvIDJdO1xuICB9LFxuICAnU3RhbmRhcmQgRGV2aWF0aW9uJzogKHZhbHVlcykgPT4ge1xuICAgIGZ1bmN0aW9uIGF2ZXJhZ2UgKGRhdGEpIHtcbiAgICAgIHZhciBzdW0sIGF2ZztcbiAgICAgIHN1bSA9IGRhdGEucmVkdWNlKGZ1bmN0aW9uIChzdW0sIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBzdW0gKyB2YWx1ZTtcbiAgICAgIH0sIDApO1xuXG4gICAgICBhdmcgPSBzdW0gLyBkYXRhLmxlbmd0aDtcbiAgICAgIHJldHVybiBhdmc7XG4gICAgfVxuICAgIHZhciBhdmcgPSAwLFxuICAgICAgc3F1YXJlRGlmZnMgPSAwLFxuICAgICAgc3FyRGlmZiA9IDAsXG4gICAgICBhdmdTcXVhcmVEaWZmID0gMCxcbiAgICAgIHN0ZERldiA9IDAsXG4gICAgICBkaWZmID0gMDtcbiAgICBhdmcgPSBhdmVyYWdlKHZhbHVlcyk7XG4gICAgc3F1YXJlRGlmZnMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgZGlmZiA9IHZhbHVlIC0gYXZnO1xuICAgICAgc3FyRGlmZiA9IGRpZmYgKiBkaWZmO1xuICAgICAgcmV0dXJuIHNxckRpZmY7XG4gICAgfSk7XG4gICAgYXZnU3F1YXJlRGlmZiA9IGF2ZXJhZ2Uoc3F1YXJlRGlmZnMpO1xuICAgIHN0ZERldiA9IE1hdGguc3FydChhdmdTcXVhcmVEaWZmKTtcbiAgICByZXR1cm4gc3RkRGV2O1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3d0aEFuYWx5c2VyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ3Jvd3RoYW5hbHlzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl19