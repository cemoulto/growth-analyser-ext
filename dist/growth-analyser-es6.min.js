(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false };modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1);},function(module,exports,__webpack_require__){const GrowthAnalyser=__webpack_require__(2);FusionCharts.register('extension',['private','growth-analyser-ext',function(){function GrowthAnalyserExt(){this.toolbox=FusionCharts.getComponent('api','toolbox');this.HorizontalToolbar=this.toolbox.HorizontalToolbar;this.ComponentGroup=this.toolbox.ComponentGroup;this.SymbolStore=this.toolbox.SymbolStore;window.a=this}GrowthAnalyserExt.prototype.constructor=GrowthAnalyserExt;GrowthAnalyserExt.prototype.renderChange=function(){var chartInstance=this.tsObject.chartInstance,componentStore=chartInstance.apiInstance.getComponentStore(),i=0;for(i=0;componentStore.getCanvasByIndex(i);i+=1){componentStore.getCanvasByIndex(i).getComposition().PlotManager.plot()}};GrowthAnalyserExt.prototype.analyser=function(mode){var ga=this.ga||{},store=this.tsObject.apiInstance.getComponentStore(),canvas=store.getCanvasByIndex(0),nav=store.getNavigatorByIndex(0),comp=canvas.getComposition(),ds=ga.ds||comp.dataset,i,idMap=ga.idMap||{},storeAr=ga.storeAr||[],nStoreArr=[],yAxis=canvas.composition.yAxis;if(mode==='reset'){yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val}}else{yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val+'%'}}this.ga=ga;if(!ga.storeAr){store={};if(!ga.idMap){ds.forEachSeries(function(a,b,c,series){store[series.getId()]=series.getOriginalData()});for(i in store){storeAr.push(store[i]);idMap[i]=storeAr.length-1;}ga.idMap=idMap;ga.ds=ds;ga.storeAr=storeAr;ga.gAnalyser=new GrowthAnalyser(storeAr)}}nStoreArr=ga.gAnalyser.analyse(mode);ds.setDataBySeries(function(series){if(nStoreArr.length){series.setOriginalData(nStoreArr[idMap[series.getId()]])}});comp.impl.update()};GrowthAnalyserExt.prototype.init=function(require){var instance=this;require(['xAxis','yAxis','graphics','chart','dataset','PlotManager','canvasConfig','MarkerManager','reactiveModel','globalReactiveModel','spaceManagerInstance','smartLabel','chartInstance','canvasData',function(xAxis,yAxis,graphics,chart,dataset,plotManager,canvasConfig,markerManager,reactiveModel,globalReactiveModel,spaceManagerInstance,smartLabel,chartInstance,canvasData){instance.xAxis=xAxis;instance.yAxis=yAxis;instance.graphics=graphics;instance.chart=chart;instance.dataset=dataset;instance.plotManager=plotManager;instance.markerManager=markerManager;instance.canvasConfig=canvasConfig;instance.reactiveModel=reactiveModel;instance.globalReactiveModel=globalReactiveModel;instance.spaceManagerInstance=spaceManagerInstance;instance.smartLabel=smartLabel;instance.chartInstance=chartInstance;instance.canvasData=canvasData}]);this.spaceManagerInstance=instance.spaceManagerInstance;this.globalReactiveModel=instance.globalReactiveModel;this.tsObject=instance.chartInstance;this.startDt=instance.globalReactiveModel.model['x-axis-visible-range-start'];this.endDt=instance.globalReactiveModel.model['x-axis-visible-range-end'];this.startDataset=instance.globalReactiveModel.model['x-axis-absolute-range-start'];this.endDataset=instance.globalReactiveModel.model['x-axis-absolute-range-end'];this.toolbars=[];this.measurement={};this.toolbars.push(this.createToolbar());return this};GrowthAnalyserExt.prototype.createToolbar=function(){var toolbar,group,self=this,contextMenu,contextArray=[],gaOptionsObj={},popup,paper=this.graphics.paper,chartContainer=this.graphics.container,subCatStyle={'font-size':'12px','color':'#696969','font-family':'"Lucida Grande", Sans-serif'},catStyle={'font-size':'13px','color':'#696969','font-family':'"Lucida Grande", Sans-serif','fontWeight':'bold'};toolbar=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});toolbar.setConfig({fill:'#fff',borderThickness:0});group=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});group.setConfig({fill:'#fff',borderThickness:0});gaOptionsObj={'First Index':{position:0},'Previous Index':{relposition:-1},'Specific Value':{'submenu':true,'Minimum':'Minimum','Maximum':'Maximum','Mean':'Mean','Median':'Median','Standard Deviation':'Standard Deviation','Custom Value...':function(){popup((val)=>self.analyser(val))}}};contextMenu=new this.toolbox.SymbolWithContext('ContextIcon',{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{width:24,height:24,position:'right',stroke:'#f1f1f1',strokeWidth:'1',radius:'1',symbolStroke:'#bdbdbd',symbolStrokeWidth:'2'});contextArray.push({'Growth Analyser':{style:catStyle}});popup=function(callback){var box,header,style={fontSize:10+'px',lineHeight:15+'px','font-family':'"Lucida Grande", Sans-serif',stroke:'#676767','stroke-width':'2'},headerWidth=180,headerText,cross,inputField,applyButton,x=(self.chart.width*0.47)-90,y=self.chart.height/2-40;box=paper.html('div',{fill:'#f7f7f7',x:x,y:y,width:180,height:80},style,chartContainer);header=paper.html('div',{fill:'#e8e8e8',width:headerWidth,height:20},style,box);headerText=paper.html('div',{fill:'transparent',width:headerWidth*0.6,height:20,x:10,y:2},style,header);headerText.attr({text:'Provide value'});cross=paper.html('div',{fill:'transparent',width:10,height:10,position:'relative',float:'right',text:'X',cursor:'pointer'},style,header);cross.on('click',function(){box.hide()});inputField=paper.html('input',{width:100,height:20,x:10,y:30},style,box);applyButton=paper.html('div',{width:50,height:20,x:120,y:30,fill:'#555555'},{fontSize:10+'px',lineHeight:15+'px','font-family':'"Lucida Grande", Sans-serif',fill:'#eaeaea',color:'#eaeaea',stroke:'#eaeaea',cursor:'pointer'},box);applyButton.on('click',function(){box.hide();callback(inputField.val())});applyButton.attr({text:'Apply'});inputField.element.focus();function inputFieldNumberHandler(){inputField.element.value=inputField.element.value.replace(/[^\d.-]/g,'')}inputField.element.addEventListener('keyup',inputFieldNumberHandler);cross.element.style['position']='relative';cross.element.style['backgroundColor']='#d2d2d2';cross.element.style['border']='2px solid #cbcbcb';cross.element.style['padding']='0px 0px 3.5px 2px';cross.element.style['color']='#8c8c8c';cross.element.style['margin']='1px 2px';cross.element.style['float']='right';inputField.element.style['marginTop']='8px';inputField.element.style['border']='2px solid #dadbda';applyButton.element.style['marginTop']='8px';box.element.style['border']='1px solid #d4d2d3';header.element.style['border']='1px solid #d4d2d3';header.element.style['width']='179px';headerText.element.style['fontSize']='11.5px';headerText.element.style['marginTop']='0.5px';headerText.element.style['color']='#676767';header.element.style['font-family']='"Lucida Grande", Sans-serif';applyButton.element.style['textAlign']='center';applyButton.element.style['fontSize']='11px';applyButton.element.style['paddingTop']='3px';applyButton.element.style['borderRadius']='3px';applyButton.element.style['color']='#e4e4e4'};for(let i in gaOptionsObj){let key,obj={},subObj={};if(!gaOptionsObj[i].submenu){key='&nbsp; &nbsp; '+i;obj[key]={};obj[key]={style:subCatStyle,handler:function(){self.analyser(gaOptionsObj[i])},action:'click'}}else{key='&#9666&nbsp; '+i;obj[key]={};obj[key].action='click';obj[key].style=subCatStyle;obj[key].handler=[];for(let j in gaOptionsObj[i]){let subMenuName=j,subMenuValue=gaOptionsObj[i][j];if(j==='submenu'){continue}subObj={};subObj['&nbsp;'+subMenuName]={};subObj['&nbsp;'+subMenuName].handler=function(){if(typeof subMenuValue==='function'){subMenuValue()}else{self.analyser(subMenuValue)}};subObj['&nbsp;'+subMenuName].action='click';subObj['&nbsp;'+subMenuName].style=subCatStyle;obj[key].handler.push(subObj);if(j!==gaOptionsObj[i].length-1){obj[key].handler.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}}}contextArray.push(obj);contextArray.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}contextArray.push({'&nbsp; &nbsp; Reset View':{handler:function(){self.analyser('reset')},action:'click',style:subCatStyle}});contextMenu.appendAsList(contextArray);this.SymbolStore.register('ContextIcon',function(posx,posy,rad){var x=posx,y=posy,r=rad*2,space=Math.round(r/4),halfWidth=Math.round(r/2)*0.7,startX=(x-halfWidth),endX=(x+halfWidth),startY=(y+space),endY=(y-space);return['M',startX,y,'L',endX,y,'M',startX,startY,'L',endX,startY,'M',startX,endY,'L',endX,endY]});group.addSymbol(contextMenu);toolbar.addComponent(group);return toolbar};GrowthAnalyserExt.prototype.getLogicalSpace=function(availableWidth,availableHeight){availableWidth/=2;var logicalSpace,width=0,height=0,i,ln;for(i=0,ln=this.toolbars.length;i<ln;i+=1){logicalSpace=this.toolbars[i].getLogicalSpace(availableWidth,availableHeight);width=Math.max(logicalSpace.width,width);height+=logicalSpace.height;this.toolbars[i].width=logicalSpace.width;this.toolbars[i].height=logicalSpace.height}height+=this.padding;return{width:width>availableWidth?0:width,height:height>availableHeight?0:height}};GrowthAnalyserExt.prototype.placeInCanvas=function(){var self=this;self.padding=5;self.spaceManagerInstance.add([{name:function(){return 'ToolBoxExt'},ref:function(obj){return obj['0']},self:function(){return self},priority:function(){return 2},layout:function(obj){return obj.inline},orientation:[{type:function(obj){return obj.horizontal},position:[{type:function(obj){return obj.top},alignment:[{type:function(obj){return obj.right},dimensions:[function(){var parent=this.getParentComponentGroup();return self.getLogicalSpace(parent.getWidth(),parent.getHeight())}]}]}]}]}])};GrowthAnalyserExt.prototype.setDrawingConfiguration=function(x,y,width,height,group){var mes=this.measurement;mes.x=x;mes.y=y;mes.width=width;mes.height=height;this.parentGroup=group;return this};GrowthAnalyserExt.prototype.draw=function(x,y,width,height,group){var measurement=this.measurement,toolbars=this.toolbars,ln,i,toolbar;x=x===undefined?measurement.x:x;y=y===undefined?measurement.y:y;width=width===undefined?measurement.width:width;height=height===undefined?measurement.height:height;group=group===undefined?this.parentGroup:group;if(width&&height){for(i=0,ln=toolbars.length;i<ln;i+=1){toolbar=toolbars[i];toolbar.draw(x,y)}}};FusionCharts.registerComponent('extensions','GrowthAnalyserExt',GrowthAnalyserExt)}]);},function(module,exports){'use strict';class GrowthAnalyser{constructor(data){this.data=data.map((a)=>{return a.map((b)=>{return b})});this.Formulae=Formulae}analyse(mode){let i=0,ii=0,j=0,jj=0,num=0,checkArr=[],checkNum=0,dataAr=this.data,nDataAr=[],tempAr=[],temp=0;if(typeof mode==='string'&&mode.toLowerCase()==='reset'){return dataAr.map((a)=>{return a.map((b)=>{return b})})}else if(!isNaN(mode)){checkNum= +mode;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(typeof mode==='string'){mode=this.Formulae[mode];for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];checkNum=mode(dataAr[i]);for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(checkNum===0){temp=undefined}else{temp=100*(num-checkNum)/checkNum}tempAr.push(temp)}nDataAr.push(tempAr)}}else if(!isNaN(mode.relposition)){mode=mode.relposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(j+mode>=0&&j+mode<jj){checkNum=dataAr[i][j+mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.position)||typeof mode.position==='string'){mode=mode.position;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(mode==='last'){checkNum=dataAr[i][jj-1]}else if(mode==='mid'){checkNum=dataAr[i][jj/2]}else if(mode>=0&&mode<jj){checkNum=dataAr[i][mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.reldatasetposition)){mode=mode.reldatasetposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];if(i+mode>=0&&i+mode<ii){checkArr=dataAr[i+mode]}else{checkArr=dataAr[i]}for(j=0,jj=dataAr[i].length;j<jj;j+=1){checkNum=checkArr[j];num=dataAr[i][j];tempAr.push(100*(num-checkNum)/num)}nDataAr.push(tempAr)}}for(i=0,ii=nDataAr.length;i<ii;i+=1){for(j=0,jj=nDataAr[i].length;j<jj;j+=1){if(!Number.isFinite(nDataAr[i][j])){nDataAr[i][j]=null}}}return nDataAr}}var Formulae={Minimum:(arr)=>{return arr.reduce((a,b)=>{return a>b?b:a})},Maximum:(arr)=>{return arr.reduce((a,b)=>{return a<b?b:a})},Mean:(arr)=>{return arr.reduce((a,b)=>{return a+b})/arr.length},Median:(arr)=>{return arr.map((a)=>a).sort((a,b)=>{return a-b})[arr.length/2]},'Standard Deviation':(values)=>{function average(data){var sum,avg;sum=data.reduce(function(sum,value){return sum+value},0);avg=sum/data.length;return avg}var avg=0,squareDiffs=0,sqrDiff=0,avgSquareDiff=0,stdDev=0,diff=0;avg=average(values);squareDiffs=values.map(function(value){diff=value-avg;sqrDiff=diff*diff;return sqrDiff});avgSquareDiff=average(squareDiffs);stdDev=Math.sqrt(avgSquareDiff);return stdDev}};module.exports=GrowthAnalyser;}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNDllMGU1ZjRlN2QwYTc1NWJkMmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V4dGVuc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3Jvd3RoYW5hbHlzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDdENBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFlLG9DQUFvQztBQUNuRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMEMsd0NBQXdDLEVBQUU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0EsdUJBQXNCLFlBQVk7QUFDbEMsMEJBQXlCLGdCQUFnQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0Es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Q0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLHNDQUFxQyxRQUFRO0FBQzdDO0FBQ0EsMkNBQTBDLFFBQVE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsWUFBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLHNDQUFxQyxRQUFRO0FBQzdDO0FBQ0EsMkNBQTBDLFFBQVE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsWUFBVztBQUNYO0FBQ0EsWUFBVztBQUNYO0FBQ0EsWUFBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLHNDQUFxQyxRQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsMkNBQTBDLFFBQVE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsUUFBUTtBQUM1QywwQ0FBeUMsUUFBUTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMLElBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0wsSUFBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTCxJQUFHO0FBQ0g7QUFDQSw4Q0FBNkMsY0FBYyxFQUFFO0FBQzdELElBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiZ3Jvd3RoLWFuYWx5c2VyLWVzNi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA0OWUwZTVmNGU3ZDBhNzU1YmQyZCIsImNvbnN0IEdyb3d0aEFuYWx5c2VyID0gcmVxdWlyZSgnLi9ncm93dGhhbmFseXNlcicpO1xuXG5GdXNpb25DaGFydHMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsncHJpdmF0ZScsICdncm93dGgtYW5hbHlzZXItZXh0JywgZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBHcm93dGhBbmFseXNlckV4dCAoKSB7XG4gICAgdGhpcy50b29sYm94ID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcbiAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG4gICAgdGhpcy5TeW1ib2xTdG9yZSA9IHRoaXMudG9vbGJveC5TeW1ib2xTdG9yZTtcbiAgICB3aW5kb3cuYSA9IHRoaXM7XG4gIH1cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3Jvd3RoQW5hbHlzZXJFeHQ7XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnJlbmRlckNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hhcnRJbnN0YW5jZSA9IHRoaXMudHNPYmplY3QuY2hhcnRJbnN0YW5jZSxcbiAgICAgIGNvbXBvbmVudFN0b3JlID0gY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZS5nZXRDb21wb25lbnRTdG9yZSgpLFxuICAgICAgaSA9IDA7XG4gICAgZm9yIChpID0gMDsgY29tcG9uZW50U3RvcmUuZ2V0Q2FudmFzQnlJbmRleChpKTsgKytpKSB7XG4gICAgICBjb21wb25lbnRTdG9yZS5nZXRDYW52YXNCeUluZGV4KGkpLmdldENvbXBvc2l0aW9uKCkuUGxvdE1hbmFnZXIucGxvdCgpO1xuICAgIH1cbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuYW5hbHlzZXIgPSBmdW5jdGlvbiAobW9kZSkge1xuICAgIHZhciBnYSA9IHRoaXMuZ2EgfHwge30sXG4gICAgICBzdG9yZSA9IHRoaXMudHNPYmplY3QuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcbiAgICAgIGNhbnZhcyA9IHN0b3JlLmdldENhbnZhc0J5SW5kZXgoMCksXG4gICAgICBuYXYgPSBzdG9yZS5nZXROYXZpZ2F0b3JCeUluZGV4KDApLFxuICAgICAgY29tcCA9IGNhbnZhcy5nZXRDb21wb3NpdGlvbigpLFxuICAgICAgZHMgPSBnYS5kcyB8fCBjb21wLmRhdGFzZXQsXG4gICAgICBpLFxuICAgICAgaWRNYXAgPSBnYS5pZE1hcCB8fCB7fSxcbiAgICAgIHN0b3JlQXIgPSBnYS5zdG9yZUFyIHx8IFtdLFxuICAgICAgblN0b3JlQXJyID0gW10sXG4gICAgICB5QXhpcyA9IGNhbnZhcy5jb21wb3NpdGlvbi55QXhpcztcbiAgICAvLyBDaGFuZ2luZyB5IEF4aXMgZm9ybWF0dG9yXG4gICAgaWYgKG1vZGUgPT09ICdyZXNldCcpIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCArICclJztcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIERlY2xhcmF0aW9uIGVuZHNcbiAgICB0aGlzLmdhID0gZ2E7XG4gICAgaWYgKCFnYS5zdG9yZUFyKSB7XG4gICAgICBzdG9yZSA9IHt9O1xuICAgICAgaWYgKCFnYS5pZE1hcCkge1xuICAgICAgICBkcy5mb3JFYWNoU2VyaWVzKGZ1bmN0aW9uIChhLCBiLCBjLCBzZXJpZXMpIHtcbiAgICAgICAgICBzdG9yZVtzZXJpZXMuZ2V0SWQoKV0gPSBzZXJpZXMuZ2V0T3JpZ2luYWxEYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGkgaW4gc3RvcmUpIHtcbiAgICAgICAgICBzdG9yZUFyLnB1c2goc3RvcmVbaV0pO1xuICAgICAgICAgIGlkTWFwW2ldID0gc3RvcmVBci5sZW5ndGggLSAxO1xuICAgICAgICAgIC8vID0gc3RvcmVbaV0ubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiAyMCAqIGUgKyAoTWF0aC5yYW5kb20oKSAqIDEwMDApOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBnYS5pZE1hcCA9IGlkTWFwO1xuICAgICAgICBnYS5kcyA9IGRzO1xuICAgICAgICBnYS5zdG9yZUFyID0gc3RvcmVBcjtcbiAgICAgICAgZ2EuZ0FuYWx5c2VyID0gbmV3IEdyb3d0aEFuYWx5c2VyKHN0b3JlQXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBuU3RvcmVBcnIgPSBnYS5nQW5hbHlzZXIuYW5hbHlzZShtb2RlKTtcbiAgICBkcy5zZXREYXRhQnlTZXJpZXMoZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgaWYgKG5TdG9yZUFyci5sZW5ndGgpIHtcbiAgICAgICAgc2VyaWVzLnNldE9yaWdpbmFsRGF0YShuU3RvcmVBcnJbaWRNYXBbc2VyaWVzLmdldElkKCldXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29tcC5pbXBsLnVwZGF0ZSgpO1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHJlcXVpcmUpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgIHJlcXVpcmUoW1xuICAgICAgJ3hBeGlzJyxcbiAgICAgICd5QXhpcycsXG4gICAgICAnZ3JhcGhpY3MnLFxuICAgICAgJ2NoYXJ0JyxcbiAgICAgICdkYXRhc2V0JyxcbiAgICAgICdQbG90TWFuYWdlcicsXG4gICAgICAnY2FudmFzQ29uZmlnJyxcbiAgICAgICdNYXJrZXJNYW5hZ2VyJyxcbiAgICAgICdyZWFjdGl2ZU1vZGVsJyxcbiAgICAgICdnbG9iYWxSZWFjdGl2ZU1vZGVsJyxcbiAgICAgICdzcGFjZU1hbmFnZXJJbnN0YW5jZScsXG4gICAgICAnc21hcnRMYWJlbCcsXG4gICAgICAnY2hhcnRJbnN0YW5jZScsXG4gICAgICAnY2FudmFzRGF0YScsXG4gICAgICBmdW5jdGlvbiAoXG4gICAgICAgICAgICB4QXhpcyxcbiAgICAgICAgICAgIHlBeGlzLFxuICAgICAgICAgICAgZ3JhcGhpY3MsXG4gICAgICAgICAgICBjaGFydCxcbiAgICAgICAgICAgIGRhdGFzZXQsXG4gICAgICAgICAgICBwbG90TWFuYWdlcixcbiAgICAgICAgICAgIGNhbnZhc0NvbmZpZyxcbiAgICAgICAgICAgIG1hcmtlck1hbmFnZXIsXG4gICAgICAgICAgICByZWFjdGl2ZU1vZGVsLFxuICAgICAgICAgICAgZ2xvYmFsUmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgIHNwYWNlTWFuYWdlckluc3RhbmNlLFxuICAgICAgICAgICAgc21hcnRMYWJlbCxcbiAgICAgICAgICAgIGNoYXJ0SW5zdGFuY2UsXG4gICAgICAgICAgICBjYW52YXNEYXRhKSB7XG4gICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG4gICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcbiAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuICAgICAgICBpbnN0YW5jZS5jaGFydEluc3RhbmNlID0gY2hhcnRJbnN0YW5jZTtcbiAgICAgICAgaW5zdGFuY2UuY2FudmFzRGF0YSA9IGNhbnZhc0RhdGE7XG4gICAgICB9XG4gICAgXSk7XG4gICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgdGhpcy50c09iamVjdCA9IGluc3RhbmNlLmNoYXJ0SW5zdGFuY2U7XG4gICAgdGhpcy5zdGFydER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcbiAgICB0aGlzLmVuZER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcbiAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy50b29sYmFycyA9IFtdO1xuICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcbiAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5jcmVhdGVUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0b29sYmFyLFxuICAgICAgZ3JvdXAsXG4gICAgICBzZWxmID0gdGhpcyxcbiAgICAgIGNvbnRleHRNZW51LFxuICAgICAgY29udGV4dEFycmF5ID0gW10sXG4gICAgICBnYU9wdGlvbnNPYmogPSB7fSxcbiAgICAgIHBvcHVwLFxuICAgICAgcGFwZXIgPSB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnRDb250YWluZXIgPSB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lcixcbiAgICAgIHN1YkNhdFN0eWxlID0ge1xuICAgICAgICAnZm9udC1zaXplJzogJzEycHgnLFxuICAgICAgICAnY29sb3InOiAnIzY5Njk2OScsXG4gICAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgU2Fucy1zZXJpZidcbiAgICAgIH0sXG4gICAgICBjYXRTdHlsZSA9IHtcbiAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxM3B4JyxcbiAgICAgICAgJ2NvbG9yJzogJyM2OTY5NjknLFxuICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIFNhbnMtc2VyaWYnLFxuICAgICAgICAnZm9udFdlaWdodCc6ICdib2xkJ1xuICAgICAgfTtcblxuICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSk7XG5cbiAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICB9KTtcblxuICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSk7XG5cbiAgICBncm91cC5zZXRDb25maWcoe1xuICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgfSk7XG5cbiAgICBnYU9wdGlvbnNPYmogPSB7XG4gICAgICAnRmlyc3QgSW5kZXgnOiB7cG9zaXRpb246IDB9LFxuICAgICAgJ1ByZXZpb3VzIEluZGV4Jzoge3JlbHBvc2l0aW9uOiAtMX0sXG4gICAgICAnU3BlY2lmaWMgVmFsdWUnOiB7XG4gICAgICAgICdzdWJtZW51JzogdHJ1ZSxcbiAgICAgICAgJ01pbmltdW0nOiAnTWluaW11bScsXG4gICAgICAgICdNYXhpbXVtJzogJ01heGltdW0nLFxuICAgICAgICAnTWVhbic6ICdNZWFuJyxcbiAgICAgICAgJ01lZGlhbic6ICdNZWRpYW4nLFxuICAgICAgICAnU3RhbmRhcmQgRGV2aWF0aW9uJzogJ1N0YW5kYXJkIERldmlhdGlvbicsXG4gICAgICAgICdDdXN0b20gVmFsdWUuLi4nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcG9wdXAoKHZhbCkgPT4gc2VsZi5hbmFseXNlcih2YWwpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBjb250ZXh0TWVudSA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sV2l0aENvbnRleHQoJ0NvbnRleHRJY29uJywge1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0sIHtcbiAgICAgIHdpZHRoOiAyNCxcbiAgICAgIGhlaWdodDogMjQsXG4gICAgICBwb3NpdGlvbjogJ3JpZ2h0JyxcbiAgICAgIHN0cm9rZTogJyNmMWYxZjEnLFxuICAgICAgc3Ryb2tlV2lkdGg6ICcxJyxcbiAgICAgIHJhZGl1czogJzEnLFxuICAgICAgc3ltYm9sU3Ryb2tlOiAnI2JkYmRiZCcsXG4gICAgICBzeW1ib2xTdHJva2VXaWR0aDogJzInXG4gICAgfSk7XG5cbiAgICBjb250ZXh0QXJyYXkucHVzaCh7XG4gICAgICAnR3Jvd3RoIEFuYWx5c2VyJzoge1xuICAgICAgICBzdHlsZTogY2F0U3R5bGVcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwb3B1cCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdmFyIGJveCxcbiAgICAgICAgaGVhZGVyLFxuICAgICAgICBzdHlsZSA9IHtcbiAgICAgICAgICBmb250U2l6ZTogMTAgKyAncHgnLFxuICAgICAgICAgIGxpbmVIZWlnaHQ6IDE1ICsgJ3B4JyxcbiAgICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIFNhbnMtc2VyaWYnLFxuICAgICAgICAgIHN0cm9rZTogJyM2NzY3NjcnLFxuICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAnMidcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGVyV2lkdGggPSAxODAsXG4gICAgICAgIGhlYWRlclRleHQsXG4gICAgICAgIGNyb3NzLFxuICAgICAgICBpbnB1dEZpZWxkLFxuICAgICAgICBhcHBseUJ1dHRvbixcbiAgICAgICAgeCA9IChzZWxmLmNoYXJ0LndpZHRoICogMC40NykgLSA5MCxcbiAgICAgICAgeSA9IHNlbGYuY2hhcnQuaGVpZ2h0IC8gMiAtIDQwO1xuXG4gICAgICBib3ggPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICcjZjdmN2Y3JyxcbiAgICAgICAgeDogeCxcbiAgICAgICAgeTogeSxcbiAgICAgICAgd2lkdGg6IDE4MCxcbiAgICAgICAgaGVpZ2h0OiA4MFxuICAgICAgfSwgc3R5bGUsIGNoYXJ0Q29udGFpbmVyKTtcblxuICAgICAgaGVhZGVyID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAnI2U4ZThlOCcsXG4gICAgICAgIHdpZHRoOiBoZWFkZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiAyMFxuICAgICAgfSwgc3R5bGUsIGJveCk7XG5cbiAgICAgIGhlYWRlclRleHQgPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgIHdpZHRoOiBoZWFkZXJXaWR0aCAqIDAuNixcbiAgICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgICAgeDogMTAsXG4gICAgICAgIHk6IDJcbiAgICAgIH0sIHN0eWxlLCBoZWFkZXIpO1xuXG4gICAgICBoZWFkZXJUZXh0LmF0dHIoe1xuICAgICAgICB0ZXh0OiAnUHJvdmlkZSB2YWx1ZSdcbiAgICAgIH0pO1xuXG4gICAgICBjcm9zcyA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgd2lkdGg6IDEwLFxuICAgICAgICBoZWlnaHQ6IDEwLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgZmxvYXQ6ICdyaWdodCcsXG4gICAgICAgIHRleHQ6ICdYJyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgIH0sIHN0eWxlLCBoZWFkZXIpO1xuXG4gICAgICBjcm9zcy5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJveC5oaWRlKCk7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXRGaWVsZCA9IHBhcGVyLmh0bWwoJ2lucHV0Jywge1xuICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICB4OiAxMCxcbiAgICAgICAgeTogMzBcbiAgICAgIH0sIHN0eWxlLCBib3gpO1xuXG4gICAgICBhcHBseUJ1dHRvbiA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgd2lkdGg6IDUwLFxuICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICB4OiAxMjAsXG4gICAgICAgIHk6IDMwLFxuICAgICAgICBmaWxsOiAnIzU1NTU1NSdcbiAgICAgIH0sIHtcbiAgICAgICAgZm9udFNpemU6IDEwICsgJ3B4JyxcbiAgICAgICAgbGluZUhlaWdodDogMTUgKyAncHgnLFxuICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIFNhbnMtc2VyaWYnLFxuICAgICAgICBmaWxsOiAnI2VhZWFlYScsXG4gICAgICAgIGNvbG9yOiAnI2VhZWFlYScsXG4gICAgICAgIHN0cm9rZTogJyNlYWVhZWEnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuICAgICAgfSwgYm94KTtcblxuICAgICAgYXBwbHlCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBib3guaGlkZSgpO1xuICAgICAgICBjYWxsYmFjayhpbnB1dEZpZWxkLnZhbCgpKTtcbiAgICAgIH0pO1xuICAgICAgYXBwbHlCdXR0b24uYXR0cih7XG4gICAgICAgIHRleHQ6ICdBcHBseSdcbiAgICAgIH0pO1xuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LmZvY3VzKCk7XG4gICAgICBmdW5jdGlvbiBpbnB1dEZpZWxkTnVtYmVySGFuZGxlciAoKSB7XG4gICAgICAgIGlucHV0RmllbGQuZWxlbWVudC52YWx1ZSA9IGlucHV0RmllbGQuZWxlbWVudC52YWx1ZS5yZXBsYWNlKC9bXlxcZC4tXS9nLCAnJyk7XG4gICAgICB9XG4gICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBpbnB1dEZpZWxkTnVtYmVySGFuZGxlcik7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydwb3NpdGlvbiddID0gJ3JlbGF0aXZlJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2JhY2tncm91bmRDb2xvciddID0gJyNkMmQyZDInO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMnB4IHNvbGlkICNjYmNiY2InO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsncGFkZGluZyddID0gJzBweCAwcHggMy41cHggMnB4JztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2NvbG9yJ10gPSAnIzhjOGM4Yyc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydtYXJnaW4nXSA9ICcxcHggMnB4JztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2Zsb2F0J10gPSAncmlnaHQnO1xuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICc4cHgnO1xuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcycHggc29saWQgI2RhZGJkYSc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICc4cHgnO1xuICAgICAgYm94LmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzFweCBzb2xpZCAjZDRkMmQzJztcbiAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcxcHggc29saWQgI2Q0ZDJkMyc7XG4gICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnd2lkdGgnXSA9ICcxNzlweCc7XG4gICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ2ZvbnRTaXplJ10gPSAnMTEuNXB4JztcbiAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnMC41cHgnO1xuICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyM2NzY3NjcnO1xuICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ2ZvbnQtZmFtaWx5J10gPSAnXCJMdWNpZGEgR3JhbmRlXCIsIFNhbnMtc2VyaWYnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsndGV4dEFsaWduJ10gPSAnY2VudGVyJztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ2ZvbnRTaXplJ10gPSAnMTFweCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydwYWRkaW5nVG9wJ10gPSAnM3B4JztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ2JvcmRlclJhZGl1cyddID0gJzNweCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyNlNGU0ZTQnO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpIGluIGdhT3B0aW9uc09iaikge1xuICAgICAgbGV0IGtleSxcbiAgICAgICAgb2JqID0ge30sXG4gICAgICAgIHN1Yk9iaiA9IHt9O1xuICAgICAgaWYgKCFnYU9wdGlvbnNPYmpbaV0uc3VibWVudSkge1xuICAgICAgICBrZXkgPSAnJm5ic3A7ICZuYnNwOyAnICsgaTtcbiAgICAgICAgb2JqW2tleV0gPSB7fTtcbiAgICAgICAgb2JqW2tleV0gPSB7XG4gICAgICAgICAgc3R5bGU6IHN1YkNhdFN0eWxlLFxuICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoZ2FPcHRpb25zT2JqW2ldKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAga2V5ID0gJyYjOTY2NiZuYnNwOyAnICsgaTtcbiAgICAgICAgb2JqW2tleV0gPSB7fTtcbiAgICAgICAgb2JqW2tleV0uYWN0aW9uID0gJ2NsaWNrJztcbiAgICAgICAgb2JqW2tleV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcbiAgICAgICAgb2JqW2tleV0uaGFuZGxlciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqIGluIGdhT3B0aW9uc09ialtpXSkge1xuICAgICAgICAgIGxldCBzdWJNZW51TmFtZSA9IGosXG4gICAgICAgICAgICBzdWJNZW51VmFsdWUgPSBnYU9wdGlvbnNPYmpbaV1bal07XG4gICAgICAgICAgaWYgKGogPT09ICdzdWJtZW51Jykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1Yk9iaiA9IHt9O1xuICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXSA9IHt9O1xuICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXS5oYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJNZW51VmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgc3ViTWVudVZhbHVlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHN1Yk1lbnVWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uYWN0aW9uID0gJ2NsaWNrJztcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcbiAgICAgICAgICBvYmpba2V5XS5oYW5kbGVyLnB1c2goc3ViT2JqKTtcbiAgICAgICAgICBpZiAoaiAhPT0gZ2FPcHRpb25zT2JqW2ldLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaCh7XG4gICAgICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkNWQyZDInLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMXB4JyxcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogJzFweCcsXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMHB4J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250ZXh0QXJyYXkucHVzaChvYmopO1xuICAgICAgY29udGV4dEFycmF5LnB1c2goe1xuICAgICAgICAnJzoge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZDVkMmQyJyxcbiAgICAgICAgICAgIGhlaWdodDogJzFweCcsXG4gICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuICAgICAgICAgICAgcGFkZGluZzogJzBweCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnRleHRBcnJheS5wdXNoKHtcbiAgICAgICcmbmJzcDsgJm5ic3A7IFJlc2V0IFZpZXcnOiB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLmFuYWx5c2VyKCdyZXNldCcpO1xuICAgICAgICB9LFxuICAgICAgICBhY3Rpb246ICdjbGljaycsXG4gICAgICAgIHN0eWxlOiBzdWJDYXRTdHlsZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29udGV4dE1lbnUuYXBwZW5kQXNMaXN0KGNvbnRleHRBcnJheSk7XG5cbiAgICB0aGlzLlN5bWJvbFN0b3JlLnJlZ2lzdGVyKCdDb250ZXh0SWNvbicsIGZ1bmN0aW9uIChwb3N4LCBwb3N5LCByYWQpIHtcbiAgICAgIHZhciB4ID0gcG9zeCxcbiAgICAgICAgeSA9IHBvc3ksXG4gICAgICAgIHIgPSByYWQgKiAyLFxuICAgICAgICBzcGFjZSA9IE1hdGgucm91bmQociAvIDQpLFxuICAgICAgICBoYWxmV2lkdGggPSBNYXRoLnJvdW5kKHIgLyAyKSAqIDAuNyxcbiAgICAgICAgc3RhcnRYID0gKHggLSBoYWxmV2lkdGgpLFxuICAgICAgICBlbmRYID0gKHggKyBoYWxmV2lkdGgpLFxuICAgICAgICBzdGFydFkgPSAoeSArIHNwYWNlKSxcbiAgICAgICAgZW5kWSA9ICh5IC0gc3BhY2UpO1xuICAgICAgcmV0dXJuIFsnTScsIHN0YXJ0WCwgeSwgJ0wnLCBlbmRYLCB5LCAnTScsIHN0YXJ0WCwgc3RhcnRZLCAnTCcsIGVuZFgsIHN0YXJ0WSwgJ00nLCBzdGFydFgsIGVuZFksICdMJywgZW5kWCwgZW5kWV07XG4gICAgfSk7XG5cbiAgICBncm91cC5hZGRTeW1ib2woY29udGV4dE1lbnUpO1xuICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcbiAgICByZXR1cm4gdG9vbGJhcjtcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuZ2V0TG9naWNhbFNwYWNlID0gZnVuY3Rpb24gKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcbiAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgIHZhciBsb2dpY2FsU3BhY2UsXG4gICAgICB3aWR0aCA9IDAsXG4gICAgICBoZWlnaHQgPSAwLFxuICAgICAgaSxcbiAgICAgIGxuO1xuXG4gICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcbiAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICB9XG4gICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHdpZHRoID4gYXZhaWxhYmxlV2lkdGggPyAwIDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodCA+IGF2YWlsYWJsZUhlaWdodCA/IDAgOiBoZWlnaHRcbiAgICB9O1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5wbGFjZUluQ2FudmFzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgIHNlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG4gICAgICBuYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnVG9vbEJveEV4dCc7XG4gICAgICB9LFxuICAgICAgcmVmOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgIH0sXG4gICAgICBzZWxmOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfSxcbiAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgICAgfSxcbiAgICAgIGxheW91dDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgIH0sXG4gICAgICBvcmllbnRhdGlvbjogW3tcbiAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoucmlnaHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKHBhcmVudC5nZXRXaWR0aCgpLCBwYXJlbnQuZ2V0SGVpZ2h0KCkpO1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XVxuICAgICAgICB9XVxuICAgICAgfV1cbiAgICB9XSk7XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnNldERyYXdpbmdDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgbWVzLnggPSB4O1xuICAgIG1lcy55ID0geTtcbiAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuICAgICAgbG4sXG4gICAgICBpLFxuICAgICAgdG9vbGJhcjtcbiAgICB4ID0geCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueCA6IHg7XG4gICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG4gICAgaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC5oZWlnaHQgOiBoZWlnaHQ7XG4gICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxuID0gdG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ0dyb3d0aEFuYWx5c2VyRXh0JywgR3Jvd3RoQW5hbHlzZXJFeHQpO1xufV0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZXh0ZW5zaW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcbmNsYXNzIEdyb3d0aEFuYWx5c2VyIHtcbiAgY29uc3RydWN0b3IgKGRhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhLm1hcCgoYSkgPT4ge1xuICAgICAgcmV0dXJuIGEubWFwKChiKSA9PiB7IHJldHVybiBiOyB9KTtcbiAgICB9KTtcbiAgICB0aGlzLkZvcm11bGFlID0gRm9ybXVsYWU7XG4gIH1cbiAgYW5hbHlzZSAobW9kZSkge1xuICAgIGxldCBpID0gMCxcbiAgICAgIGlpID0gMCxcbiAgICAgIGogPSAwLFxuICAgICAgamogPSAwLFxuICAgICAgbnVtID0gMCxcbiAgICAgIGNoZWNrQXJyID0gW10sXG4gICAgICBjaGVja051bSA9IDAsXG4gICAgICBkYXRhQXIgPSB0aGlzLmRhdGEsXG4gICAgICBuRGF0YUFyID0gW10sXG4gICAgICB0ZW1wQXIgPSBbXSxcbiAgICAgIHRlbXAgPSAwO1xuICAgIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycgJiYgbW9kZS50b0xvd2VyQ2FzZSgpID09PSAncmVzZXQnKSB7XG4gICAgICByZXR1cm4gZGF0YUFyLm1hcCgoYSkgPT4ge1xuICAgICAgICByZXR1cm4gYS5tYXAoKGIpID0+IHsgcmV0dXJuIGI7IH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZSkpIHsgLy8gSGFuZGxpbmcgYSBudW1iZXJcbiAgICAgIGNoZWNrTnVtID0gK21vZGU7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1vZGUgPSB0aGlzLkZvcm11bGFlW21vZGVdO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgY2hlY2tOdW0gPSBtb2RlKGRhdGFBcltpXSk7XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgaWYgKGNoZWNrTnVtID09PSAwKSB7XG4gICAgICAgICAgICB0ZW1wID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZW1wID0gMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wQXIucHVzaCh0ZW1wKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnJlbHBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucmVscG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIGlmIChqICsgbW9kZSA+PSAwICYmIGogKyBtb2RlIDwgamopIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW2ogKyBtb2RlXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBudW07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5wb3NpdGlvbikgfHwgdHlwZW9mIG1vZGUucG9zaXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICBtb2RlID0gbW9kZS5wb3NpdGlvbjtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgaWYgKG1vZGUgPT09ICdsYXN0Jykge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bamogLSAxXTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdtaWQnKSB7XG4gICAgICAgICAgICBjaGVja051bSA9IGRhdGFBcltpXVtqaiAvIDJdO1xuICAgICAgICAgIH0gZWxzZSBpZiAobW9kZSA+PSAwICYmIG1vZGUgPCBqaikge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bbW9kZV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gbnVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW0pO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucmVsZGF0YXNldHBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucmVsZGF0YXNldHBvc2l0aW9uO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgaWYgKGkgKyBtb2RlID49IDAgJiYgaSArIG1vZGUgPCBpaSkge1xuICAgICAgICAgIGNoZWNrQXJyID0gZGF0YUFyW2kgKyBtb2RlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja0FyciA9IGRhdGFBcltpXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgY2hlY2tOdW0gPSBjaGVja0FycltqXTtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIG51bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoaSA9IDAsIGlpID0gbkRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBmb3IgKGogPSAwLCBqaiA9IG5EYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShuRGF0YUFyW2ldW2pdKSkge1xuICAgICAgICAgIG5EYXRhQXJbaV1bal0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuRGF0YUFyO1xuICB9XG59XG5cbnZhciBGb3JtdWxhZSA9IHtcbiAgTWluaW11bTogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSA+IGIgPyBiIDogYTtcbiAgICB9KTtcbiAgfSxcbiAgTWF4aW11bTogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSA8IGIgPyBiIDogYTtcbiAgICB9KTtcbiAgfSxcbiAgTWVhbjogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSArIGI7XG4gICAgfSkgLyBhcnIubGVuZ3RoO1xuICB9LFxuICBNZWRpYW46IChhcnIpID0+IHtcbiAgICByZXR1cm4gYXJyLm1hcCgoYSkgPT4gYSkuc29ydCgoYSwgYikgPT4geyByZXR1cm4gYSAtIGI7IH0pW2Fyci5sZW5ndGggLyAyXTtcbiAgfSxcbiAgJ1N0YW5kYXJkIERldmlhdGlvbic6ICh2YWx1ZXMpID0+IHtcbiAgICBmdW5jdGlvbiBhdmVyYWdlIChkYXRhKSB7XG4gICAgICB2YXIgc3VtLCBhdmc7XG4gICAgICBzdW0gPSBkYXRhLnJlZHVjZShmdW5jdGlvbiAoc3VtLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gc3VtICsgdmFsdWU7XG4gICAgICB9LCAwKTtcblxuICAgICAgYXZnID0gc3VtIC8gZGF0YS5sZW5ndGg7XG4gICAgICByZXR1cm4gYXZnO1xuICAgIH1cbiAgICB2YXIgYXZnID0gMCxcbiAgICAgIHNxdWFyZURpZmZzID0gMCxcbiAgICAgIHNxckRpZmYgPSAwLFxuICAgICAgYXZnU3F1YXJlRGlmZiA9IDAsXG4gICAgICBzdGREZXYgPSAwLFxuICAgICAgZGlmZiA9IDA7XG4gICAgYXZnID0gYXZlcmFnZSh2YWx1ZXMpO1xuICAgIHNxdWFyZURpZmZzID0gdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGRpZmYgPSB2YWx1ZSAtIGF2ZztcbiAgICAgIHNxckRpZmYgPSBkaWZmICogZGlmZjtcbiAgICAgIHJldHVybiBzcXJEaWZmO1xuICAgIH0pO1xuICAgIGF2Z1NxdWFyZURpZmYgPSBhdmVyYWdlKHNxdWFyZURpZmZzKTtcbiAgICBzdGREZXYgPSBNYXRoLnNxcnQoYXZnU3F1YXJlRGlmZik7XG4gICAgcmV0dXJuIHN0ZERldjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHcm93dGhBbmFseXNlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dyb3d0aGFuYWx5c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdfQ==