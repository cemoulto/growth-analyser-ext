(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false };modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1);},function(module,exports,__webpack_require__){const GrowthAnalyser=__webpack_require__(2);FusionCharts.register('extension',['private','growth-analyser',function(){class GrowthAnalyserExt{constructor(){var self=this;this.toolbox=FusionCharts.getComponent('api','toolbox');this.HorizontalToolbar=this.toolbox.HorizontalToolbar;this.ComponentGroup=this.toolbox.ComponentGroup;this.SymbolStore=this.toolbox.SymbolStore;this.analyserOptionsObject={'First Index':{position:0},'Previous Index':{relposition:-1},'Specific Value':{'submenu':true,'Minimum':'Minimum','Maximum':'Maximum','Average':'Mean','Median':'Median','Standard Deviation':'Standard Deviation','Custom Value...':(fn)=>{fn((val)=>{self.analyser(val);self.preGrowthHook('Custom')})}}}}analyser(mode){var self=this,ga=this.ga||{},store=this.tsObject.apiInstance.getComponentStore(),canvas=store.getCanvasByIndex(0),comp=canvas.getComposition(),ds=ga.ds||comp.dataset,i,idMap=ga.idMap||{},storeAr=ga.storeAr||[],nStoreArr=[],yAxis=canvas.composition.yAxis;this.ga=ga;if(!ga.storeAr){store={};if(!ga.idMap){ds.forEachSeries(function(a,b,c,series){store[series.getId()]=series.getOriginalData()});for(i in store){storeAr.push(store[i]);idMap[i]=storeAr.length-1;}ga.idMap=idMap;ga.ds=ds;ga.storeAr=storeAr;ga.gAnalyser=new GrowthAnalyser(storeAr)}}nStoreArr=ga.gAnalyser.analyse(mode);if(mode==='reset'||!nStoreArr.changed){yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val};self.contextMenu&&self.contextMenu.hideListItem('reset')}else{yAxis.getScaleObj().getIntervalObj().getConfig('intervals').major.formatter=function(val){return val+'%'};self.contextMenu&&self.contextMenu.showListItem('reset')}ds.setDataBySeries(function(series){if(nStoreArr.value.length){series.setOriginalData(nStoreArr.value[idMap[series.getId()]])}});comp.impl.update()};init(require){var instance=this,requiredParams=['graphics','chart','globalReactiveModel','spaceManagerInstance','smartLabel','chartInstance','extData',function acquire(){let i=0,ii=requiredParams.length-1,param='';for(i=0;i<ii;i+=1){param=requiredParams[i];instance[param]=arguments[i]}}];require(requiredParams);this.spaceManagerInstance=instance.spaceManagerInstance;this.globalReactiveModel=instance.globalReactiveModel;this.tsObject=instance.chartInstance;this.startDt=instance.globalReactiveModel.model['x-axis-visible-range-start'];this.endDt=instance.globalReactiveModel.model['x-axis-visible-range-end'];this.startDataset=instance.globalReactiveModel.model['x-axis-absolute-range-start'];this.endDataset=instance.globalReactiveModel.model['x-axis-absolute-range-end'];this.toolbars=[];this.measurement={};this.toolbars.push(this.createToolbar());instance.growthOverMode();return this};growthOverMode(){let self=this,growthOver=this.extData&&this.extData.growthOver,analyserOptionsObject=this.analyserOptionsObject,exists=false;function check(ob){var key,value;for(key in ob){value=ob[key];if(typeof value==='object'&&value.submenu){check(value)}if(key.indexOf(growthOver)+1){exists=true}}}check(analyserOptionsObject);if(!exists){self.contextMenu&&self.contextMenu.hideListItem('reset');return}if(!isNaN(growthOver)){self.analyser(growthOver);self.preGrowthHook('Custom')}else if(growthOver==='firstIndex'){self.preGrowthHook('First');self.analyser({position:0})}else if(growthOver==='prevIndex'){self.preGrowthHook('Previous');self.analyser({relposition:-1})}else{self.preGrowthHook(growthOver);self.analyser(growthOver)}}updateAxisName(mode){let origAxisName=this.origAxisName||'Sale',userFn=this.extData&&this.extData.axisFormatter,renameFn=typeof userFn==='function'&&userFn||function(prevData,mode){mode=mode+'';return prevData+' growth w.r.t '+mode.toLowerCase()+' value'},analyserOptionsObject=this.analyserOptionsObject,exists=false,key='',value;function check(ob){for(key in ob){value=ob[key];if(typeof value==='object'&&value.submenu){check(value)}if(key.indexOf(mode)+1){exists=true}}}check(analyserOptionsObject);this.origAxisName=origAxisName;if(exists){changeAxis(renameFn(origAxisName,mode))}else{changeAxis(origAxisName)}function changeAxis(val){}}preGrowthHook(val){this.highlight(val);this.updateAxisName(val)}highlight(key){let contextMenu=this.contextMenu,atomicLists=contextMenu&&contextMenu.listContainerManager.container.atomicLists,i=atomicLists.length,j=0,list={},subList={},noneFound=true;for(;i-- -1;){list=atomicLists[i];noneFound=true;if(list.name.indexOf(key)+1){list.node.style.fontWeight='bold'}else{list.node.style.fontWeight=''}for(j=list.subConRef&&list.subConRef.atomicLists.length||0;j-=1;){subList=list.subConRef.atomicLists[j];if(subList.name.indexOf(key)+1){subList.node.style.fontWeight='bold';list.node.style.fontWeight='bold';noneFound=false}else{subList.node.style.fontWeight=''}if(noneFound){list.node.style.fontWeight=''}}}}createToolbar(){var toolbar,group,self=this,contextMenu,contextArray=[],gaOptionsObj={},popup,paper=this.graphics.paper,chartContainer=this.graphics.container,userStyle=self.extData&&self.extData.style||{},subCatStyle={'font-size':'12px','color':'#696969','font-family':'"Lucida Grande", Sans-serif'},catStyle={'font-size':'13px','color':'#4b4b4b','font-family':'"Lucida Grande", Sans-serif','fontWeight':'bold'},popupStyle={'fontSize':10+'px','lineHeight':15+'px','font-family':'"Lucida Grande", Sans-serif','stroke':'#676767','stroke-width':'2'};userStyle.category=userStyle.category||{};userStyle.subCategory=userStyle.subCategory||{};userStyle.popup=userStyle.popup||{};Object.assign(catStyle,userStyle.category);Object.assign(subCatStyle,userStyle.subCategory);Object.assign(popupStyle,userStyle.popup);toolbar=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});toolbar.setConfig({fill:'#fff',borderThickness:0});group=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container});group.setConfig({fill:'#fff',borderThickness:0});gaOptionsObj=this.analyserOptionsObject;contextMenu=new this.toolbox.SymbolWithContext('ContextIcon',{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{width:24,height:24,position:'right',stroke:'#ced5d4',strokeWidth:'1',radius:'1',symbolStroke:'#696969',symbolStrokeWidth:'2'});this.contextMenu=contextMenu;contextArray.push({'Show Growth Over':{style:catStyle}});popup=function(callback){var box,header,style=popupStyle,headerWidth=180,headerText,cross,inputField,applyButton,x=(self.chart.width*0.47)-90,y=self.chart.height/2-40;box=paper.html('div',{fill:'#f7f7f7',x:x,y:y,width:180,height:80},style,chartContainer);header=paper.html('div',{fill:'#e8e8e8',width:headerWidth,height:20},style,box);headerText=paper.html('div',{fill:'transparent',width:headerWidth*0.6,height:20,x:10,y:2},style,header);headerText.attr({text:'Provide value'});cross=paper.html('div',{fill:'transparent',width:10,height:10,position:'relative',float:'right',text:'X',cursor:'pointer'},style,header);cross.on('click',function(){box.hide()});inputField=paper.html('input',{width:100,height:20,x:10,y:30},style,box);applyButton=paper.html('div',{width:50,height:20,x:120,y:30,fill:'#555555'},{fontSize:10+'px',lineHeight:15+'px','font-family':'"Lucida Grande", Sans-serif',fill:'#eaeaea',color:'#eaeaea',stroke:'#eaeaea',cursor:'pointer'},box);function applyValue(){box.hide();callback(inputField.val())}applyButton.on('click',()=>{applyValue()});inputField.on('keyup',(e)=>{if(e.keyCode===13){applyValue()}});applyButton.attr({text:'Apply'});inputField.element.focus();function inputFieldNumberHandler(){inputField.element.value=inputField.element.value.replace(/[^\d.-]/g,'')}inputField.element.addEventListener('keyup',inputFieldNumberHandler);cross.element.style['position']='relative';cross.element.style['backgroundColor']='#d2d2d2';cross.element.style['border']='2px solid #cbcbcb';cross.element.style['padding']='0px 0px 3.5px 2px';cross.element.style['color']='#8c8c8c';cross.element.style['margin']='1px 2px';cross.element.style['float']='right';inputField.element.style['marginTop']='8px';inputField.element.style['border']='2px solid #dadbda';applyButton.element.style['marginTop']='8px';box.element.style['border']='1px solid #d4d2d3';header.element.style['border']='1px solid #d4d2d3';header.element.style['width']='179px';headerText.element.style['fontSize']='11.5px';headerText.element.style['marginTop']='0.5px';headerText.element.style['color']='#676767';header.element.style['font-family']='"Lucida Grande", Sans-serif';applyButton.element.style['textAlign']='center';applyButton.element.style['fontSize']='11px';applyButton.element.style['paddingTop']='3px';applyButton.element.style['borderRadius']='3px';applyButton.element.style['color']='#e4e4e4'};contextArray.push({'&nbsp; &nbsp; Reset View':{id:'reset',handler:function(){self.analyser('reset');self.preGrowthHook('reset')},action:'click',style:subCatStyle}});contextArray.push({'':{id:'reset',style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}});for(let i in gaOptionsObj){let key,obj={},subObj={};if(!gaOptionsObj[i].submenu){key='&nbsp; &nbsp; '+i;obj[key]={};obj[key]={style:subCatStyle,handler:function(){self.analyser(gaOptionsObj[i]);self.preGrowthHook(i)},action:'click'}}else{key='&#9666&nbsp; '+i;obj[key]={};obj[key].action='click';obj[key].style=subCatStyle;obj[key].handler=[];for(let j in gaOptionsObj[i]){let subMenuName=j,subMenuValue=gaOptionsObj[i][j];if(j==='submenu'){continue}subObj={};subObj['&nbsp;'+subMenuName]={};subObj['&nbsp;'+subMenuName].handler=function(){if(typeof subMenuValue==='function'){subMenuValue(popup)}else{self.analyser(subMenuValue);self.preGrowthHook(subMenuName)}};subObj['&nbsp;'+subMenuName].action='click';subObj['&nbsp;'+subMenuName].style=subCatStyle;obj[key].handler.push(subObj);if(j.indexOf('Custom')===-1){obj[key].handler.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}}}contextArray.push(obj);if(i.indexOf('Specific')===-1){contextArray.push({'':{style:{backgroundColor:'#d5d2d2',height:'1px',margin:'1px',padding:'0px'}}})}}contextMenu.appendAsList(contextArray);this.SymbolStore.register('ContextIcon',function(posx,posy,rad){var x=posx,y=posy,r=rad*2,space=Math.round(r/4),halfWidth=Math.round(r/2)*0.7,startX=(x-halfWidth),endX=(x+halfWidth),startY=(y+space),endY=(y-space);return['M',startX,y,'L',endX,y,'M',startX,startY,'L',endX,startY,'M',startX,endY,'L',endX,endY]});group.addSymbol(contextMenu);toolbar.addComponent(group);return toolbar};getLogicalSpace(availableWidth,availableHeight){availableWidth/=2;var logicalSpace,width=0,height=0,i,ln;for(i=0,ln=this.toolbars.length;i<ln;i+=1){logicalSpace=this.toolbars[i].getLogicalSpace(availableWidth,availableHeight);width=Math.max(logicalSpace.width,width);height+=logicalSpace.height;this.toolbars[i].width=logicalSpace.width;this.toolbars[i].height=logicalSpace.height}height+=this.padding;return{width:width>availableWidth?0:width,height:height>availableHeight?0:height}};placeInCanvas(){var self=this,config=this.extData||{},posWrtCanvas=config.posWrtCanvas||'top',layout=config.layout||'inline',alignment=config.alignment||'right',orientation=config.orientation||'horizontal';self.padding=5;self.spaceManagerInstance.add([{name:function(){return 'ToolBoxExt'},ref:function(obj){return obj['0']},self:function(){return self},priority:function(){return 2},layout:function(obj){return obj[layout]},orientation:[{type:function(obj){return obj[orientation]},position:[{type:function(obj){return obj[posWrtCanvas]},alignment:[{type:function(obj){return obj[alignment]},dimensions:[function(){var parent=this.getParentComponentGroup();return self.getLogicalSpace(parent.getWidth(),parent.getHeight())}]}]}]}]}])};setDrawingConfiguration(x,y,width,height,group){var mes=this.measurement;mes.x=x;mes.y=y;mes.width=width;mes.height=height;this.parentGroup=group;return this};draw(x,y,width,height,group){var measurement=this.measurement,toolbars=this.toolbars,ln,i,toolbar;x=x===undefined?measurement.x:x;y=y===undefined?measurement.y:y;width=width===undefined?measurement.width:width;height=height===undefined?measurement.height:height;group=group===undefined?this.parentGroup:group;if(width&&height){for(i=0,ln=toolbars.length;i<ln;i+=1){toolbar=toolbars[i];toolbar.draw(x,y)}}}};FusionCharts.registerComponent('extensions','growth-analyser',GrowthAnalyserExt)}]);},function(module,exports){'use strict';class GrowthAnalyser{constructor(data){this.data=data.map((a)=>{return a.map((b)=>{return b})});this.Formulae=Formulae}analyse(mode){let i=0,ii=0,j=0,jj=0,num=0,checkArr=[],checkNum=0,dataAr=this.data,nDataAr=[],tempAr=[],temp=0,unchanged={changed:false,value:this.data.map((a)=>{return a.map((b)=>{return undefined})})},dataReset={changed:false,value:this.data.map((a)=>{return a.map((b)=>{return b})})};if(mode===undefined){return dataReset}if(typeof mode==='string'&&mode.toLowerCase()==='reset'){return dataReset}else if(!isNaN(mode)){checkNum= +mode;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(typeof mode==='string'){mode=this.Formulae[mode];if(!mode){return dataReset}for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];checkNum=mode(dataAr[i]);for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(checkNum===0){temp=undefined}else{temp=100*(num-checkNum)/checkNum}tempAr.push(temp)}nDataAr.push(tempAr)}}else if(!isNaN(mode.relposition)){mode=mode.relposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(j+mode>=0&&j+mode<jj){checkNum=dataAr[i][j+mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.position)||typeof mode.position==='string'){mode=mode.position;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];for(j=0,jj=dataAr[i].length;j<jj;j+=1){num=dataAr[i][j];if(mode==='last'){checkNum=dataAr[i][jj-1]}else if(mode==='mid'){checkNum=dataAr[i][jj/2]}else if(mode>=0&&mode<jj){checkNum=dataAr[i][mode]}else{checkNum=num}tempAr.push(100*(num-checkNum)/checkNum)}nDataAr.push(tempAr)}}else if(!isNaN(mode.reldatasetposition)){mode=mode.reldatasetposition;for(i=0,ii=dataAr.length;i<ii;i+=1){tempAr=[];if(i+mode>=0&&i+mode<ii){checkArr=dataAr[i+mode]}else{checkArr=dataAr[i]}for(j=0,jj=dataAr[i].length;j<jj;j+=1){checkNum=checkArr[j];num=dataAr[i][j];tempAr.push(100*(num-checkNum)/num)}nDataAr.push(tempAr)}}else{return dataReset}for(i=0,ii=nDataAr.length;i<ii;i+=1){for(j=0,jj=nDataAr[i].length;j<jj;j+=1){if(!Number.isFinite(nDataAr[i][j])){nDataAr[i][j]=null}temp=parseInt(nDataAr[i][j]*100);nDataAr[i][j]=temp/100}}return{changed:true,value:nDataAr}}}var Formulae={Minimum:(arr)=>{return arr.reduce((a,b)=>{return a>b?b:a})},Maximum:(arr)=>{return arr.reduce((a,b)=>{return a<b?b:a})},Mean:(arr)=>{return arr.reduce((a,b)=>{return a+b})/arr.length},Median:(arr)=>{return arr.map((a)=>a).sort((a,b)=>{return a-b})[arr.length/2]},'Standard Deviation':(values)=>{function average(data){var sum,avg;sum=data.reduce(function(sum,value){return sum+value},0);avg=sum/data.length;return avg}var avg=0,squareDiffs=0,sqrDiff=0,avgSquareDiff=0,stdDev=0,diff=0;avg=average(values);squareDiffs=values.map(function(value){diff=value-avg;sqrDiff=diff*diff;return sqrDiff});avgSquareDiff=average(squareDiffs);stdDev=Math.sqrt(avgSquareDiff);return stdDev}};module.exports=GrowthAnalyser;}]);