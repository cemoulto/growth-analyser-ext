!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1);FusionCharts.register("extension",["private","growth-analyser-ext",function(){function t(){this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore}t.prototype.constructor=t,t.prototype.renderChange=function(){var t=this.tsObject.chartInstance,e=t.apiInstance.getComponentStore(),n=0;for(n=0;e.getCanvasByIndex(n);++n)e.getCanvasByIndex(n).getComposition().PlotManager.plot()},t.prototype.analyser=function(t){var e,n=this.ga||{},o=this.tsObject.apiInstance.getComponentStore(),a=o.getCanvasByIndex(0),r=(o.getNavigatorByIndex(0),a.getComposition()),s=n.ds||r.dataset,l=n.idMap||{},h=n.storeAr||[],p=[],c=a.composition.yAxis;if("reset"===t?c.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t){return t}:c.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t){return t+"%"},this.ga=n,!n.storeAr&&(o={},!n.idMap)){s.forEachSeries(function(t,e,n,i){o[i.getId()]=i.getOriginalData()});for(e in o)h.push(o[e]),l[e]=h.length-1;n.idMap=l,n.ds=s,n.storeAr=h,n.gAnalyser=new i(h)}p=n.gAnalyser.analyse(t),s.setDataBySeries(function(t){p.length&&t.setOriginalData(p[l[t.getId()]])}),r.impl.update()},t.prototype.init=function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","chartInstance","canvasData",function(t,n,i,o,a,r,s,l,h,p,c,u,d,f){e.xAxis=t,e.yAxis=n,e.graphics=i,e.chart=o,e.dataset=a,e.plotManager=r,e.markerManager=l,e.canvasConfig=s,e.reactiveModel=h,e.globalReactiveModel=p,e.spaceManagerInstance=c,e.smartLabel=u,e.chartInstance=d,e.canvasData=f}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.tsObject=e.chartInstance,this.startDt=e.globalReactiveModel.model["x-axis-visible-range-start"],this.endDt=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this},t.prototype.createToolbar=function(){var t,e,n,i,o=this,a=[],r={},s=this.graphics.paper,l=this.graphics.container,h={"font-size":"12px",color:"#696969",fontFamily:"Myriad Pro"},p={"font-size":"13px",color:"#696969","font-family":"Myriad Pro Semibold"};t=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),e=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),r={"Fixed-Number":"dialogBox",Functions:["Minimum","Maximum","Mean","Median","Standard Deviation"],Position:["First","Mid","Last","Custom Position"],Dataset:["Previous Dataset","Next Dataset"],"Relative-Position":["Next","Previous"]},n=new this.toolbox.SymbolWithContext("ContextIcon",{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{width:24,height:24,position:"right",stroke:"#ced5d4",strokeWidth:"1",radius:"1",symbolStroke:"#696969",symbolStrokeWidth:"2"}),a.push({"Growth Analyser":{style:p}}),i=function(t){function e(){r.element.value=r.element.value.replace(/[^\d.-]/g,"")}var n,i,o,a,r,h,p={fontSize:"10px",lineHeight:"15px",fontFamily:"Lucida Grande",stroke:"#676767","stroke-width":"2"},c=180,u=500,d=100;n=s.html("div",{fill:"#f7f7f7",x:u-200,y:d+100,width:180,height:80},p,l),i=s.html("div",{fill:"#e8e8e8",width:c,height:20},p,n),o=s.html("div",{fill:"transparent",width:.6*c,height:20,x:10,y:2},p,i),o.attr({text:"Provide Specific Value"}),a=s.html("div",{fill:"transparent",width:10,height:10,position:"relative",float:"right",text:"X",cursor:"pointer"},p,i),a.on("click",function(){n.hide()}),r=s.html("input",{width:100,height:20,x:10,y:30},p,n),h=s.html("div",{width:50,height:20,x:120,y:30,fill:"#555555"},{fontSize:"10px",lineHeight:"15px",fontFamily:"Lucida Grande",fill:"#eaeaea",color:"#eaeaea",stroke:"#eaeaea",cursor:"pointer"},n),h.on("click",function(){n.hide(),t(r.val())}),h.attr({text:"Apply"}),r.element.focus(),r.element.addEventListener("keyup",e),a.element.style.position="relative",a.element.style.backgroundColor="#d2d2d2",a.element.style.border="2px solid #cbcbcb",a.element.style.padding="0px 0px 3.5px 2px",a.element.style.color="#8c8c8c",a.element.style.margin="1px 2px",a.element.style.float="right",r.element.style.marginTop="8px",r.element.style.border="2px solid #dadbda",h.element.style.marginTop="8px",n.element.style.border="1px solid #d4d2d3",i.element.style.border="1px solid #d4d2d3",i.element.style.width="179px",o.element.style.fontSize="11.5px",o.element.style.marginTop="0.5px",o.element.style.color="#676767",i.element.style.fontFamily="Myriad pro Semibold",h.element.style.textAlign="center",h.element.style.fontSize="11px",h.element.style.paddingTop="3px",h.element.style.borderRadius="3px",h.element.style.color="#e4e4e4"};var c=function(t){var e=void 0,n={},s={};if("dialogBox"===r[t])e="&nbsp; &nbsp; "+t,n[e]={},n[e]={style:h,handler:function(){if("Fixed-Number"===t){i(function(t){o.analyser(parseInt(t))})}else if("Position"===t){i(function(t){o.analyser({position:t})})}},action:"click"};else{e="&#9666&nbsp; "+t,n[e]={},n[e].action="click",n[e].style=h,n[e].handler=[];for(var l=function(a){var l=r[t][a];s={},s["&nbsp;"+l]={},s["&nbsp;"+l].handler=function(){"Minimum"===l||"Maximum"===l||"Mean"===l||"Median"===l||"Standard Deviation"===l?o.analyser(l):"Previous Dataset"===l?o.analyser({reldatasetposition:-1}):"Next Dataset"===l?o.analyser({reldatasetposition:1}):"Next"===l?o.analyser({relposition:-1}):"Previous"===l?o.analyser({relposition:1}):"First"===l?o.analyser({position:0}):"Mid"===l?o.analyser({position:"mid"}):"Last"===l?o.analyser({position:"last"}):"Custom Position"===l&&i(function(t){o.analyser({position:parseInt(t)})})},s["&nbsp;"+l].action="click",s["&nbsp;"+l].style=h,n[e].handler.push(s),a!==r[t].length-1&&n[e].handler.push({"":{style:{backgroundColor:"#d5d2d2",height:"1px",margin:"1px",padding:"0px"}}})},p=0;p<r[t].length;p++)l(p)}a.push(n),a.push({"":{style:{backgroundColor:"#d5d2d2",height:"1px",margin:"1px",padding:"0px"}}})};for(var u in r)c(u);return a.push({"&nbsp; &nbsp; Reset View":{handler:function(){o.analyser("reset")},action:"click",style:h}}),n.appendAsList(a),this.SymbolStore.register("ContextIcon",function(t,e,n){var i=t,o=e,a=2*n,r=Math.round(a/4),s=.7*Math.round(a/2),l=i-s,h=i+s,p=o+r,c=o-r;return["M",l,o,"L",h,o,"M",l,p,"L",h,p,"M",l,c,"L",h,c]}),e.addSymbol(n),t.addComponent(e),t},t.prototype.getLogicalSpace=function(t,e){t/=2;var n,i,o,a=0,r=0;for(i=0,o=this.toolbars.length;i<o;i++)n=this.toolbars[i].getLogicalSpace(t,e),a=Math.max(n.width,a),r+=n.height,this.toolbars[i].width=n.width,this.toolbars[i].height=n.height;return r+=this.padding,{width:a>t?0:a,height:r>e?0:r}},t.prototype.placeInCanvas=function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"ToolBoxExt"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.right},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])},t.prototype.setDrawingConfiguration=function(t,e,n,i,o){var a=this.measurement;return a.x=t,a.y=e,a.width=n,a.height=i,this.parentGroup=o,this},t.prototype.draw=function(t,e,n,i,o){var a,r,s,l=this.measurement,h=this.toolbars;if(t=void 0===t?l.x:t,e=void 0===e?l.y:e,n=void 0===n?l.width:n,i=void 0===i?l.height:i,o=void 0===o?this.parentGroup:o,n&&i)for(r=0,a=h.length;r<a;r++)s=h[r],s.draw(t,e)},FusionCharts.registerComponent("extensions","GrowthAnalyserExt",t)}])},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){n(this,t),this.data=e.map(function(t){return t.map(function(t){return t})}),this.Formulae=a}return i(t,[{key:"analyse",value:function(t){var e=0,n=0,i=0,o=0,a=0,r=[],s=0,l=this.data,h=[],p=[],c=0;if("string"==typeof t&&"reset"===t.toLowerCase())return l.map(function(t){return t.map(function(t){return t})});if(isNaN(t))if("string"==typeof t)for(t=this.Formulae[t],e=0,n=l.length;e<n;++e){for(p=[],s=t(l[e]),i=0,o=l[e].length;i<o;++i)a=l[e][i],c=0===s?void 0:100*(a-s)/s,p.push(c);h.push(p)}else if(isNaN(t.relposition))if(isNaN(t.position)&&"string"!=typeof t.position){if(!isNaN(t.reldatasetposition))for(t=t.reldatasetposition,e=0,n=l.length;e<n;++e){for(p=[],r=e+t>=0&&e+t<n?l[e+t]:l[e],i=0,o=l[e].length;i<o;++i)s=r[i],a=l[e][i],p.push(100*(a-s)/a);h.push(p)}}else for(t=t.position,e=0,n=l.length;e<n;++e){for(p=[],i=0,o=l[e].length;i<o;++i)a=l[e][i],s="last"===t?l[e][o-1]:"mid"===t?l[e][o/2]:t>=0&&t<o?l[e][t]:a,p.push(100*(a-s)/s);h.push(p)}else for(t=t.relposition,e=0,n=l.length;e<n;++e){for(p=[],i=0,o=l[e].length;i<o;++i)a=l[e][i],s=i+t>=0&&i+t<o?l[e][i+t]:a,p.push(100*(a-s)/s);h.push(p)}else for(s=+t,e=0,n=l.length;e<n;++e){for(p=[],i=0,o=l[e].length;i<o;++i)a=l[e][i],p.push(100*(a-s)/s);h.push(p)}for(e=0,n=h.length;e<n;++e)for(i=0,o=h[e].length;i<o;++i)Number.isFinite(h[e][i])||(h[e][i]=null);return h}}]),t}(),a={Minimum:function(t){return t.reduce(function(t,e){return t>e?e:t})},Maximum:function(t){return t.reduce(function(t,e){return t<e?e:t})},Mean:function(t){return t.reduce(function(t,e){return t+e})/t.length},Median:function(t){return t.map(function(t){return t}).sort(function(t,e){return t-e})[t.length/2]},"Standard Deviation":function(t){function e(t){var e,n;return e=t.reduce(function(t,e){return t+e},0),n=e/t.length}var n=0,i=0,o=0,a=0,r=0,s=0;return n=e(t),i=t.map(function(t){return s=t-n,o=s*s}),a=e(i),r=Math.sqrt(a)}};t.exports=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZ3Jvd3RoLWFuYWx5c2VyLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDYxZmI4Yjk3MzBmYWQ1OWFlNDliIiwid2VicGFjazovLy8uL3NyYy9leHRlbnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyb3d0aGFuYWx5c2VyLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIkdyb3d0aEFuYWx5c2VyIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJHcm93dGhBbmFseXNlckV4dCIsInRoaXMiLCJ0b29sYm94IiwiZ2V0Q29tcG9uZW50IiwiSG9yaXpvbnRhbFRvb2xiYXIiLCJDb21wb25lbnRHcm91cCIsIlN5bWJvbFN0b3JlIiwicHJvdG90eXBlIiwiY29uc3RydWN0b3IiLCJyZW5kZXJDaGFuZ2UiLCJjaGFydEluc3RhbmNlIiwidHNPYmplY3QiLCJjb21wb25lbnRTdG9yZSIsImFwaUluc3RhbmNlIiwiZ2V0Q29tcG9uZW50U3RvcmUiLCJpIiwiZ2V0Q2FudmFzQnlJbmRleCIsImdldENvbXBvc2l0aW9uIiwiUGxvdE1hbmFnZXIiLCJwbG90IiwiYW5hbHlzZXIiLCJtb2RlIiwiZ2EiLCJzdG9yZSIsImNhbnZhcyIsImNvbXAiLCJnZXROYXZpZ2F0b3JCeUluZGV4IiwiZHMiLCJkYXRhc2V0IiwiaWRNYXAiLCJzdG9yZUFyIiwiblN0b3JlQXJyIiwieUF4aXMiLCJjb21wb3NpdGlvbiIsImdldFNjYWxlT2JqIiwiZ2V0SW50ZXJ2YWxPYmoiLCJnZXRDb25maWciLCJtYWpvciIsImZvcm1hdHRlciIsInZhbCIsImZvckVhY2hTZXJpZXMiLCJhIiwiYiIsInNlcmllcyIsImdldElkIiwiZ2V0T3JpZ2luYWxEYXRhIiwicHVzaCIsImxlbmd0aCIsImdBbmFseXNlciIsImFuYWx5c2UiLCJzZXREYXRhQnlTZXJpZXMiLCJzZXRPcmlnaW5hbERhdGEiLCJpbXBsIiwidXBkYXRlIiwiaW5pdCIsInJlcXVpcmUiLCJpbnN0YW5jZSIsInhBeGlzIiwiZ3JhcGhpY3MiLCJjaGFydCIsInBsb3RNYW5hZ2VyIiwiY2FudmFzQ29uZmlnIiwibWFya2VyTWFuYWdlciIsInJlYWN0aXZlTW9kZWwiLCJnbG9iYWxSZWFjdGl2ZU1vZGVsIiwic3BhY2VNYW5hZ2VySW5zdGFuY2UiLCJzbWFydExhYmVsIiwiY2FudmFzRGF0YSIsInN0YXJ0RHQiLCJtb2RlbCIsImVuZER0Iiwic3RhcnREYXRhc2V0IiwiZW5kRGF0YXNldCIsInRvb2xiYXJzIiwibWVhc3VyZW1lbnQiLCJjcmVhdGVUb29sYmFyIiwidG9vbGJhciIsImdyb3VwIiwiY29udGV4dE1lbnUiLCJwb3B1cCIsInNlbGYiLCJjb250ZXh0QXJyYXkiLCJnYU9wdGlvbnNPYmoiLCJwYXBlciIsImNoYXJ0Q29udGFpbmVyIiwiY29udGFpbmVyIiwic3ViQ2F0U3R5bGUiLCJmb250LXNpemUiLCJjb2xvciIsImZvbnRGYW1pbHkiLCJjYXRTdHlsZSIsImZvbnQtZmFtaWx5Iiwic2V0Q29uZmlnIiwiZmlsbCIsImJvcmRlclRoaWNrbmVzcyIsIkZpeGVkLU51bWJlciIsIkZ1bmN0aW9ucyIsIlBvc2l0aW9uIiwiRGF0YXNldCIsIlJlbGF0aXZlLVBvc2l0aW9uIiwiU3ltYm9sV2l0aENvbnRleHQiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJyYWRpdXMiLCJzeW1ib2xTdHJva2UiLCJzeW1ib2xTdHJva2VXaWR0aCIsIkdyb3d0aCBBbmFseXNlciIsInN0eWxlIiwiY2FsbGJhY2siLCJpbnB1dEZpZWxkTnVtYmVySGFuZGxlciIsImlucHV0RmllbGQiLCJlbGVtZW50IiwidmFsdWUiLCJyZXBsYWNlIiwiYm94IiwiaGVhZGVyIiwiaGVhZGVyVGV4dCIsImNyb3NzIiwiYXBwbHlCdXR0b24iLCJmb250U2l6ZSIsImxpbmVIZWlnaHQiLCJzdHJva2Utd2lkdGgiLCJoZWFkZXJXaWR0aCIsIngiLCJ5IiwiaHRtbCIsImF0dHIiLCJ0ZXh0IiwiZmxvYXQiLCJjdXJzb3IiLCJvbiIsImhpZGUiLCJmb2N1cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfbG9vcCIsImtleSIsIm9iaiIsInN1Yk9iaiIsImhhbmRsZXIiLCJzdHIiLCJwYXJzZUludCIsImFjdGlvbiIsIl9sb29wMiIsImoiLCJzdWJNZW51TmFtZSIsInJlbGRhdGFzZXRwb3NpdGlvbiIsInJlbHBvc2l0aW9uIiwiIiwiYmFja2dyb3VuZENvbG9yIiwibWFyZ2luIiwicGFkZGluZyIsIiZuYnNwOyAmbmJzcDsgUmVzZXQgVmlldyIsImFwcGVuZEFzTGlzdCIsInBvc3giLCJwb3N5IiwicmFkIiwiciIsInNwYWNlIiwiTWF0aCIsInJvdW5kIiwiaGFsZldpZHRoIiwic3RhcnRYIiwiZW5kWCIsInN0YXJ0WSIsImVuZFkiLCJhZGRTeW1ib2wiLCJhZGRDb21wb25lbnQiLCJnZXRMb2dpY2FsU3BhY2UiLCJhdmFpbGFibGVXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsImxvZ2ljYWxTcGFjZSIsImxuIiwibWF4IiwicGxhY2VJbkNhbnZhcyIsImFkZCIsIm5hbWUiLCJyZWYiLCJwcmlvcml0eSIsImxheW91dCIsImlubGluZSIsIm9yaWVudGF0aW9uIiwidHlwZSIsImhvcml6b250YWwiLCJ0b3AiLCJhbGlnbm1lbnQiLCJyaWdodCIsImRpbWVuc2lvbnMiLCJwYXJlbnQiLCJnZXRQYXJlbnRDb21wb25lbnRHcm91cCIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0Iiwic2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24iLCJtZXMiLCJwYXJlbnRHcm91cCIsImRyYXciLCJ1bmRlZmluZWQiLCJyZWdpc3RlckNvbXBvbmVudCIsIl9jbGFzc0NhbGxDaGVjayIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiZGF0YSIsIm1hcCIsIkZvcm11bGFlIiwiaWkiLCJqaiIsIm51bSIsImNoZWNrQXJyIiwiY2hlY2tOdW0iLCJkYXRhQXIiLCJuRGF0YUFyIiwidGVtcEFyIiwidGVtcCIsInRvTG93ZXJDYXNlIiwiaXNOYU4iLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIk1pbmltdW0iLCJhcnIiLCJyZWR1Y2UiLCJNYXhpbXVtIiwiTWVhbiIsIk1lZGlhbiIsInNvcnQiLCJTdGFuZGFyZCBEZXZpYXRpb24iLCJ2YWx1ZXMiLCJhdmVyYWdlIiwic3VtIiwiYXZnIiwic3F1YXJlRGlmZnMiLCJzcXJEaWZmIiwiYXZnU3F1YXJlRGlmZiIsInN0ZERldiIsImRpZmYiLCJzcXJ0Il0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQixZRTlDRCxJQUFNVyxHQUFpQlgsRUFBUSxFQUUvQlksY0FBYUMsU0FBUyxhQUFjLFVBQVcsc0JBQXVCLFdBQ3BFLFFBQVNDLEtBQ1BDLEtBQUtDLFFBQVVKLGFBQWFLLGFBQWEsTUFBTyxX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LEVBQ2ZFLEVBQVVHLEVBQU9BLElBR25CRixFQUFnQkwsRUFBUUcsR0FDeEJHLEVBQVNyRixLQUFLdUYsS0FBS0gsSUFLdkIvUCxHQUFPRCxRQUFVUSIsImZpbGUiOiJncm93dGgtYW5hbHlzZXItZXM1Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEdyb3d0aEFuYWx5c2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdEZ1c2lvbkNoYXJ0cy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ2dyb3d0aC1hbmFseXNlci1leHQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gR3Jvd3RoQW5hbHlzZXJFeHQoKSB7XG5cdCAgICB0aGlzLnRvb2xib3ggPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHQgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcblx0ICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG5cdCAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuXHQgIH1cblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHcm93dGhBbmFseXNlckV4dDtcblx0XG5cdCAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnJlbmRlckNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBjaGFydEluc3RhbmNlID0gdGhpcy50c09iamVjdC5jaGFydEluc3RhbmNlLFxuXHQgICAgICAgIGNvbXBvbmVudFN0b3JlID0gY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZS5nZXRDb21wb25lbnRTdG9yZSgpLFxuXHQgICAgICAgIGkgPSAwO1xuXHQgICAgZm9yIChpID0gMDsgY29tcG9uZW50U3RvcmUuZ2V0Q2FudmFzQnlJbmRleChpKTsgKytpKSB7XG5cdCAgICAgIGNvbXBvbmVudFN0b3JlLmdldENhbnZhc0J5SW5kZXgoaSkuZ2V0Q29tcG9zaXRpb24oKS5QbG90TWFuYWdlci5wbG90KCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmFuYWx5c2VyID0gZnVuY3Rpb24gKG1vZGUpIHtcblx0ICAgIHZhciBnYSA9IHRoaXMuZ2EgfHwge30sXG5cdCAgICAgICAgc3RvcmUgPSB0aGlzLnRzT2JqZWN0LmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCksXG5cdCAgICAgICAgY2FudmFzID0gc3RvcmUuZ2V0Q2FudmFzQnlJbmRleCgwKSxcblx0ICAgICAgICBuYXYgPSBzdG9yZS5nZXROYXZpZ2F0b3JCeUluZGV4KDApLFxuXHQgICAgICAgIGNvbXAgPSBjYW52YXMuZ2V0Q29tcG9zaXRpb24oKSxcblx0ICAgICAgICBkcyA9IGdhLmRzIHx8IGNvbXAuZGF0YXNldCxcblx0ICAgICAgICBpLFxuXHQgICAgICAgIGlkTWFwID0gZ2EuaWRNYXAgfHwge30sXG5cdCAgICAgICAgc3RvcmVBciA9IGdhLnN0b3JlQXIgfHwgW10sXG5cdCAgICAgICAgblN0b3JlQXJyID0gW10sXG5cdCAgICAgICAgeUF4aXMgPSBjYW52YXMuY29tcG9zaXRpb24ueUF4aXM7XG5cdCAgICAvLyBDaGFuZ2luZyB5IEF4aXMgZm9ybWF0dG9yXG5cdCAgICBpZiAobW9kZSA9PT0gJ3Jlc2V0Jykge1xuXHQgICAgICB5QXhpcy5nZXRTY2FsZU9iaigpLmdldEludGVydmFsT2JqKCkuZ2V0Q29uZmlnKCdpbnRlcnZhbHMnKS5tYWpvci5mb3JtYXR0ZXIgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICByZXR1cm4gdmFsICsgJyUnO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgLy8gRGVjbGFyYXRpb24gZW5kc1xuXHQgICAgdGhpcy5nYSA9IGdhO1xuXHQgICAgaWYgKCFnYS5zdG9yZUFyKSB7XG5cdCAgICAgIHN0b3JlID0ge307XG5cdCAgICAgIGlmICghZ2EuaWRNYXApIHtcblx0ICAgICAgICBkcy5mb3JFYWNoU2VyaWVzKGZ1bmN0aW9uIChhLCBiLCBjLCBzZXJpZXMpIHtcblx0ICAgICAgICAgIHN0b3JlW3Nlcmllcy5nZXRJZCgpXSA9IHNlcmllcy5nZXRPcmlnaW5hbERhdGEoKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBmb3IgKGkgaW4gc3RvcmUpIHtcblx0ICAgICAgICAgIHN0b3JlQXIucHVzaChzdG9yZVtpXSk7XG5cdCAgICAgICAgICBpZE1hcFtpXSA9IHN0b3JlQXIubGVuZ3RoIC0gMTtcblx0ICAgICAgICAgIC8vID0gc3RvcmVbaV0ubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiAyMCAqIGUgKyAoTWF0aC5yYW5kb20oKSAqIDEwMDApOyB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZ2EuaWRNYXAgPSBpZE1hcDtcblx0ICAgICAgICBnYS5kcyA9IGRzO1xuXHQgICAgICAgIGdhLnN0b3JlQXIgPSBzdG9yZUFyO1xuXHQgICAgICAgIGdhLmdBbmFseXNlciA9IG5ldyBHcm93dGhBbmFseXNlcihzdG9yZUFyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgblN0b3JlQXJyID0gZ2EuZ0FuYWx5c2VyLmFuYWx5c2UobW9kZSk7XG5cdCAgICBkcy5zZXREYXRhQnlTZXJpZXMoZnVuY3Rpb24gKHNlcmllcykge1xuXHQgICAgICBpZiAoblN0b3JlQXJyLmxlbmd0aCkge1xuXHQgICAgICAgIHNlcmllcy5zZXRPcmlnaW5hbERhdGEoblN0b3JlQXJyW2lkTWFwW3Nlcmllcy5nZXRJZCgpXV0pO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIGNvbXAuaW1wbC51cGRhdGUoKTtcblx0ICB9O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChyZXF1aXJlKSB7XG5cdCAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgcmVxdWlyZShbJ3hBeGlzJywgJ3lBeGlzJywgJ2dyYXBoaWNzJywgJ2NoYXJ0JywgJ2RhdGFzZXQnLCAnUGxvdE1hbmFnZXInLCAnY2FudmFzQ29uZmlnJywgJ01hcmtlck1hbmFnZXInLCAncmVhY3RpdmVNb2RlbCcsICdnbG9iYWxSZWFjdGl2ZU1vZGVsJywgJ3NwYWNlTWFuYWdlckluc3RhbmNlJywgJ3NtYXJ0TGFiZWwnLCAnY2hhcnRJbnN0YW5jZScsICdjYW52YXNEYXRhJywgZnVuY3Rpb24gKHhBeGlzLCB5QXhpcywgZ3JhcGhpY3MsIGNoYXJ0LCBkYXRhc2V0LCBwbG90TWFuYWdlciwgY2FudmFzQ29uZmlnLCBtYXJrZXJNYW5hZ2VyLCByZWFjdGl2ZU1vZGVsLCBnbG9iYWxSZWFjdGl2ZU1vZGVsLCBzcGFjZU1hbmFnZXJJbnN0YW5jZSwgc21hcnRMYWJlbCwgY2hhcnRJbnN0YW5jZSwgY2FudmFzRGF0YSkge1xuXHQgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuXHQgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuXHQgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuXHQgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuXHQgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcblx0ICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcblx0ICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG5cdCAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcblx0ICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG5cdCAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcblx0ICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG5cdCAgICAgIGluc3RhbmNlLmNhbnZhc0RhdGEgPSBjYW52YXNEYXRhO1xuXHQgICAgfV0pO1xuXHQgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgIHRoaXMudHNPYmplY3QgPSBpbnN0YW5jZS5jaGFydEluc3RhbmNlO1xuXHQgICAgdGhpcy5zdGFydER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgIHRoaXMuZW5kRHQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcblx0ICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG5cdCAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cdCAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG5cdCAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmNyZWF0ZVRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgdG9vbGJhcixcblx0ICAgICAgICBncm91cCxcblx0ICAgICAgICBzZWxmID0gdGhpcyxcblx0ICAgICAgICBjb250ZXh0TWVudSxcblx0ICAgICAgICBjb250ZXh0QXJyYXkgPSBbXSxcblx0ICAgICAgICBnYU9wdGlvbnNPYmogPSB7fSxcblx0ICAgICAgICBwb3B1cCxcblx0ICAgICAgICBwYXBlciA9IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgY2hhcnRDb250YWluZXIgPSB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lcixcblx0ICAgICAgICBzdWJDYXRTdHlsZSA9IHtcblx0ICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMnB4Jyxcblx0ICAgICAgJ2NvbG9yJzogJyM2OTY5NjknLFxuXHQgICAgICAnZm9udEZhbWlseSc6ICdNeXJpYWQgUHJvJ1xuXHQgICAgfSxcblx0ICAgICAgICBjYXRTdHlsZSA9IHtcblx0ICAgICAgJ2ZvbnQtc2l6ZSc6ICcxM3B4Jyxcblx0ICAgICAgJ2NvbG9yJzogJyM2OTY5NjknLFxuXHQgICAgICAnZm9udC1mYW1pbHknOiAnTXlyaWFkIFBybyBTZW1pYm9sZCdcblx0ICAgIH07XG5cdFxuXHQgICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcblx0ICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgfSk7XG5cdFxuXHQgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgfSk7XG5cdFxuXHQgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgfSk7XG5cdFxuXHQgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdhT3B0aW9uc09iaiA9IHtcblx0ICAgICAgJ0ZpeGVkLU51bWJlcic6ICdkaWFsb2dCb3gnLFxuXHQgICAgICAnRnVuY3Rpb25zJzogWydNaW5pbXVtJywgJ01heGltdW0nLCAnTWVhbicsICdNZWRpYW4nLCAnU3RhbmRhcmQgRGV2aWF0aW9uJ10sXG5cdCAgICAgICdQb3NpdGlvbic6IFsnRmlyc3QnLCAnTWlkJywgJ0xhc3QnLCAnQ3VzdG9tIFBvc2l0aW9uJ10sXG5cdCAgICAgICdEYXRhc2V0JzogWydQcmV2aW91cyBEYXRhc2V0JywgJ05leHQgRGF0YXNldCddLFxuXHQgICAgICAnUmVsYXRpdmUtUG9zaXRpb24nOiBbJ05leHQnLCAnUHJldmlvdXMnXVxuXHQgICAgfTtcblx0XG5cdCAgICBjb250ZXh0TWVudSA9IG5ldyB0aGlzLnRvb2xib3guU3ltYm9sV2l0aENvbnRleHQoJ0NvbnRleHRJY29uJywge1xuXHQgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICB9LCB7XG5cdCAgICAgIHdpZHRoOiAyNCxcblx0ICAgICAgaGVpZ2h0OiAyNCxcblx0ICAgICAgcG9zaXRpb246ICdyaWdodCcsXG5cdCAgICAgIHN0cm9rZTogJyNjZWQ1ZDQnLFxuXHQgICAgICBzdHJva2VXaWR0aDogJzEnLFxuXHQgICAgICByYWRpdXM6ICcxJyxcblx0ICAgICAgc3ltYm9sU3Ryb2tlOiAnIzY5Njk2OScsXG5cdCAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMidcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNvbnRleHRBcnJheS5wdXNoKHtcblx0ICAgICAgJ0dyb3d0aCBBbmFseXNlcic6IHtcblx0ICAgICAgICBzdHlsZTogY2F0U3R5bGVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICBwb3B1cCA9IGZ1bmN0aW9uIHBvcHVwKGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBib3gsXG5cdCAgICAgICAgICBoZWFkZXIsXG5cdCAgICAgICAgICBzdHlsZSA9IHtcblx0ICAgICAgICBmb250U2l6ZTogMTAgKyAncHgnLFxuXHQgICAgICAgIGxpbmVIZWlnaHQ6IDE1ICsgJ3B4Jyxcblx0ICAgICAgICBmb250RmFtaWx5OiAnTHVjaWRhIEdyYW5kZScsXG5cdCAgICAgICAgc3Ryb2tlOiAnIzY3Njc2NycsXG5cdCAgICAgICAgJ3N0cm9rZS13aWR0aCc6ICcyJ1xuXHQgICAgICB9LFxuXHQgICAgICAgICAgaGVhZGVyV2lkdGggPSAxODAsXG5cdCAgICAgICAgICBoZWFkZXJUZXh0LFxuXHQgICAgICAgICAgY3Jvc3MsXG5cdCAgICAgICAgICBpbnB1dEZpZWxkLFxuXHQgICAgICAgICAgYXBwbHlCdXR0b24sXG5cdCAgICAgICAgICB4ID0gNTAwLFxuXHQgICAgICAgICAgeSA9IDEwMDtcblx0XG5cdCAgICAgIGJveCA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcblx0ICAgICAgICBmaWxsOiAnI2Y3ZjdmNycsXG5cdCAgICAgICAgeDogeCAtIDIwMCxcblx0ICAgICAgICB5OiB5ICsgMTAwLFxuXHQgICAgICAgIHdpZHRoOiAxODAsXG5cdCAgICAgICAgaGVpZ2h0OiA4MFxuXHQgICAgICB9LCBzdHlsZSwgY2hhcnRDb250YWluZXIpO1xuXHRcblx0ICAgICAgaGVhZGVyID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuXHQgICAgICAgIGZpbGw6ICcjZThlOGU4Jyxcblx0ICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGgsXG5cdCAgICAgICAgaGVpZ2h0OiAyMFxuXHQgICAgICB9LCBzdHlsZSwgYm94KTtcblx0XG5cdCAgICAgIGhlYWRlclRleHQgPSBwYXBlci5odG1sKCdkaXYnLCB7XG5cdCAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50Jyxcblx0ICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGggKiAwLjYsXG5cdCAgICAgICAgaGVpZ2h0OiAyMCxcblx0ICAgICAgICB4OiAxMCxcblx0ICAgICAgICB5OiAyXG5cdCAgICAgIH0sIHN0eWxlLCBoZWFkZXIpO1xuXHRcblx0ICAgICAgaGVhZGVyVGV4dC5hdHRyKHtcblx0ICAgICAgICB0ZXh0OiAnUHJvdmlkZSBTcGVjaWZpYyBWYWx1ZSdcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBjcm9zcyA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcblx0ICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuXHQgICAgICAgIHdpZHRoOiAxMCxcblx0ICAgICAgICBoZWlnaHQ6IDEwLFxuXHQgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHQgICAgICAgIGZsb2F0OiAncmlnaHQnLFxuXHQgICAgICAgIHRleHQ6ICdYJyxcblx0ICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuXHQgICAgICB9LCBzdHlsZSwgaGVhZGVyKTtcblx0XG5cdCAgICAgIGNyb3NzLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBib3guaGlkZSgpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlucHV0RmllbGQgPSBwYXBlci5odG1sKCdpbnB1dCcsIHtcblx0ICAgICAgICB3aWR0aDogMTAwLFxuXHQgICAgICAgIGhlaWdodDogMjAsXG5cdCAgICAgICAgeDogMTAsXG5cdCAgICAgICAgeTogMzBcblx0ICAgICAgfSwgc3R5bGUsIGJveCk7XG5cdFxuXHQgICAgICBhcHBseUJ1dHRvbiA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcblx0ICAgICAgICB3aWR0aDogNTAsXG5cdCAgICAgICAgaGVpZ2h0OiAyMCxcblx0ICAgICAgICB4OiAxMjAsXG5cdCAgICAgICAgeTogMzAsXG5cdCAgICAgICAgZmlsbDogJyM1NTU1NTUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBmb250U2l6ZTogMTAgKyAncHgnLFxuXHQgICAgICAgIGxpbmVIZWlnaHQ6IDE1ICsgJ3B4Jyxcblx0ICAgICAgICBmb250RmFtaWx5OiAnTHVjaWRhIEdyYW5kZScsXG5cdCAgICAgICAgZmlsbDogJyNlYWVhZWEnLFxuXHQgICAgICAgIGNvbG9yOiAnI2VhZWFlYScsXG5cdCAgICAgICAgc3Ryb2tlOiAnI2VhZWFlYScsXG5cdCAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcblx0ICAgICAgfSwgYm94KTtcblx0XG5cdCAgICAgIGFwcGx5QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBib3guaGlkZSgpO1xuXHQgICAgICAgIGNhbGxiYWNrKGlucHV0RmllbGQudmFsKCkpO1xuXHQgICAgICB9KTtcblx0ICAgICAgYXBwbHlCdXR0b24uYXR0cih7XG5cdCAgICAgICAgdGV4dDogJ0FwcGx5J1xuXHQgICAgICB9KTtcblx0ICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LmZvY3VzKCk7XG5cdCAgICAgIGZ1bmN0aW9uIGlucHV0RmllbGROdW1iZXJIYW5kbGVyKCkge1xuXHQgICAgICAgIGlucHV0RmllbGQuZWxlbWVudC52YWx1ZSA9IGlucHV0RmllbGQuZWxlbWVudC52YWx1ZS5yZXBsYWNlKC9bXlxcZC4tXS9nLCAnJyk7XG5cdCAgICAgIH1cblx0ICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaW5wdXRGaWVsZE51bWJlckhhbmRsZXIpO1xuXHQgICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydwb3NpdGlvbiddID0gJ3JlbGF0aXZlJztcblx0ICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnYmFja2dyb3VuZENvbG9yJ10gPSAnI2QyZDJkMic7XG5cdCAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzJweCBzb2xpZCAjY2JjYmNiJztcblx0ICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsncGFkZGluZyddID0gJzBweCAwcHggMy41cHggMnB4Jztcblx0ICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjOGM4YzhjJztcblx0ICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnbWFyZ2luJ10gPSAnMXB4IDJweCc7XG5cdCAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2Zsb2F0J10gPSAncmlnaHQnO1xuXHQgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzhweCc7XG5cdCAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMnB4IHNvbGlkICNkYWRiZGEnO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICc4cHgnO1xuXHQgICAgICBib3guZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMXB4IHNvbGlkICNkNGQyZDMnO1xuXHQgICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMXB4IHNvbGlkICNkNGQyZDMnO1xuXHQgICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnd2lkdGgnXSA9ICcxNzlweCc7XG5cdCAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnZm9udFNpemUnXSA9ICcxMS41cHgnO1xuXHQgICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzAuNXB4Jztcblx0ICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyM2NzY3NjcnO1xuXHQgICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnZm9udEZhbWlseSddID0gJ015cmlhZCBwcm8gU2VtaWJvbGQnO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWyd0ZXh0QWxpZ24nXSA9ICdjZW50ZXInO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExcHgnO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydwYWRkaW5nVG9wJ10gPSAnM3B4Jztcblx0ICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnYm9yZGVyUmFkaXVzJ10gPSAnM3B4Jztcblx0ICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjZTRlNGU0Jztcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuXHQgICAgICB2YXIga2V5ID0gdm9pZCAwLFxuXHQgICAgICAgICAgb2JqID0ge30sXG5cdCAgICAgICAgICBzdWJPYmogPSB7fTtcblx0ICAgICAgaWYgKGdhT3B0aW9uc09ialtpXSA9PT0gJ2RpYWxvZ0JveCcpIHtcblx0ICAgICAgICBrZXkgPSAnJm5ic3A7ICZuYnNwOyAnICsgaTtcblx0ICAgICAgICBvYmpba2V5XSA9IHt9O1xuXHQgICAgICAgIG9ialtrZXldID0ge1xuXHQgICAgICAgICAgc3R5bGU6IHN1YkNhdFN0eWxlLFxuXHQgICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICAgICAgLy8gbGV0IHBvcHVwVmFsID0gcG9wdXAoZnVuY3Rpb24gKHN0cikge1xuXHQgICAgICAgICAgICAvLyAgIHNlbGYuYW5hbHlzZXIocGFyc2VJbnQoc3RyKSk7XG5cdCAgICAgICAgICAgIC8vIH0pO1xuXHQgICAgICAgICAgICBpZiAoaSA9PT0gJ0ZpeGVkLU51bWJlcicpIHtcblx0ICAgICAgICAgICAgICAvLyBzZWxmLmFuYWx5c2VyKHBhcnNlSW50KHdpbmRvdy5wcm9tcHQoJ0VudGVyIHZhbHVlJykpKTtcblx0ICAgICAgICAgICAgICB2YXIgcG9wdXBWYWwgPSBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG5cdCAgICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHBhcnNlSW50KHN0cikpO1xuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09ICdQb3NpdGlvbicpIHtcblx0ICAgICAgICAgICAgICB2YXIgX3BvcHVwVmFsID0gcG9wdXAoZnVuY3Rpb24gKHN0cikge1xuXHQgICAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7IHBvc2l0aW9uOiBzdHIgfSk7XG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBhY3Rpb246ICdjbGljaydcblx0ICAgICAgICB9O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGtleSA9ICcmIzk2NjYmbmJzcDsgJyArIGk7XG5cdCAgICAgICAgb2JqW2tleV0gPSB7fTtcblx0ICAgICAgICBvYmpba2V5XS5hY3Rpb24gPSAnY2xpY2snO1xuXHQgICAgICAgIG9ialtrZXldLnN0eWxlID0gc3ViQ2F0U3R5bGU7XG5cdCAgICAgICAgb2JqW2tleV0uaGFuZGxlciA9IFtdO1xuXHRcblx0ICAgICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKGopIHtcblx0ICAgICAgICAgIHZhciBzdWJNZW51TmFtZSA9IGdhT3B0aW9uc09ialtpXVtqXTtcblx0ICAgICAgICAgIHN1Yk9iaiA9IHt9O1xuXHQgICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdID0ge307XG5cdCAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uaGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgLy8gWydNaW5pbXVtJywgJ01heGltdW0nLCAnTWVhbicsICdNZWRpYW4nLCAnU3RhbmRhcmQgRGV2aWF0aW9uJ11cblx0ICAgICAgICAgICAgLy8gWydQcmV2aW91cyBEYXRhc2V0JywgJ05leHQgRGF0YXNldCddXG5cdCAgICAgICAgICAgIC8vIFsnTmV4dCcsICdQcmV2aW91cyddXG5cdCAgICAgICAgICAgIGlmIChzdWJNZW51TmFtZSA9PT0gJ01pbmltdW0nIHx8IHN1Yk1lbnVOYW1lID09PSAnTWF4aW11bScgfHwgc3ViTWVudU5hbWUgPT09ICdNZWFuJyB8fCBzdWJNZW51TmFtZSA9PT0gJ01lZGlhbicgfHwgc3ViTWVudU5hbWUgPT09ICdTdGFuZGFyZCBEZXZpYXRpb24nKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcihzdWJNZW51TmFtZSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdQcmV2aW91cyBEYXRhc2V0Jykge1xuXHQgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoeyByZWxkYXRhc2V0cG9zaXRpb246IC0xIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnTmV4dCBEYXRhc2V0Jykge1xuXHQgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoeyByZWxkYXRhc2V0cG9zaXRpb246IDEgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdOZXh0Jykge1xuXHQgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoeyByZWxwb3NpdGlvbjogLTEgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdQcmV2aW91cycpIHtcblx0ICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHsgcmVscG9zaXRpb246IDEgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdGaXJzdCcpIHtcblx0ICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHsgcG9zaXRpb246IDAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdNaWQnKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7IHBvc2l0aW9uOiAnbWlkJyB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ0xhc3QnKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7IHBvc2l0aW9uOiAnbGFzdCcgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdDdXN0b20gUG9zaXRpb24nKSB7XG5cdCAgICAgICAgICAgICAgcG9wdXAoZnVuY3Rpb24gKHN0cikge1xuXHQgICAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7IHBvc2l0aW9uOiBwYXJzZUludChzdHIpIH0pO1xuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLmFjdGlvbiA9ICdjbGljayc7XG5cdCAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcblx0ICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaChzdWJPYmopO1xuXHQgICAgICAgICAgaWYgKGogIT09IGdhT3B0aW9uc09ialtpXS5sZW5ndGggLSAxKSB7XG5cdCAgICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaCh7XG5cdCAgICAgICAgICAgICAgJyc6IHtcblx0ICAgICAgICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkNWQyZDInLFxuXHQgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxuXHQgICAgICAgICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuXHQgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMHB4J1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBnYU9wdGlvbnNPYmpbaV0ubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgIF9sb29wMihqKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgY29udGV4dEFycmF5LnB1c2gob2JqKTtcblx0ICAgICAgY29udGV4dEFycmF5LnB1c2goe1xuXHQgICAgICAgICcnOiB7XG5cdCAgICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZDVkMmQyJyxcblx0ICAgICAgICAgICAgaGVpZ2h0OiAnMXB4Jyxcblx0ICAgICAgICAgICAgbWFyZ2luOiAnMXB4Jyxcblx0ICAgICAgICAgICAgcGFkZGluZzogJzBweCdcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBmb3IgKHZhciBpIGluIGdhT3B0aW9uc09iaikge1xuXHQgICAgICBfbG9vcChpKTtcblx0ICAgIH1cblx0XG5cdCAgICBjb250ZXh0QXJyYXkucHVzaCh7XG5cdCAgICAgICcmbmJzcDsgJm5ic3A7IFJlc2V0IFZpZXcnOiB7XG5cdCAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICAgIHNlbGYuYW5hbHlzZXIoJ3Jlc2V0Jyk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBhY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgc3R5bGU6IHN1YkNhdFN0eWxlXG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGNvbnRleHRNZW51LmFwcGVuZEFzTGlzdChjb250ZXh0QXJyYXkpO1xuXHRcblx0ICAgIHRoaXMuU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ0NvbnRleHRJY29uJywgZnVuY3Rpb24gKHBvc3gsIHBvc3ksIHJhZCkge1xuXHQgICAgICB2YXIgeCA9IHBvc3gsXG5cdCAgICAgICAgICB5ID0gcG9zeSxcblx0ICAgICAgICAgIHIgPSByYWQgKiAyLFxuXHQgICAgICAgICAgc3BhY2UgPSBNYXRoLnJvdW5kKHIgLyA0KSxcblx0ICAgICAgICAgIGhhbGZXaWR0aCA9IE1hdGgucm91bmQociAvIDIpICogMC43LFxuXHQgICAgICAgICAgc3RhcnRYID0geCAtIGhhbGZXaWR0aCxcblx0ICAgICAgICAgIGVuZFggPSB4ICsgaGFsZldpZHRoLFxuXHQgICAgICAgICAgc3RhcnRZID0geSArIHNwYWNlLFxuXHQgICAgICAgICAgZW5kWSA9IHkgLSBzcGFjZTtcblx0ICAgICAgcmV0dXJuIFsnTScsIHN0YXJ0WCwgeSwgJ0wnLCBlbmRYLCB5LCAnTScsIHN0YXJ0WCwgc3RhcnRZLCAnTCcsIGVuZFgsIHN0YXJ0WSwgJ00nLCBzdGFydFgsIGVuZFksICdMJywgZW5kWCwgZW5kWV07XG5cdCAgICB9KTtcblx0XG5cdCAgICBncm91cC5hZGRTeW1ib2woY29udGV4dE1lbnUpO1xuXHQgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuXHQgICAgcmV0dXJuIHRvb2xiYXI7XG5cdCAgfTtcblx0XG5cdCAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmdldExvZ2ljYWxTcGFjZSA9IGZ1bmN0aW9uIChhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KSB7XG5cdCAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuXHQgICAgdmFyIGxvZ2ljYWxTcGFjZSxcblx0ICAgICAgICB3aWR0aCA9IDAsXG5cdCAgICAgICAgaGVpZ2h0ID0gMCxcblx0ICAgICAgICBpLFxuXHQgICAgICAgIGxuO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuXHQgICAgICB3aWR0aCA9IE1hdGgubWF4KGxvZ2ljYWxTcGFjZS53aWR0aCwgd2lkdGgpO1xuXHQgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcblx0ICAgICAgdGhpcy50b29sYmFyc1tpXS5oZWlnaHQgPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuXHQgICAgfVxuXHQgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHdpZHRoOiB3aWR0aCA+IGF2YWlsYWJsZVdpZHRoID8gMCA6IHdpZHRoLFxuXHQgICAgICBoZWlnaHQ6IGhlaWdodCA+IGF2YWlsYWJsZUhlaWdodCA/IDAgOiBoZWlnaHRcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnBsYWNlSW5DYW52YXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgX3NlbGYucGFkZGluZyA9IDU7XG5cdCAgICBfc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcblx0ICAgICAgbmFtZTogZnVuY3Rpb24gbmFtZSgpIHtcblx0ICAgICAgICByZXR1cm4gJ1Rvb2xCb3hFeHQnO1xuXHQgICAgICB9LFxuXHQgICAgICByZWY6IGZ1bmN0aW9uIHJlZihvYmopIHtcblx0ICAgICAgICByZXR1cm4gb2JqWycwJ107XG5cdCAgICAgIH0sXG5cdCAgICAgIHNlbGY6IGZ1bmN0aW9uIHNlbGYoKSB7XG5cdCAgICAgICAgcmV0dXJuIF9zZWxmO1xuXHQgICAgICB9LFxuXHQgICAgICBwcmlvcml0eTogZnVuY3Rpb24gcHJpb3JpdHkoKSB7XG5cdCAgICAgICAgcmV0dXJuIDI7XG5cdCAgICAgIH0sXG5cdCAgICAgIGxheW91dDogZnVuY3Rpb24gbGF5b3V0KG9iaikge1xuXHQgICAgICAgIHJldHVybiBvYmouaW5saW5lO1xuXHQgICAgICB9LFxuXHQgICAgICBvcmllbnRhdGlvbjogW3tcblx0ICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgcG9zaXRpb246IFt7XG5cdCAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICByZXR1cm4gb2JqLnRvcDtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG5cdCAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIG9iai5yaWdodDtcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5nZXRQYXJlbnRDb21wb25lbnRHcm91cCgpO1xuXHQgICAgICAgICAgICAgIHJldHVybiBfc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG5cdCAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH1dXG5cdCAgICAgIH1dXG5cdCAgICB9XSk7XG5cdCAgfTtcblx0XG5cdCAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnNldERyYXdpbmdDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG5cdCAgICB2YXIgbWVzID0gdGhpcy5tZWFzdXJlbWVudDtcblx0ICAgIG1lcy54ID0geDtcblx0ICAgIG1lcy55ID0geTtcblx0ICAgIG1lcy53aWR0aCA9IHdpZHRoO1xuXHQgICAgbWVzLmhlaWdodCA9IGhlaWdodDtcblx0XG5cdCAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG5cdCAgICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuXHQgICAgICAgIGxuLFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgdG9vbGJhcjtcblx0ICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcblx0ICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcblx0ICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG5cdCAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcblx0ICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcblx0ICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcblx0ICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuXHQgICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEZ1c2lvbkNoYXJ0cy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdHcm93dGhBbmFseXNlckV4dCcsIEdyb3d0aEFuYWx5c2VyRXh0KTtcblx0fV0pO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgR3Jvd3RoQW5hbHlzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gR3Jvd3RoQW5hbHlzZXIoZGF0YSkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdyb3d0aEFuYWx5c2VyKTtcblx0XG5cdCAgICB0aGlzLmRhdGEgPSBkYXRhLm1hcChmdW5jdGlvbiAoYSkge1xuXHQgICAgICByZXR1cm4gYS5tYXAoZnVuY3Rpb24gKGIpIHtcblx0ICAgICAgICByZXR1cm4gYjtcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICAgIHRoaXMuRm9ybXVsYWUgPSBGb3JtdWxhZTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhHcm93dGhBbmFseXNlciwgW3tcblx0ICAgIGtleTogJ2FuYWx5c2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGFuYWx5c2UobW9kZSkge1xuXHQgICAgICB2YXIgaSA9IDAsXG5cdCAgICAgICAgICBpaSA9IDAsXG5cdCAgICAgICAgICBqID0gMCxcblx0ICAgICAgICAgIGpqID0gMCxcblx0ICAgICAgICAgIG51bSA9IDAsXG5cdCAgICAgICAgICBjaGVja0FyciA9IFtdLFxuXHQgICAgICAgICAgY2hlY2tOdW0gPSAwLFxuXHQgICAgICAgICAgZGF0YUFyID0gdGhpcy5kYXRhLFxuXHQgICAgICAgICAgbkRhdGFBciA9IFtdLFxuXHQgICAgICAgICAgdGVtcEFyID0gW10sXG5cdCAgICAgICAgICB0ZW1wID0gMDtcblx0ICAgICAgaWYgKHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJyAmJiBtb2RlLnRvTG93ZXJDYXNlKCkgPT09ICdyZXNldCcpIHtcblx0ICAgICAgICByZXR1cm4gZGF0YUFyLm1hcChmdW5jdGlvbiAoYSkge1xuXHQgICAgICAgICAgcmV0dXJuIGEubWFwKGZ1bmN0aW9uIChiKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBiO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUpKSB7XG5cdCAgICAgICAgLy8gSGFuZGxpbmcgYSBudW1iZXJcblx0ICAgICAgICBjaGVja051bSA9ICttb2RlO1xuXHQgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcblx0ICAgICAgICAgIHRlbXBBciA9IFtdO1xuXHQgICAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHQgICAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG5cdCAgICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgbW9kZSA9IHRoaXMuRm9ybXVsYWVbbW9kZV07XG5cdCAgICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgICAgdGVtcEFyID0gW107XG5cdCAgICAgICAgICBjaGVja051bSA9IG1vZGUoZGF0YUFyW2ldKTtcblx0ICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcblx0ICAgICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuXHQgICAgICAgICAgICBpZiAoY2hlY2tOdW0gPT09IDApIHtcblx0ICAgICAgICAgICAgICB0ZW1wID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHRlbXAgPSAxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGVtcEFyLnB1c2godGVtcCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucmVscG9zaXRpb24pKSB7XG5cdCAgICAgICAgbW9kZSA9IG1vZGUucmVscG9zaXRpb247XG5cdCAgICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgICAgdGVtcEFyID0gW107XG5cdCAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG5cdCAgICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcblx0ICAgICAgICAgICAgaWYgKGogKyBtb2RlID49IDAgJiYgaiArIG1vZGUgPCBqaikge1xuXHQgICAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW2ogKyBtb2RlXTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBjaGVja051bSA9IG51bTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnBvc2l0aW9uKSB8fCB0eXBlb2YgbW9kZS5wb3NpdGlvbiA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBtb2RlID0gbW9kZS5wb3NpdGlvbjtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXTtcblx0ICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcblx0ICAgICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuXHQgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2xhc3QnKSB7XG5cdCAgICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bamogLSAxXTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnbWlkJykge1xuXHQgICAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW2pqIC8gMl07XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kZSA+PSAwICYmIG1vZGUgPCBqaikge1xuXHQgICAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW21vZGVdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNoZWNrTnVtID0gbnVtO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucmVsZGF0YXNldHBvc2l0aW9uKSkge1xuXHQgICAgICAgIG1vZGUgPSBtb2RlLnJlbGRhdGFzZXRwb3NpdGlvbjtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXTtcblx0ICAgICAgICAgIGlmIChpICsgbW9kZSA+PSAwICYmIGkgKyBtb2RlIDwgaWkpIHtcblx0ICAgICAgICAgICAgY2hlY2tBcnIgPSBkYXRhQXJbaSArIG1vZGVdO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2hlY2tBcnIgPSBkYXRhQXJbaV07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG5cdCAgICAgICAgICAgIGNoZWNrTnVtID0gY2hlY2tBcnJbal07XG5cdCAgICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcblx0ICAgICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIG51bSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgZm9yIChpID0gMCwgaWkgPSBuRGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcblx0ICAgICAgICBmb3IgKGogPSAwLCBqaiA9IG5EYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHQgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobkRhdGFBcltpXVtqXSkpIHtcblx0ICAgICAgICAgICAgbkRhdGFBcltpXVtqXSA9IG51bGw7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBuRGF0YUFyO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEdyb3d0aEFuYWx5c2VyO1xuXHR9KCk7XG5cdFxuXHR2YXIgRm9ybXVsYWUgPSB7XG5cdCAgTWluaW11bTogZnVuY3Rpb24gTWluaW11bShhcnIpIHtcblx0ICAgIHJldHVybiBhcnIucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgIHJldHVybiBhID4gYiA/IGIgOiBhO1xuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBNYXhpbXVtOiBmdW5jdGlvbiBNYXhpbXVtKGFycikge1xuXHQgICAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIE1lYW46IGZ1bmN0aW9uIE1lYW4oYXJyKSB7XG5cdCAgICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYSArIGI7XG5cdCAgICB9KSAvIGFyci5sZW5ndGg7XG5cdCAgfSxcblx0ICBNZWRpYW46IGZ1bmN0aW9uIE1lZGlhbihhcnIpIHtcblx0ICAgIHJldHVybiBhcnIubWFwKGZ1bmN0aW9uIChhKSB7XG5cdCAgICAgIHJldHVybiBhO1xuXHQgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYSAtIGI7XG5cdCAgICB9KVthcnIubGVuZ3RoIC8gMl07XG5cdCAgfSxcblx0ICAnU3RhbmRhcmQgRGV2aWF0aW9uJzogZnVuY3Rpb24gU3RhbmRhcmREZXZpYXRpb24odmFsdWVzKSB7XG5cdCAgICBmdW5jdGlvbiBhdmVyYWdlKGRhdGEpIHtcblx0ICAgICAgdmFyIHN1bSwgYXZnO1xuXHQgICAgICBzdW0gPSBkYXRhLnJlZHVjZShmdW5jdGlvbiAoc3VtLCB2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiBzdW0gKyB2YWx1ZTtcblx0ICAgICAgfSwgMCk7XG5cdFxuXHQgICAgICBhdmcgPSBzdW0gLyBkYXRhLmxlbmd0aDtcblx0ICAgICAgcmV0dXJuIGF2Zztcblx0ICAgIH1cblx0ICAgIHZhciBhdmcgPSAwLFxuXHQgICAgICAgIHNxdWFyZURpZmZzID0gMCxcblx0ICAgICAgICBzcXJEaWZmID0gMCxcblx0ICAgICAgICBhdmdTcXVhcmVEaWZmID0gMCxcblx0ICAgICAgICBzdGREZXYgPSAwLFxuXHQgICAgICAgIGRpZmYgPSAwO1xuXHQgICAgYXZnID0gYXZlcmFnZSh2YWx1ZXMpO1xuXHQgICAgc3F1YXJlRGlmZnMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICBkaWZmID0gdmFsdWUgLSBhdmc7XG5cdCAgICAgIHNxckRpZmYgPSBkaWZmICogZGlmZjtcblx0ICAgICAgcmV0dXJuIHNxckRpZmY7XG5cdCAgICB9KTtcblx0ICAgIGF2Z1NxdWFyZURpZmYgPSBhdmVyYWdlKHNxdWFyZURpZmZzKTtcblx0ICAgIHN0ZERldiA9IE1hdGguc3FydChhdmdTcXVhcmVEaWZmKTtcblx0ICAgIHJldHVybiBzdGREZXY7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBHcm93dGhBbmFseXNlcjtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGdyb3d0aC1hbmFseXNlci1lczUubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNjFmYjhiOTczMGZhZDU5YWU0OWIiLCJjb25zdCBHcm93dGhBbmFseXNlciA9IHJlcXVpcmUoJy4vZ3Jvd3RoYW5hbHlzZXInKTtcblxuRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3ByaXZhdGUnLCAnZ3Jvd3RoLWFuYWx5c2VyLWV4dCcsIGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gR3Jvd3RoQW5hbHlzZXJFeHQgKCkge1xuICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG4gICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcbiAgICB0aGlzLkNvbXBvbmVudEdyb3VwID0gdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwO1xuICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG4gIH1cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3Jvd3RoQW5hbHlzZXJFeHQ7XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnJlbmRlckNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hhcnRJbnN0YW5jZSA9IHRoaXMudHNPYmplY3QuY2hhcnRJbnN0YW5jZSxcbiAgICAgIGNvbXBvbmVudFN0b3JlID0gY2hhcnRJbnN0YW5jZS5hcGlJbnN0YW5jZS5nZXRDb21wb25lbnRTdG9yZSgpLFxuICAgICAgaSA9IDA7XG4gICAgZm9yIChpID0gMDsgY29tcG9uZW50U3RvcmUuZ2V0Q2FudmFzQnlJbmRleChpKTsgKytpKSB7XG4gICAgICBjb21wb25lbnRTdG9yZS5nZXRDYW52YXNCeUluZGV4KGkpLmdldENvbXBvc2l0aW9uKCkuUGxvdE1hbmFnZXIucGxvdCgpO1xuICAgIH1cbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuYW5hbHlzZXIgPSBmdW5jdGlvbiAobW9kZSkge1xuICAgIHZhciBnYSA9IHRoaXMuZ2EgfHwge30sXG4gICAgICBzdG9yZSA9IHRoaXMudHNPYmplY3QuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcbiAgICAgIGNhbnZhcyA9IHN0b3JlLmdldENhbnZhc0J5SW5kZXgoMCksXG4gICAgICBuYXYgPSBzdG9yZS5nZXROYXZpZ2F0b3JCeUluZGV4KDApLFxuICAgICAgY29tcCA9IGNhbnZhcy5nZXRDb21wb3NpdGlvbigpLFxuICAgICAgZHMgPSBnYS5kcyB8fCBjb21wLmRhdGFzZXQsXG4gICAgICBpLFxuICAgICAgaWRNYXAgPSBnYS5pZE1hcCB8fCB7fSxcbiAgICAgIHN0b3JlQXIgPSBnYS5zdG9yZUFyIHx8IFtdLFxuICAgICAgblN0b3JlQXJyID0gW10sXG4gICAgICB5QXhpcyA9IGNhbnZhcy5jb21wb3NpdGlvbi55QXhpcztcbiAgICAvLyBDaGFuZ2luZyB5IEF4aXMgZm9ybWF0dG9yXG4gICAgaWYgKG1vZGUgPT09ICdyZXNldCcpIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCArICclJztcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIERlY2xhcmF0aW9uIGVuZHNcbiAgICB0aGlzLmdhID0gZ2E7XG4gICAgaWYgKCFnYS5zdG9yZUFyKSB7XG4gICAgICBzdG9yZSA9IHt9O1xuICAgICAgaWYgKCFnYS5pZE1hcCkge1xuICAgICAgICBkcy5mb3JFYWNoU2VyaWVzKGZ1bmN0aW9uIChhLCBiLCBjLCBzZXJpZXMpIHtcbiAgICAgICAgICBzdG9yZVtzZXJpZXMuZ2V0SWQoKV0gPSBzZXJpZXMuZ2V0T3JpZ2luYWxEYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGkgaW4gc3RvcmUpIHtcbiAgICAgICAgICBzdG9yZUFyLnB1c2goc3RvcmVbaV0pO1xuICAgICAgICAgIGlkTWFwW2ldID0gc3RvcmVBci5sZW5ndGggLSAxO1xuICAgICAgICAgIC8vID0gc3RvcmVbaV0ubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiAyMCAqIGUgKyAoTWF0aC5yYW5kb20oKSAqIDEwMDApOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBnYS5pZE1hcCA9IGlkTWFwO1xuICAgICAgICBnYS5kcyA9IGRzO1xuICAgICAgICBnYS5zdG9yZUFyID0gc3RvcmVBcjtcbiAgICAgICAgZ2EuZ0FuYWx5c2VyID0gbmV3IEdyb3d0aEFuYWx5c2VyKHN0b3JlQXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBuU3RvcmVBcnIgPSBnYS5nQW5hbHlzZXIuYW5hbHlzZShtb2RlKTtcbiAgICBkcy5zZXREYXRhQnlTZXJpZXMoZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgaWYgKG5TdG9yZUFyci5sZW5ndGgpIHtcbiAgICAgICAgc2VyaWVzLnNldE9yaWdpbmFsRGF0YShuU3RvcmVBcnJbaWRNYXBbc2VyaWVzLmdldElkKCldXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29tcC5pbXBsLnVwZGF0ZSgpO1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHJlcXVpcmUpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgIHJlcXVpcmUoW1xuICAgICAgJ3hBeGlzJyxcbiAgICAgICd5QXhpcycsXG4gICAgICAnZ3JhcGhpY3MnLFxuICAgICAgJ2NoYXJ0JyxcbiAgICAgICdkYXRhc2V0JyxcbiAgICAgICdQbG90TWFuYWdlcicsXG4gICAgICAnY2FudmFzQ29uZmlnJyxcbiAgICAgICdNYXJrZXJNYW5hZ2VyJyxcbiAgICAgICdyZWFjdGl2ZU1vZGVsJyxcbiAgICAgICdnbG9iYWxSZWFjdGl2ZU1vZGVsJyxcbiAgICAgICdzcGFjZU1hbmFnZXJJbnN0YW5jZScsXG4gICAgICAnc21hcnRMYWJlbCcsXG4gICAgICAnY2hhcnRJbnN0YW5jZScsXG4gICAgICAnY2FudmFzRGF0YScsXG4gICAgICBmdW5jdGlvbiAoXG4gICAgICAgICAgICB4QXhpcyxcbiAgICAgICAgICAgIHlBeGlzLFxuICAgICAgICAgICAgZ3JhcGhpY3MsXG4gICAgICAgICAgICBjaGFydCxcbiAgICAgICAgICAgIGRhdGFzZXQsXG4gICAgICAgICAgICBwbG90TWFuYWdlcixcbiAgICAgICAgICAgIGNhbnZhc0NvbmZpZyxcbiAgICAgICAgICAgIG1hcmtlck1hbmFnZXIsXG4gICAgICAgICAgICByZWFjdGl2ZU1vZGVsLFxuICAgICAgICAgICAgZ2xvYmFsUmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgIHNwYWNlTWFuYWdlckluc3RhbmNlLFxuICAgICAgICAgICAgc21hcnRMYWJlbCxcbiAgICAgICAgICAgIGNoYXJ0SW5zdGFuY2UsXG4gICAgICAgICAgICBjYW52YXNEYXRhKSB7XG4gICAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG4gICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuICAgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcbiAgICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuICAgICAgICBpbnN0YW5jZS5jaGFydEluc3RhbmNlID0gY2hhcnRJbnN0YW5jZTtcbiAgICAgICAgaW5zdGFuY2UuY2FudmFzRGF0YSA9IGNhbnZhc0RhdGE7XG4gICAgICB9XG4gICAgXSk7XG4gICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWw7XG4gICAgdGhpcy50c09iamVjdCA9IGluc3RhbmNlLmNoYXJ0SW5zdGFuY2U7XG4gICAgdGhpcy5zdGFydER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcbiAgICB0aGlzLmVuZER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcbiAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG4gICAgdGhpcy50b29sYmFycyA9IFtdO1xuICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcbiAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5jcmVhdGVUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0b29sYmFyLFxuICAgICAgZ3JvdXAsXG4gICAgICBzZWxmID0gdGhpcyxcbiAgICAgIGNvbnRleHRNZW51LFxuICAgICAgY29udGV4dEFycmF5ID0gW10sXG4gICAgICBnYU9wdGlvbnNPYmogPSB7fSxcbiAgICAgIHBvcHVwLFxuICAgICAgcGFwZXIgPSB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnRDb250YWluZXIgPSB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lcixcbiAgICAgIHN1YkNhdFN0eWxlID0ge1xuICAgICAgICAnZm9udC1zaXplJzogJzEycHgnLFxuICAgICAgICAnY29sb3InOiAnIzY5Njk2OScsXG4gICAgICAgICdmb250RmFtaWx5JzogJ015cmlhZCBQcm8nXG4gICAgICB9LFxuICAgICAgY2F0U3R5bGUgPSB7XG4gICAgICAgICdmb250LXNpemUnOiAnMTNweCcsXG4gICAgICAgICdjb2xvcic6ICcjNjk2OTY5JyxcbiAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ015cmlhZCBQcm8gU2VtaWJvbGQnXG4gICAgICB9O1xuXG4gICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9KTtcblxuICAgIHRvb2xiYXIuc2V0Q29uZmlnKHtcbiAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgIH0pO1xuXG4gICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9KTtcblxuICAgIGdyb3VwLnNldENvbmZpZyh7XG4gICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICBib3JkZXJUaGlja25lc3M6IDBcbiAgICB9KTtcblxuICAgIGdhT3B0aW9uc09iaiA9IHtcbiAgICAgICdGaXhlZC1OdW1iZXInOiAnZGlhbG9nQm94JyxcbiAgICAgICdGdW5jdGlvbnMnOiBbJ01pbmltdW0nLCAnTWF4aW11bScsICdNZWFuJywgJ01lZGlhbicsICdTdGFuZGFyZCBEZXZpYXRpb24nXSxcbiAgICAgICdQb3NpdGlvbic6IFsnRmlyc3QnLCAnTWlkJywgJ0xhc3QnLCAnQ3VzdG9tIFBvc2l0aW9uJ10sXG4gICAgICAnRGF0YXNldCc6IFsnUHJldmlvdXMgRGF0YXNldCcsICdOZXh0IERhdGFzZXQnXSxcbiAgICAgICdSZWxhdGl2ZS1Qb3NpdGlvbic6IFsnTmV4dCcsICdQcmV2aW91cyddXG4gICAgfTtcblxuICAgIGNvbnRleHRNZW51ID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2xXaXRoQ29udGV4dCgnQ29udGV4dEljb24nLCB7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSwge1xuICAgICAgd2lkdGg6IDI0LFxuICAgICAgaGVpZ2h0OiAyNCxcbiAgICAgIHBvc2l0aW9uOiAncmlnaHQnLFxuICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICBzdHJva2VXaWR0aDogJzEnLFxuICAgICAgcmFkaXVzOiAnMScsXG4gICAgICBzeW1ib2xTdHJva2U6ICcjNjk2OTY5JyxcbiAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAnMidcbiAgICB9KTtcblxuICAgIGNvbnRleHRBcnJheS5wdXNoKHtcbiAgICAgICdHcm93dGggQW5hbHlzZXInOiB7XG4gICAgICAgIHN0eWxlOiBjYXRTdHlsZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHBvcHVwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgYm94LFxuICAgICAgICBoZWFkZXIsXG4gICAgICAgIHN0eWxlID0ge1xuICAgICAgICAgIGZvbnRTaXplOiAxMCArICdweCcsXG4gICAgICAgICAgbGluZUhlaWdodDogMTUgKyAncHgnLFxuICAgICAgICAgIGZvbnRGYW1pbHk6ICdMdWNpZGEgR3JhbmRlJyxcbiAgICAgICAgICBzdHJva2U6ICcjNjc2NzY3JyxcbiAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogJzInXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRlcldpZHRoID0gMTgwLFxuICAgICAgICBoZWFkZXJUZXh0LFxuICAgICAgICBjcm9zcyxcbiAgICAgICAgaW5wdXRGaWVsZCxcbiAgICAgICAgYXBwbHlCdXR0b24sXG4gICAgICAgIHggPSA1MDAsXG4gICAgICAgIHkgPSAxMDA7XG5cbiAgICAgIGJveCA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJyNmN2Y3ZjcnLFxuICAgICAgICB4OiB4IC0gMjAwLFxuICAgICAgICB5OiB5ICsgMTAwLFxuICAgICAgICB3aWR0aDogMTgwLFxuICAgICAgICBoZWlnaHQ6IDgwXG4gICAgICB9LCBzdHlsZSwgY2hhcnRDb250YWluZXIpO1xuXG4gICAgICBoZWFkZXIgPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICcjZThlOGU4JyxcbiAgICAgICAgd2lkdGg6IGhlYWRlcldpZHRoLFxuICAgICAgICBoZWlnaHQ6IDIwXG4gICAgICB9LCBzdHlsZSwgYm94KTtcblxuICAgICAgaGVhZGVyVGV4dCA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgd2lkdGg6IGhlYWRlcldpZHRoICogMC42LFxuICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICB4OiAxMCxcbiAgICAgICAgeTogMlxuICAgICAgfSwgc3R5bGUsIGhlYWRlcik7XG5cbiAgICAgIGhlYWRlclRleHQuYXR0cih7XG4gICAgICAgIHRleHQ6ICdQcm92aWRlIFNwZWNpZmljIFZhbHVlJ1xuICAgICAgfSk7XG5cbiAgICAgIGNyb3NzID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICB3aWR0aDogMTAsXG4gICAgICAgIGhlaWdodDogMTAsXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICBmbG9hdDogJ3JpZ2h0JyxcbiAgICAgICAgdGV4dDogJ1gnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuICAgICAgfSwgc3R5bGUsIGhlYWRlcik7XG5cbiAgICAgIGNyb3NzLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm94LmhpZGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnB1dEZpZWxkID0gcGFwZXIuaHRtbCgnaW5wdXQnLCB7XG4gICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIHg6IDEwLFxuICAgICAgICB5OiAzMFxuICAgICAgfSwgc3R5bGUsIGJveCk7XG5cbiAgICAgIGFwcGx5QnV0dG9uID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICB3aWR0aDogNTAsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIHg6IDEyMCxcbiAgICAgICAgeTogMzAsXG4gICAgICAgIGZpbGw6ICcjNTU1NTU1J1xuICAgICAgfSwge1xuICAgICAgICBmb250U2l6ZTogMTAgKyAncHgnLFxuICAgICAgICBsaW5lSGVpZ2h0OiAxNSArICdweCcsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdMdWNpZGEgR3JhbmRlJyxcbiAgICAgICAgZmlsbDogJyNlYWVhZWEnLFxuICAgICAgICBjb2xvcjogJyNlYWVhZWEnLFxuICAgICAgICBzdHJva2U6ICcjZWFlYWVhJyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgIH0sIGJveCk7XG5cbiAgICAgIGFwcGx5QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm94LmhpZGUoKTtcbiAgICAgICAgY2FsbGJhY2soaW5wdXRGaWVsZC52YWwoKSk7XG4gICAgICB9KTtcbiAgICAgIGFwcGx5QnV0dG9uLmF0dHIoe1xuICAgICAgICB0ZXh0OiAnQXBwbHknXG4gICAgICB9KTtcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5mb2N1cygpO1xuICAgICAgZnVuY3Rpb24gaW5wdXRGaWVsZE51bWJlckhhbmRsZXIgKCkge1xuICAgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUgPSBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUucmVwbGFjZSgvW15cXGQuLV0vZywgJycpO1xuICAgICAgfVxuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaW5wdXRGaWVsZE51bWJlckhhbmRsZXIpO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsncG9zaXRpb24nXSA9ICdyZWxhdGl2ZSc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydiYWNrZ3JvdW5kQ29sb3InXSA9ICcjZDJkMmQyJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzJweCBzb2xpZCAjY2JjYmNiJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ3BhZGRpbmcnXSA9ICcwcHggMHB4IDMuNXB4IDJweCc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyM4YzhjOGMnO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnbWFyZ2luJ10gPSAnMXB4IDJweCc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydmbG9hdCddID0gJ3JpZ2h0JztcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4JztcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMnB4IHNvbGlkICNkYWRiZGEnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4JztcbiAgICAgIGJveC5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcxcHggc29saWQgI2Q0ZDJkMyc7XG4gICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMXB4IHNvbGlkICNkNGQyZDMnO1xuICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ3dpZHRoJ10gPSAnMTc5cHgnO1xuICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExLjVweCc7XG4gICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzAuNXB4JztcbiAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjNjc2NzY3JztcbiAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWydmb250RmFtaWx5J10gPSAnTXlyaWFkIHBybyBTZW1pYm9sZCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWyd0ZXh0QWxpZ24nXSA9ICdjZW50ZXInO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnZm9udFNpemUnXSA9ICcxMXB4JztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ3BhZGRpbmdUb3AnXSA9ICczcHgnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnYm9yZGVyUmFkaXVzJ10gPSAnM3B4JztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ2NvbG9yJ10gPSAnI2U0ZTRlNCc7XG4gICAgfTtcblxuICAgIGZvciAobGV0IGkgaW4gZ2FPcHRpb25zT2JqKSB7XG4gICAgICBsZXQga2V5LFxuICAgICAgICBvYmogPSB7fSxcbiAgICAgICAgc3ViT2JqID0ge307XG4gICAgICBpZiAoZ2FPcHRpb25zT2JqW2ldID09PSAnZGlhbG9nQm94Jykge1xuICAgICAgICBrZXkgPSAnJm5ic3A7ICZuYnNwOyAnICsgaTtcbiAgICAgICAgb2JqW2tleV0gPSB7fTtcbiAgICAgICAgb2JqW2tleV0gPSB7XG4gICAgICAgICAgc3R5bGU6IHN1YkNhdFN0eWxlLFxuICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGxldCBwb3B1cFZhbCA9IHBvcHVwKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIC8vICAgc2VsZi5hbmFseXNlcihwYXJzZUludChzdHIpKTtcbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgaWYgKGkgPT09ICdGaXhlZC1OdW1iZXInKSB7XG4gICAgICAgICAgICAgIC8vIHNlbGYuYW5hbHlzZXIocGFyc2VJbnQod2luZG93LnByb21wdCgnRW50ZXIgdmFsdWUnKSkpO1xuICAgICAgICAgICAgICBsZXQgcG9wdXBWYWwgPSBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcihwYXJzZUludChzdHIpKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09ICdQb3NpdGlvbicpIHtcbiAgICAgICAgICAgICAgbGV0IHBvcHVwVmFsID0gcG9wdXAoZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3Bvc2l0aW9uOiBzdHJ9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleSA9ICcmIzk2NjYmbmJzcDsgJyArIGk7XG4gICAgICAgIG9ialtrZXldID0ge307XG4gICAgICAgIG9ialtrZXldLmFjdGlvbiA9ICdjbGljayc7XG4gICAgICAgIG9ialtrZXldLnN0eWxlID0gc3ViQ2F0U3R5bGU7XG4gICAgICAgIG9ialtrZXldLmhhbmRsZXIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYU9wdGlvbnNPYmpbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBsZXQgc3ViTWVudU5hbWUgPSBnYU9wdGlvbnNPYmpbaV1bal07XG4gICAgICAgICAgc3ViT2JqID0ge307XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdID0ge307XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLmhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBbJ01pbmltdW0nLCAnTWF4aW11bScsICdNZWFuJywgJ01lZGlhbicsICdTdGFuZGFyZCBEZXZpYXRpb24nXVxuICAgICAgICAgICAgLy8gWydQcmV2aW91cyBEYXRhc2V0JywgJ05leHQgRGF0YXNldCddXG4gICAgICAgICAgICAvLyBbJ05leHQnLCAnUHJldmlvdXMnXVxuICAgICAgICAgICAgaWYgKHN1Yk1lbnVOYW1lID09PSAnTWluaW11bScgfHxcbiAgICAgICAgICAgICAgc3ViTWVudU5hbWUgPT09ICdNYXhpbXVtJyB8fCBzdWJNZW51TmFtZSA9PT0gJ01lYW4nIHx8XG4gICAgICAgICAgICAgIHN1Yk1lbnVOYW1lID09PSAnTWVkaWFuJyB8fCBzdWJNZW51TmFtZSA9PT0gJ1N0YW5kYXJkIERldmlhdGlvbicpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcihzdWJNZW51TmFtZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnUHJldmlvdXMgRGF0YXNldCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cmVsZGF0YXNldHBvc2l0aW9uOiAtMX0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ05leHQgRGF0YXNldCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cmVsZGF0YXNldHBvc2l0aW9uOiAxfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnTmV4dCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cmVscG9zaXRpb246IC0xfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnUHJldmlvdXMnKSB7XG4gICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3JlbHBvc2l0aW9uOiAxfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnRmlyc3QnKSB7XG4gICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3Bvc2l0aW9uOiAwfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnTWlkJykge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHtwb3NpdGlvbjogJ21pZCd9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdMYXN0Jykge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHtwb3NpdGlvbjogJ2xhc3QnfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Yk1lbnVOYW1lID09PSAnQ3VzdG9tIFBvc2l0aW9uJykge1xuICAgICAgICAgICAgICBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7cG9zaXRpb246IHBhcnNlSW50KHN0cil9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uYWN0aW9uID0gJ2NsaWNrJztcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcbiAgICAgICAgICBvYmpba2V5XS5oYW5kbGVyLnB1c2goc3ViT2JqKTtcbiAgICAgICAgICBpZiAoaiAhPT0gZ2FPcHRpb25zT2JqW2ldLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaCh7XG4gICAgICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkNWQyZDInLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMXB4JyxcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogJzFweCcsXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMHB4J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250ZXh0QXJyYXkucHVzaChvYmopO1xuICAgICAgY29udGV4dEFycmF5LnB1c2goe1xuICAgICAgICAnJzoge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZDVkMmQyJyxcbiAgICAgICAgICAgIGhlaWdodDogJzFweCcsXG4gICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuICAgICAgICAgICAgcGFkZGluZzogJzBweCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnRleHRBcnJheS5wdXNoKHtcbiAgICAgICcmbmJzcDsgJm5ic3A7IFJlc2V0IFZpZXcnOiB7XG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLmFuYWx5c2VyKCdyZXNldCcpO1xuICAgICAgICB9LFxuICAgICAgICBhY3Rpb246ICdjbGljaycsXG4gICAgICAgIHN0eWxlOiBzdWJDYXRTdHlsZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29udGV4dE1lbnUuYXBwZW5kQXNMaXN0KGNvbnRleHRBcnJheSk7XG5cbiAgICB0aGlzLlN5bWJvbFN0b3JlLnJlZ2lzdGVyKCdDb250ZXh0SWNvbicsIGZ1bmN0aW9uIChwb3N4LCBwb3N5LCByYWQpIHtcbiAgICAgIHZhciB4ID0gcG9zeCxcbiAgICAgICAgeSA9IHBvc3ksXG4gICAgICAgIHIgPSByYWQgKiAyLFxuICAgICAgICBzcGFjZSA9IE1hdGgucm91bmQociAvIDQpLFxuICAgICAgICBoYWxmV2lkdGggPSBNYXRoLnJvdW5kKHIgLyAyKSAqIDAuNyxcbiAgICAgICAgc3RhcnRYID0gKHggLSBoYWxmV2lkdGgpLFxuICAgICAgICBlbmRYID0gKHggKyBoYWxmV2lkdGgpLFxuICAgICAgICBzdGFydFkgPSAoeSArIHNwYWNlKSxcbiAgICAgICAgZW5kWSA9ICh5IC0gc3BhY2UpO1xuICAgICAgcmV0dXJuIFsnTScsIHN0YXJ0WCwgeSwgJ0wnLCBlbmRYLCB5LCAnTScsIHN0YXJ0WCwgc3RhcnRZLCAnTCcsIGVuZFgsIHN0YXJ0WSwgJ00nLCBzdGFydFgsIGVuZFksICdMJywgZW5kWCwgZW5kWV07XG4gICAgfSk7XG5cbiAgICBncm91cC5hZGRTeW1ib2woY29udGV4dE1lbnUpO1xuICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcbiAgICByZXR1cm4gdG9vbGJhcjtcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuZ2V0TG9naWNhbFNwYWNlID0gZnVuY3Rpb24gKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcbiAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgIHZhciBsb2dpY2FsU3BhY2UsXG4gICAgICB3aWR0aCA9IDAsXG4gICAgICBoZWlnaHQgPSAwLFxuICAgICAgaSxcbiAgICAgIGxuO1xuXG4gICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcbiAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICB9XG4gICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHdpZHRoID4gYXZhaWxhYmxlV2lkdGggPyAwIDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodCA+IGF2YWlsYWJsZUhlaWdodCA/IDAgOiBoZWlnaHRcbiAgICB9O1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5wbGFjZUluQ2FudmFzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgIHNlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG4gICAgICBuYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnVG9vbEJveEV4dCc7XG4gICAgICB9LFxuICAgICAgcmVmOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgIH0sXG4gICAgICBzZWxmOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfSxcbiAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgICAgfSxcbiAgICAgIGxheW91dDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgIH0sXG4gICAgICBvcmllbnRhdGlvbjogW3tcbiAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoucmlnaHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGltZW5zaW9uczogW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKHBhcmVudC5nZXRXaWR0aCgpLCBwYXJlbnQuZ2V0SGVpZ2h0KCkpO1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XVxuICAgICAgICB9XVxuICAgICAgfV1cbiAgICB9XSk7XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLnNldERyYXdpbmdDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgbWVzLnggPSB4O1xuICAgIG1lcy55ID0geTtcbiAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuICAgICAgbG4sXG4gICAgICBpLFxuICAgICAgdG9vbGJhcjtcbiAgICB4ID0geCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueCA6IHg7XG4gICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG4gICAgaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC5oZWlnaHQgOiBoZWlnaHQ7XG4gICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxuID0gdG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ0dyb3d0aEFuYWx5c2VyRXh0JywgR3Jvd3RoQW5hbHlzZXJFeHQpO1xufV0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2V4dGVuc2lvbi5qcyIsIid1c2Ugc3RyaWN0JztcbmNsYXNzIEdyb3d0aEFuYWx5c2VyIHtcbiAgY29uc3RydWN0b3IgKGRhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhLm1hcCgoYSkgPT4ge1xuICAgICAgcmV0dXJuIGEubWFwKChiKSA9PiB7IHJldHVybiBiOyB9KTtcbiAgICB9KTtcbiAgICB0aGlzLkZvcm11bGFlID0gRm9ybXVsYWU7XG4gIH1cbiAgYW5hbHlzZSAobW9kZSkge1xuICAgIGxldCBpID0gMCxcbiAgICAgIGlpID0gMCxcbiAgICAgIGogPSAwLFxuICAgICAgamogPSAwLFxuICAgICAgbnVtID0gMCxcbiAgICAgIGNoZWNrQXJyID0gW10sXG4gICAgICBjaGVja051bSA9IDAsXG4gICAgICBkYXRhQXIgPSB0aGlzLmRhdGEsXG4gICAgICBuRGF0YUFyID0gW10sXG4gICAgICB0ZW1wQXIgPSBbXSxcbiAgICAgIHRlbXAgPSAwO1xuICAgIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycgJiYgbW9kZS50b0xvd2VyQ2FzZSgpID09PSAncmVzZXQnKSB7XG4gICAgICByZXR1cm4gZGF0YUFyLm1hcCgoYSkgPT4ge1xuICAgICAgICByZXR1cm4gYS5tYXAoKGIpID0+IHsgcmV0dXJuIGI7IH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZSkpIHsgLy8gSGFuZGxpbmcgYSBudW1iZXJcbiAgICAgIGNoZWNrTnVtID0gK21vZGU7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1vZGUgPSB0aGlzLkZvcm11bGFlW21vZGVdO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgY2hlY2tOdW0gPSBtb2RlKGRhdGFBcltpXSk7XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgaWYgKGNoZWNrTnVtID09PSAwKSB7XG4gICAgICAgICAgICB0ZW1wID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZW1wID0gMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wQXIucHVzaCh0ZW1wKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnJlbHBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucmVscG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIGlmIChqICsgbW9kZSA+PSAwICYmIGogKyBtb2RlIDwgamopIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW2ogKyBtb2RlXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBudW07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5wb3NpdGlvbikgfHwgdHlwZW9mIG1vZGUucG9zaXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICBtb2RlID0gbW9kZS5wb3NpdGlvbjtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgaWYgKG1vZGUgPT09ICdsYXN0Jykge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bamogLSAxXTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdtaWQnKSB7XG4gICAgICAgICAgICBjaGVja051bSA9IGRhdGFBcltpXVtqaiAvIDJdO1xuICAgICAgICAgIH0gZWxzZSBpZiAobW9kZSA+PSAwICYmIG1vZGUgPCBqaikge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bbW9kZV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gbnVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW0pO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucmVsZGF0YXNldHBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucmVsZGF0YXNldHBvc2l0aW9uO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgaWYgKGkgKyBtb2RlID49IDAgJiYgaSArIG1vZGUgPCBpaSkge1xuICAgICAgICAgIGNoZWNrQXJyID0gZGF0YUFyW2kgKyBtb2RlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja0FyciA9IGRhdGFBcltpXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgY2hlY2tOdW0gPSBjaGVja0FycltqXTtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIG51bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoaSA9IDAsIGlpID0gbkRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBmb3IgKGogPSAwLCBqaiA9IG5EYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShuRGF0YUFyW2ldW2pdKSkge1xuICAgICAgICAgIG5EYXRhQXJbaV1bal0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuRGF0YUFyO1xuICB9XG59XG5cbnZhciBGb3JtdWxhZSA9IHtcbiAgTWluaW11bTogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSA+IGIgPyBiIDogYTtcbiAgICB9KTtcbiAgfSxcbiAgTWF4aW11bTogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSA8IGIgPyBiIDogYTtcbiAgICB9KTtcbiAgfSxcbiAgTWVhbjogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYSArIGI7XG4gICAgfSkgLyBhcnIubGVuZ3RoO1xuICB9LFxuICBNZWRpYW46IChhcnIpID0+IHtcbiAgICByZXR1cm4gYXJyLm1hcCgoYSkgPT4gYSkuc29ydCgoYSwgYikgPT4geyByZXR1cm4gYSAtIGI7IH0pW2Fyci5sZW5ndGggLyAyXTtcbiAgfSxcbiAgJ1N0YW5kYXJkIERldmlhdGlvbic6ICh2YWx1ZXMpID0+IHtcbiAgICBmdW5jdGlvbiBhdmVyYWdlIChkYXRhKSB7XG4gICAgICB2YXIgc3VtLCBhdmc7XG4gICAgICBzdW0gPSBkYXRhLnJlZHVjZShmdW5jdGlvbiAoc3VtLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gc3VtICsgdmFsdWU7XG4gICAgICB9LCAwKTtcblxuICAgICAgYXZnID0gc3VtIC8gZGF0YS5sZW5ndGg7XG4gICAgICByZXR1cm4gYXZnO1xuICAgIH1cbiAgICB2YXIgYXZnID0gMCxcbiAgICAgIHNxdWFyZURpZmZzID0gMCxcbiAgICAgIHNxckRpZmYgPSAwLFxuICAgICAgYXZnU3F1YXJlRGlmZiA9IDAsXG4gICAgICBzdGREZXYgPSAwLFxuICAgICAgZGlmZiA9IDA7XG4gICAgYXZnID0gYXZlcmFnZSh2YWx1ZXMpO1xuICAgIHNxdWFyZURpZmZzID0gdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGRpZmYgPSB2YWx1ZSAtIGF2ZztcbiAgICAgIHNxckRpZmYgPSBkaWZmICogZGlmZjtcbiAgICAgIHJldHVybiBzcXJEaWZmO1xuICAgIH0pO1xuICAgIGF2Z1NxdWFyZURpZmYgPSBhdmVyYWdlKHNxdWFyZURpZmZzKTtcbiAgICBzdGREZXYgPSBNYXRoLnNxcnQoYXZnU3F1YXJlRGlmZik7XG4gICAgcmV0dXJuIHN0ZERldjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHcm93dGhBbmFseXNlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9ncm93dGhhbmFseXNlci5qcyJdLCJzb3VyY2VSb290IjoiIn0=