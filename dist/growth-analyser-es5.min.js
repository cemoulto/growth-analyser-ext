!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1);FusionCharts.register("extension",["private","legend-ext",function(){function t(){this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore}t.prototype.constructor=t,t.prototype.renderChange=function(){var t=this.tsObject.chartInstance,e=t.apiInstance.getComponentStore(),n=0;for(n=0;e.getCanvasByIndex(n);++n)e.getCanvasByIndex(n).getComposition().PlotManager.plot()},t.prototype.analyser=function(t){var e,n=this.ga||{},o=this.tsObject.apiInstance.getComponentStore(),a=o.getCanvasByIndex(0),r=(o.getNavigatorByIndex(0),a.getComposition()),s=n.ds||r.dataset,l=n.idMap||{},h=n.storeAr||[],p=[],c=a.composition.yAxis;if("reset"===t?c.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t){return t}:c.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t){return t+"%"},this.ga=n,!n.storeAr&&(o={},!n.idMap)){s.forEachSeries(function(t,e,n,i){o[i.getId()]=i.getOriginalData()});for(e in o)h.push(o[e]),l[e]=h.length-1;n.idMap=l,n.ds=s,n.storeAr=h,n.gAnalyser=new i(h)}p=n.gAnalyser.analyse(t),s.setDataBySeries(function(t){p.length&&t.setOriginalData(p[l[t.getId()]])}),r.impl.update()},t.prototype.init=function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","chartInstance","canvasData",function(t,n,i,o,a,r,s,l,h,p,c,u,d,g){e.xAxis=t,e.yAxis=n,e.graphics=i,e.chart=o,e.dataset=a,e.plotManager=r,e.markerManager=l,e.canvasConfig=s,e.reactiveModel=h,e.globalReactiveModel=p,e.spaceManagerInstance=c,e.smartLabel=u,e.chartInstance=d,e.canvasData=g}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.tsObject=e.chartInstance,this.startDt=e.globalReactiveModel.model["x-axis-visible-range-start"],this.endDt=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this},t.prototype.createToolbar=function(){var t,e,n,i,o=this,a=[],r={},s=this.graphics.paper,l=this.graphics.container,h={"font-size":"12px",color:"#696969",fontFamily:"Myriad Pro Semibold"};t=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),e=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),r={"Fixed-Number":"dialogBox",Functions:["Minimum","Maximum","Mean","Median","Standard Deviation"],Position:"dialogBox",Dataset:["Previous Dataset","Next Dataset"],"Relative-Position":["Next","Previous"]},n=new this.toolbox.SymbolWithContext("ContextIcon",{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{width:24,height:24,position:"right",stroke:"#ced5d4",symbolStroke:"#696969"}),a.push({"Growth Analyser":{style:{color:"#696969","font-family":"Myriad pro Semibold"}}}),i=function(t){function e(){r.element.value=r.element.value.replace(/[^\d.-]/g,"")}var n,i,o,a,r,h,p={fontSize:"10px",lineHeight:"15px",fontFamily:"Lucida Grande",stroke:"#676767","stroke-width":"2"},c=180,u=500,d=100;n=s.html("div",{fill:"#f7f7f7",x:u-200,y:d+100,width:180,height:80},p,l),i=s.html("div",{fill:"#e8e8e8",width:c,height:20},p,n),o=s.html("div",{fill:"transparent",width:.6*c,height:20,x:10,y:2},p,i),o.attr({text:"Provide Specific Value"}),a=s.html("div",{fill:"transparent",width:10,height:10,position:"relative",float:"right",text:"X",cursor:"pointer"},p,i),a.on("click",function(){n.hide()}),r=s.html("input",{width:100,height:20,x:10,y:30},p,n),h=s.html("div",{width:50,height:20,x:120,y:30,fill:"#555555"},{fontSize:"10px",lineHeight:"15px",fontFamily:"Lucida Grande",fill:"#eaeaea",color:"#eaeaea",stroke:"#eaeaea",cursor:"pointer"},n),h.on("click",function(){n.hide(),t(r.val())}),h.attr({text:"Apply"}),r.element.focus(),r.element.addEventListener("keyup",e),a.element.style.position="relative",a.element.style.backgroundColor="#d2d2d2",a.element.style.border="2px solid #cbcbcb",a.element.style.padding="0px 0px 3.5px 2px",a.element.style.color="#8c8c8c",a.element.style.margin="1px 2px",a.element.style.float="right",r.element.style.marginTop="8px",r.element.style.border="2px solid #dadbda",h.element.style.marginTop="8px",n.element.style.border="1px solid #d4d2d3",i.element.style.border="1px solid #d4d2d3",i.element.style.width="179px",o.element.style.fontSize="11.5px",o.element.style.marginTop="0.5px",o.element.style.color="#676767",i.element.style.fontFamily="Myriad pro Semibold",h.element.style.textAlign="center",h.element.style.fontSize="11px",h.element.style.paddingTop="3px",h.element.style.borderRadius="3px",h.element.style.color="#e4e4e4"};var p=function(t){var e=void 0,n={},s={};if("dialogBox"===r[t])e="&nbsp; &nbsp; "+t,n[e]={},n[e]={style:h,handler:function(){if("Fixed-Number"===t){i(function(t){o.analyser(parseInt(t))})}else if("Position"===t){i(function(t){o.analyser({position:t})})}},action:"click"};else{e="&#9666&nbsp; "+t,n[e]={},n[e].action="click",n[e].style=h,n[e].handler=[];for(var l=function(i){var a=r[t][i];s={},s["&nbsp;"+a]={},s["&nbsp;"+a].handler=function(){"Minimum"===a||"Maximum"===a||"Mean"===a||"Median"===a||"Standard Deviation"===a?o.analyser(a):"Previous Dataset"===a?o.analyser({reldatasetposition:-1}):"Next Dataset"===a?o.analyser({reldatasetposition:1}):"Next"===a?o.analyser({relposition:-1}):"Previous"===a&&o.analyser({relposition:1})},s["&nbsp;"+a].action="click",s["&nbsp;"+a].style=h,n[e].handler.push(s),i!==r[t].length-1&&n[e].handler.push({"":{style:{backgroundColor:"#d5d2d2",height:"1px",margin:"1px",padding:"0px"}}})},p=0;p<r[t].length;p++)l(p)}a.push(n),a.push({"":{style:{backgroundColor:"#d5d2d2",height:"1px",margin:"1px",padding:"0px"}}})};for(var c in r)p(c);return a.push({"&nbsp; &nbsp; Reset":{handler:function(){o.analyser("reset")},action:"click",style:h}}),n.appendAsList(a),this.SymbolStore.register("ContextIcon",function(t,e,n){var i=t,o=e,a=2*n,r=Math.round(a/4),s=.7*Math.round(a/2),l=i-s,h=i+s,p=o+r,c=o-r;return["M",l,o,"L",h,o,"M",l,p,"L",h,p,"M",l,c,"L",h,c]}),e.addSymbol(n),t.addComponent(e),t},t.prototype.getLogicalSpace=function(t,e){t/=2;var n,i,o,a=0,r=0;for(i=0,o=this.toolbars.length;i<o;i++)n=this.toolbars[i].getLogicalSpace(t,e),a=Math.max(n.width,a),r+=n.height,this.toolbars[i].width=n.width,this.toolbars[i].height=n.height;return r+=this.padding,{width:a>t?0:a,height:r>e?0:r}},t.prototype.placeInCanvas=function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"ToolBoxExt"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.right},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])},t.prototype.setDrawingConfiguration=function(t,e,n,i,o){var a=this.measurement;return a.x=t,a.y=e,a.width=n,a.height=i,this.parentGroup=o,this},t.prototype.draw=function(t,e,n,i,o){var a,r,s,l=this.measurement,h=this.toolbars;if(t=void 0===t?l.x:t,e=void 0===e?l.y:e,n=void 0===n?l.width:n,i=void 0===i?l.height:i,o=void 0===o?this.parentGroup:o,n&&i)for(r=0,a=h.length;r<a;r++)s=h[r],s.draw(t,e)},FusionCharts.registerComponent("extensions","legendExt",t)}])},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){n(this,t),this.data=e.map(function(t){return t.map(function(t){return t})}),this.Formulae=a}return i(t,[{key:"analyse",value:function(t){var e=0,n=0,i=0,o=0,a=0,r=[],s=0,l=this.data,h=[],p=[],c=0;if("string"==typeof t&&"reset"===t.toLowerCase())return l.map(function(t){return t.map(function(t){return t})});if(isNaN(t))if("string"==typeof t)for(t=this.Formulae[t],e=0,n=l.length;e<n;++e){for(p=[],s=t(l[e]),i=0,o=l[e].length;i<o;++i)a=l[e][i],c=0===s?void 0:100*(a-s)/s,p.push(c);h.push(p)}else if(isNaN(t.relposition))if(isNaN(t.position)){if(!isNaN(t.reldatasetposition))for(t=t.reldatasetposition,e=0,n=l.length;e<n;++e){for(p=[],r=e+t>=0&&e+t<n?l[e+t]:l[e],i=0,o=l[e].length;i<o;++i)s=r[i],a=l[e][i],p.push(100*(a-s)/a);h.push(p)}}else for(t=t.position,e=0,n=l.length;e<n;++e){for(p=[],i=0,o=l[e].length;i<o;++i)a=l[e][i],s=t>=0&&t<o?l[e][t]:a,p.push(100*(a-s)/s);h.push(p)}else for(t=t.relposition,e=0,n=l.length;e<n;++e){for(p=[],i=0,o=l[e].length;i<o;++i)a=l[e][i],s=i+t>=0&&i+t<o?l[e][i+t]:a,p.push(100*(a-s)/s);h.push(p)}else for(s=+t,e=0,n=l.length;e<n;++e){for(p=[],i=0,o=l[e].length;i<o;++i)a=l[e][i],p.push(100*(a-s)/s);h.push(p)}for(e=0,n=h.length;e<n;++e)for(i=0,o=h[e].length;i<o;++i)Number.isFinite(h[e][i])||(h[e][i]=null);return h}}]),t}(),a={Minimum:function(t){return t.reduce(function(t,e){return t>e?e:t})},Maximum:function(t){return t.reduce(function(t,e){return t<e?e:t})},Mean:function(t){return t.reduce(function(t,e){return t+e})/t.length},Median:function(t){return t.map(function(t){return t}).sort(function(t,e){return t-e})[t.length/2]},"Standard Deviation":function(t){function e(t){var e,n;return e=t.reduce(function(t,e){return t+e},0),n=e/t.length}var n=0,i=0,o=0,a=0,r=0,s=0;return n=e(t),i=t.map(function(t){return s=t-n,o=s*s}),a=e(i),r=Math.sqrt(a)}};t.exports=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZ3Jvd3RoLWFuYWx5c2VyLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDM1NWZhOGQzNDU5MDE3YTU0MmYyIiwid2VicGFjazovLy8uL3NyYy9leHRlbnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyb3d0aGFuYWx5c2VyLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIkdyb3d0aEFuYWx5c2VyIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJMZWdlbmRFeHQiLCJ0aGlzIiwidG9vbGJveCIsImdldENvbXBvbmVudCIsIkhvcml6b250YWxUb29sYmFyIiwiQ29tcG9uZW50R3JvdXAiLCJTeW1ib2xTdG9yZSIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwicmVuZGVyQ2hhbmdlIiwiY2hhcnRJbnN0YW5jZSIsInRzT2JqZWN0IiwiY29tcG9uZW50U3RvcmUiLCJhcGlJbnN0YW5jZSIsImdldENvbXBvbmVudFN0b3JlIiwiaSIsImdldENhbnZhc0J5SW5kZXgiLCJnZXRDb21wb3NpdGlvbiIsIlBsb3RNYW5hZ2VyIiwicGxvdCIsImFuYWx5c2VyIiwibW9kZSIsImdhIiwic3RvcmUiLCJjYW52YXMiLCJjb21wIiwiZ2V0TmF2aWdhdG9yQnlJbmRleCIsImRzIiwiZGF0YXNldCIsImlkTWFwIiwic3RvcmVBciIsIm5TdG9yZUFyciIsInlBeGlzIiwiY29tcG9zaXRpb24iLCJnZXRTY2FsZU9iaiIsImdldEludGVydmFsT2JqIiwiZ2V0Q29uZmlnIiwibWFqb3IiLCJmb3JtYXR0ZXIiLCJ2YWwiLCJmb3JFYWNoU2VyaWVzIiwiYSIsImIiLCJzZXJpZXMiLCJnZXRJZCIsImdldE9yaWdpbmFsRGF0YSIsInB1c2giLCJsZW5ndGgiLCJnQW5hbHlzZXIiLCJhbmFseXNlIiwic2V0RGF0YUJ5U2VyaWVzIiwic2V0T3JpZ2luYWxEYXRhIiwiaW1wbCIsInVwZGF0ZSIsImluaXQiLCJyZXF1aXJlIiwiaW5zdGFuY2UiLCJ4QXhpcyIsImdyYXBoaWNzIiwiY2hhcnQiLCJwbG90TWFuYWdlciIsImNhbnZhc0NvbmZpZyIsIm1hcmtlck1hbmFnZXIiLCJyZWFjdGl2ZU1vZGVsIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsInNwYWNlTWFuYWdlckluc3RhbmNlIiwic21hcnRMYWJlbCIsImNhbnZhc0RhdGEiLCJzdGFydER0IiwibW9kZWwiLCJlbmREdCIsInN0YXJ0RGF0YXNldCIsImVuZERhdGFzZXQiLCJ0b29sYmFycyIsIm1lYXN1cmVtZW50IiwiY3JlYXRlVG9vbGJhciIsInRvb2xiYXIiLCJncm91cCIsImNvbnRleHRNZW51IiwicG9wdXAiLCJzZWxmIiwiY29udGV4dEFycmF5IiwiZ2FPcHRpb25zT2JqIiwicGFwZXIiLCJjaGFydENvbnRhaW5lciIsImNvbnRhaW5lciIsInN1YkNhdFN0eWxlIiwiZm9udC1zaXplIiwiY29sb3IiLCJmb250RmFtaWx5Iiwic2V0Q29uZmlnIiwiZmlsbCIsImJvcmRlclRoaWNrbmVzcyIsIkZpeGVkLU51bWJlciIsIkZ1bmN0aW9ucyIsIlBvc2l0aW9uIiwiRGF0YXNldCIsIlJlbGF0aXZlLVBvc2l0aW9uIiwiU3ltYm9sV2l0aENvbnRleHQiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwic3Ryb2tlIiwic3ltYm9sU3Ryb2tlIiwiR3Jvd3RoIEFuYWx5c2VyIiwic3R5bGUiLCJmb250LWZhbWlseSIsImNhbGxiYWNrIiwiaW5wdXRGaWVsZE51bWJlckhhbmRsZXIiLCJpbnB1dEZpZWxkIiwiZWxlbWVudCIsInZhbHVlIiwicmVwbGFjZSIsImJveCIsImhlYWRlciIsImhlYWRlclRleHQiLCJjcm9zcyIsImFwcGx5QnV0dG9uIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0Iiwic3Ryb2tlLXdpZHRoIiwiaGVhZGVyV2lkdGgiLCJ4IiwieSIsImh0bWwiLCJhdHRyIiwidGV4dCIsImZsb2F0IiwiY3Vyc29yIiwib24iLCJoaWRlIiwiZm9jdXMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xvb3AiLCJrZXkiLCJvYmoiLCJzdWJPYmoiLCJoYW5kbGVyIiwic3RyIiwicGFyc2VJbnQiLCJhY3Rpb24iLCJfbG9vcDIiLCJqIiwic3ViTWVudU5hbWUiLCJyZWxkYXRhc2V0cG9zaXRpb24iLCJyZWxwb3NpdGlvbiIsIiIsImJhY2tncm91bmRDb2xvciIsIm1hcmdpbiIsInBhZGRpbmciLCImbmJzcDsgJm5ic3A7IFJlc2V0IiwiYXBwZW5kQXNMaXN0IiwicG9zeCIsInBvc3kiLCJyYWQiLCJyIiwic3BhY2UiLCJNYXRoIiwicm91bmQiLCJoYWxmV2lkdGgiLCJzdGFydFgiLCJlbmRYIiwic3RhcnRZIiwiZW5kWSIsImFkZFN5bWJvbCIsImFkZENvbXBvbmVudCIsImdldExvZ2ljYWxTcGFjZSIsImF2YWlsYWJsZVdpZHRoIiwiYXZhaWxhYmxlSGVpZ2h0IiwibG9naWNhbFNwYWNlIiwibG4iLCJtYXgiLCJwbGFjZUluQ2FudmFzIiwiYWRkIiwibmFtZSIsInJlZiIsInByaW9yaXR5IiwibGF5b3V0IiwiaW5saW5lIiwib3JpZW50YXRpb24iLCJ0eXBlIiwiaG9yaXpvbnRhbCIsInRvcCIsImFsaWdubWVudCIsInJpZ2h0IiwiZGltZW5zaW9ucyIsInBhcmVudCIsImdldFBhcmVudENvbXBvbmVudEdyb3VwIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJzZXREcmF3aW5nQ29uZmlndXJhdGlvbiIsIm1lcyIsInBhcmVudEdyb3VwIiwiZHJhdyIsInVuZGVmaW5lZCIsInJlZ2lzdGVyQ29tcG9uZW50IiwiX2NsYXNzQ2FsbENoZWNrIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJkYXRhIiwibWFwIiwiRm9ybXVsYWUiLCJpaSIsImpqIiwibnVtIiwiY2hlY2tBcnIiLCJjaGVja051bSIsImRhdGFBciIsIm5EYXRhQXIiLCJ0ZW1wQXIiLCJ0ZW1wIiwidG9Mb3dlckNhc2UiLCJpc05hTiIsIk51bWJlciIsImlzRmluaXRlIiwiTWluaW11bSIsImFyciIsInJlZHVjZSIsIk1heGltdW0iLCJNZWFuIiwiTWVkaWFuIiwic29ydCIsIlN0YW5kYXJkIERldmlhdGlvbiIsInZhbHVlcyIsImF2ZXJhZ2UiLCJzdW0iLCJhdmciLCJzcXVhcmVEaWZmcyIsInNxckRpZmYiLCJhdmdTcXVhcmVEaWZmIiwic3RkRGV2IiwiZGlmZiIsInNxcnQiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlFOUNELElBQU1XLEdBQWlCWCxFQUFRLEVBRS9CWSxjQUFhQyxTQUFTLGFBQWMsVUFBVyxhQUFjLFdBQzNELFFBQVNDLEtBQ1BDLEtBQUtDLFFBQVVKLGFBQWFLLGFBQWEsTUFBTyxXQUNoREYsS0FBS0csa0JBQW9CSCxLQUFLQyxRQUFRRSxrQkFDdENILEtBQUtJLGVBQWlCSixLQUFLQyxRQUFRRyxlQUNu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Q3BCLE1BQU9ELEdBQUlDLElBQ1IwTCxFQUFJckwsUUFFWHlMLE9BQVEsU0FBQ0osR0FDUCxNQUFPQSxHQUFJaEIsSUFBSSxTQUFDM0ssR0FBRCxNQUFPQSxLQUFHZ00sS0FBSyxTQUFDaE0sRUFBR0MsR0FBUSxNQUFPRCxHQUFJQyxJQUFNMEwsRUFBSXJMLE9BQVMsSUFFMUUyTCxxQkFBc0IsU0FBQ0MsR0FDckIsUUFBU0MsR0FBU3pCLEdBQ2hCLEdBQUkwQixHQUFLQyxDQU1ULE9BTEFELEdBQU0xQixFQUFLa0IsT0FBTyxTQUFVUSxFQUFLOUgsR0FDL0IsTUFBTzhILEdBQU05SCxHQUNaLEdBRUgrSCxFQUFNRCxFQUFNMUIsRUFBS3BLLE9BR25CLEdBQUkrTCxHQUFNLEVBQ1JDLEVBQWMsRUFDZEMsRUFBVSxFQUNWQyxFQUFnQixFQUNoQkMsRUFBUyxFQUNUQyxFQUFPLENBU1QsT0FSQUwsR0FBTUYsRUFBUUQsR0FDZEksRUFBY0osRUFBT3ZCLElBQUksU0FBVXJHLEdBR2pDLE1BRkFvSSxHQUFPcEksRUFBUStILEVBQ2ZFLEVBQVVHLEVBQU9BLElBR25CRixFQUFnQkwsRUFBUUcsR0FDeEJHLEVBQVNyRixLQUFLdUYsS0FBS0gsSUFLdkIzUCxHQUFPRCxRQUFVUSIsImZpbGUiOiJncm93dGgtYW5hbHlzZXItZXM1Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEdyb3d0aEFuYWx5c2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdEZ1c2lvbkNoYXJ0cy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ2xlZ2VuZC1leHQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gTGVnZW5kRXh0KCkge1xuXHQgICAgdGhpcy50b29sYm94ID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcblx0ICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG5cdCAgICB0aGlzLkNvbXBvbmVudEdyb3VwID0gdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwO1xuXHQgICAgdGhpcy5TeW1ib2xTdG9yZSA9IHRoaXMudG9vbGJveC5TeW1ib2xTdG9yZTtcblx0ICB9XG5cdCAgTGVnZW5kRXh0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExlZ2VuZEV4dDtcblx0XG5cdCAgTGVnZW5kRXh0LnByb3RvdHlwZS5yZW5kZXJDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgY2hhcnRJbnN0YW5jZSA9IHRoaXMudHNPYmplY3QuY2hhcnRJbnN0YW5jZSxcblx0ICAgICAgICBjb21wb25lbnRTdG9yZSA9IGNoYXJ0SW5zdGFuY2UuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcblx0ICAgICAgICBpID0gMDtcblx0ICAgIGZvciAoaSA9IDA7IGNvbXBvbmVudFN0b3JlLmdldENhbnZhc0J5SW5kZXgoaSk7ICsraSkge1xuXHQgICAgICBjb21wb25lbnRTdG9yZS5nZXRDYW52YXNCeUluZGV4KGkpLmdldENvbXBvc2l0aW9uKCkuUGxvdE1hbmFnZXIucGxvdCgpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIExlZ2VuZEV4dC5wcm90b3R5cGUuYW5hbHlzZXIgPSBmdW5jdGlvbiAobW9kZSkge1xuXHQgICAgdmFyIGdhID0gdGhpcy5nYSB8fCB7fSxcblx0ICAgICAgICBzdG9yZSA9IHRoaXMudHNPYmplY3QuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcblx0ICAgICAgICBjYW52YXMgPSBzdG9yZS5nZXRDYW52YXNCeUluZGV4KDApLFxuXHQgICAgICAgIG5hdiA9IHN0b3JlLmdldE5hdmlnYXRvckJ5SW5kZXgoMCksXG5cdCAgICAgICAgY29tcCA9IGNhbnZhcy5nZXRDb21wb3NpdGlvbigpLFxuXHQgICAgICAgIGRzID0gZ2EuZHMgfHwgY29tcC5kYXRhc2V0LFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgaWRNYXAgPSBnYS5pZE1hcCB8fCB7fSxcblx0ICAgICAgICBzdG9yZUFyID0gZ2Euc3RvcmVBciB8fCBbXSxcblx0ICAgICAgICBuU3RvcmVBcnIgPSBbXSxcblx0ICAgICAgICB5QXhpcyA9IGNhbnZhcy5jb21wb3NpdGlvbi55QXhpcztcblx0ICAgIC8vIENoYW5naW5nIHkgQXhpcyBmb3JtYXR0b3Jcblx0ICAgIGlmIChtb2RlID09PSAncmVzZXQnKSB7XG5cdCAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgeUF4aXMuZ2V0U2NhbGVPYmooKS5nZXRJbnRlcnZhbE9iaigpLmdldENvbmZpZygnaW50ZXJ2YWxzJykubWFqb3IuZm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgIHJldHVybiB2YWwgKyAnJSc7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgICAvLyBEZWNsYXJhdGlvbiBlbmRzXG5cdCAgICB0aGlzLmdhID0gZ2E7XG5cdCAgICBpZiAoIWdhLnN0b3JlQXIpIHtcblx0ICAgICAgc3RvcmUgPSB7fTtcblx0ICAgICAgaWYgKCFnYS5pZE1hcCkge1xuXHQgICAgICAgIGRzLmZvckVhY2hTZXJpZXMoZnVuY3Rpb24gKGEsIGIsIGMsIHNlcmllcykge1xuXHQgICAgICAgICAgc3RvcmVbc2VyaWVzLmdldElkKCldID0gc2VyaWVzLmdldE9yaWdpbmFsRGF0YSgpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGZvciAoaSBpbiBzdG9yZSkge1xuXHQgICAgICAgICAgc3RvcmVBci5wdXNoKHN0b3JlW2ldKTtcblx0ICAgICAgICAgIGlkTWFwW2ldID0gc3RvcmVBci5sZW5ndGggLSAxO1xuXHQgICAgICAgICAgLy8gPSBzdG9yZVtpXS5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIDIwICogZSArIChNYXRoLnJhbmRvbSgpICogMTAwMCk7IH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBnYS5pZE1hcCA9IGlkTWFwO1xuXHQgICAgICAgIGdhLmRzID0gZHM7XG5cdCAgICAgICAgZ2Euc3RvcmVBciA9IHN0b3JlQXI7XG5cdCAgICAgICAgZ2EuZ0FuYWx5c2VyID0gbmV3IEdyb3d0aEFuYWx5c2VyKHN0b3JlQXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBuU3RvcmVBcnIgPSBnYS5nQW5hbHlzZXIuYW5hbHlzZShtb2RlKTtcblx0ICAgIGRzLnNldERhdGFCeVNlcmllcyhmdW5jdGlvbiAoc2VyaWVzKSB7XG5cdCAgICAgIGlmIChuU3RvcmVBcnIubGVuZ3RoKSB7XG5cdCAgICAgICAgc2VyaWVzLnNldE9yaWdpbmFsRGF0YShuU3RvcmVBcnJbaWRNYXBbc2VyaWVzLmdldElkKCldXSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgY29tcC5pbXBsLnVwZGF0ZSgpO1xuXHQgIH07XG5cdFxuXHQgIExlZ2VuZEV4dC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChyZXF1aXJlKSB7XG5cdCAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgcmVxdWlyZShbJ3hBeGlzJywgJ3lBeGlzJywgJ2dyYXBoaWNzJywgJ2NoYXJ0JywgJ2RhdGFzZXQnLCAnUGxvdE1hbmFnZXInLCAnY2FudmFzQ29uZmlnJywgJ01hcmtlck1hbmFnZXInLCAncmVhY3RpdmVNb2RlbCcsICdnbG9iYWxSZWFjdGl2ZU1vZGVsJywgJ3NwYWNlTWFuYWdlckluc3RhbmNlJywgJ3NtYXJ0TGFiZWwnLCAnY2hhcnRJbnN0YW5jZScsICdjYW52YXNEYXRhJywgZnVuY3Rpb24gKHhBeGlzLCB5QXhpcywgZ3JhcGhpY3MsIGNoYXJ0LCBkYXRhc2V0LCBwbG90TWFuYWdlciwgY2FudmFzQ29uZmlnLCBtYXJrZXJNYW5hZ2VyLCByZWFjdGl2ZU1vZGVsLCBnbG9iYWxSZWFjdGl2ZU1vZGVsLCBzcGFjZU1hbmFnZXJJbnN0YW5jZSwgc21hcnRMYWJlbCwgY2hhcnRJbnN0YW5jZSwgY2FudmFzRGF0YSkge1xuXHQgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuXHQgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuXHQgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuXHQgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuXHQgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcblx0ICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcblx0ICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG5cdCAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcblx0ICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG5cdCAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcblx0ICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG5cdCAgICAgIGluc3RhbmNlLmNhbnZhc0RhdGEgPSBjYW52YXNEYXRhO1xuXHQgICAgfV0pO1xuXHQgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgIHRoaXMudHNPYmplY3QgPSBpbnN0YW5jZS5jaGFydEluc3RhbmNlO1xuXHQgICAgdGhpcy5zdGFydER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgIHRoaXMuZW5kRHQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcblx0ICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG5cdCAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cdCAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG5cdCAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgTGVnZW5kRXh0LnByb3RvdHlwZS5jcmVhdGVUb29sYmFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHRvb2xiYXIsXG5cdCAgICAgICAgZ3JvdXAsXG5cdCAgICAgICAgc2VsZiA9IHRoaXMsXG5cdCAgICAgICAgY29udGV4dE1lbnUsXG5cdCAgICAgICAgY29udGV4dEFycmF5ID0gW10sXG5cdCAgICAgICAgZ2FPcHRpb25zT2JqID0ge30sXG5cdCAgICAgICAgcG9wdXAsXG5cdCAgICAgICAgcGFwZXIgPSB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgIGNoYXJ0Q29udGFpbmVyID0gdGhpcy5ncmFwaGljcy5jb250YWluZXIsXG5cdCAgICAgICAgc3ViQ2F0U3R5bGUgPSB7XG5cdCAgICAgICdmb250LXNpemUnOiAnMTJweCcsXG5cdCAgICAgICdjb2xvcic6ICcjNjk2OTY5Jyxcblx0ICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkIFBybyBTZW1pYm9sZCdcblx0ICAgIH07XG5cdFxuXHQgICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcblx0ICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgfSk7XG5cdFxuXHQgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgfSk7XG5cdFxuXHQgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgfSk7XG5cdFxuXHQgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdhT3B0aW9uc09iaiA9IHtcblx0ICAgICAgJ0ZpeGVkLU51bWJlcic6ICdkaWFsb2dCb3gnLFxuXHQgICAgICAnRnVuY3Rpb25zJzogWydNaW5pbXVtJywgJ01heGltdW0nLCAnTWVhbicsICdNZWRpYW4nLCAnU3RhbmRhcmQgRGV2aWF0aW9uJ10sXG5cdCAgICAgICdQb3NpdGlvbic6ICdkaWFsb2dCb3gnLFxuXHQgICAgICAnRGF0YXNldCc6IFsnUHJldmlvdXMgRGF0YXNldCcsICdOZXh0IERhdGFzZXQnXSxcblx0ICAgICAgJ1JlbGF0aXZlLVBvc2l0aW9uJzogWydOZXh0JywgJ1ByZXZpb3VzJ11cblx0ICAgIH07XG5cdFxuXHQgICAgY29udGV4dE1lbnUgPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbFdpdGhDb250ZXh0KCdDb250ZXh0SWNvbicsIHtcblx0ICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgfSwge1xuXHQgICAgICB3aWR0aDogMjQsXG5cdCAgICAgIGhlaWdodDogMjQsXG5cdCAgICAgIHBvc2l0aW9uOiAncmlnaHQnLFxuXHQgICAgICBzdHJva2U6ICcjY2VkNWQ0Jyxcblx0ICAgICAgc3ltYm9sU3Ryb2tlOiAnIzY5Njk2OSdcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNvbnRleHRBcnJheS5wdXNoKHtcblx0ICAgICAgJ0dyb3d0aCBBbmFseXNlcic6IHtcblx0ICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgJ2NvbG9yJzogJyM2OTY5NjknLFxuXHQgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ015cmlhZCBwcm8gU2VtaWJvbGQnXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHBvcHVwID0gZnVuY3Rpb24gcG9wdXAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGJveCxcblx0ICAgICAgICAgIGhlYWRlcixcblx0ICAgICAgICAgIHN0eWxlID0ge1xuXHQgICAgICAgIGZvbnRTaXplOiAxMCArICdweCcsXG5cdCAgICAgICAgbGluZUhlaWdodDogMTUgKyAncHgnLFxuXHQgICAgICAgIGZvbnRGYW1pbHk6ICdMdWNpZGEgR3JhbmRlJyxcblx0ICAgICAgICBzdHJva2U6ICcjNjc2NzY3Jyxcblx0ICAgICAgICAnc3Ryb2tlLXdpZHRoJzogJzInXG5cdCAgICAgIH0sXG5cdCAgICAgICAgICBoZWFkZXJXaWR0aCA9IDE4MCxcblx0ICAgICAgICAgIGhlYWRlclRleHQsXG5cdCAgICAgICAgICBjcm9zcyxcblx0ICAgICAgICAgIGlucHV0RmllbGQsXG5cdCAgICAgICAgICBhcHBseUJ1dHRvbixcblx0ICAgICAgICAgIHggPSA1MDAsXG5cdCAgICAgICAgICB5ID0gMTAwO1xuXHRcblx0ICAgICAgYm94ID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuXHQgICAgICAgIGZpbGw6ICcjZjdmN2Y3Jyxcblx0ICAgICAgICB4OiB4IC0gMjAwLFxuXHQgICAgICAgIHk6IHkgKyAxMDAsXG5cdCAgICAgICAgd2lkdGg6IDE4MCxcblx0ICAgICAgICBoZWlnaHQ6IDgwXG5cdCAgICAgIH0sIHN0eWxlLCBjaGFydENvbnRhaW5lcik7XG5cdFxuXHQgICAgICBoZWFkZXIgPSBwYXBlci5odG1sKCdkaXYnLCB7XG5cdCAgICAgICAgZmlsbDogJyNlOGU4ZTgnLFxuXHQgICAgICAgIHdpZHRoOiBoZWFkZXJXaWR0aCxcblx0ICAgICAgICBoZWlnaHQ6IDIwXG5cdCAgICAgIH0sIHN0eWxlLCBib3gpO1xuXHRcblx0ICAgICAgaGVhZGVyVGV4dCA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcblx0ICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuXHQgICAgICAgIHdpZHRoOiBoZWFkZXJXaWR0aCAqIDAuNixcblx0ICAgICAgICBoZWlnaHQ6IDIwLFxuXHQgICAgICAgIHg6IDEwLFxuXHQgICAgICAgIHk6IDJcblx0ICAgICAgfSwgc3R5bGUsIGhlYWRlcik7XG5cdFxuXHQgICAgICBoZWFkZXJUZXh0LmF0dHIoe1xuXHQgICAgICAgIHRleHQ6ICdQcm92aWRlIFNwZWNpZmljIFZhbHVlJ1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGNyb3NzID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuXHQgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsXG5cdCAgICAgICAgd2lkdGg6IDEwLFxuXHQgICAgICAgIGhlaWdodDogMTAsXG5cdCAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG5cdCAgICAgICAgZmxvYXQ6ICdyaWdodCcsXG5cdCAgICAgICAgdGV4dDogJ1gnLFxuXHQgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG5cdCAgICAgIH0sIHN0eWxlLCBoZWFkZXIpO1xuXHRcblx0ICAgICAgY3Jvc3Mub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGJveC5oaWRlKCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaW5wdXRGaWVsZCA9IHBhcGVyLmh0bWwoJ2lucHV0Jywge1xuXHQgICAgICAgIHdpZHRoOiAxMDAsXG5cdCAgICAgICAgaGVpZ2h0OiAyMCxcblx0ICAgICAgICB4OiAxMCxcblx0ICAgICAgICB5OiAzMFxuXHQgICAgICB9LCBzdHlsZSwgYm94KTtcblx0XG5cdCAgICAgIGFwcGx5QnV0dG9uID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuXHQgICAgICAgIHdpZHRoOiA1MCxcblx0ICAgICAgICBoZWlnaHQ6IDIwLFxuXHQgICAgICAgIHg6IDEyMCxcblx0ICAgICAgICB5OiAzMCxcblx0ICAgICAgICBmaWxsOiAnIzU1NTU1NSdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIGZvbnRTaXplOiAxMCArICdweCcsXG5cdCAgICAgICAgbGluZUhlaWdodDogMTUgKyAncHgnLFxuXHQgICAgICAgIGZvbnRGYW1pbHk6ICdMdWNpZGEgR3JhbmRlJyxcblx0ICAgICAgICBmaWxsOiAnI2VhZWFlYScsXG5cdCAgICAgICAgY29sb3I6ICcjZWFlYWVhJyxcblx0ICAgICAgICBzdHJva2U6ICcjZWFlYWVhJyxcblx0ICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuXHQgICAgICB9LCBib3gpO1xuXHRcblx0ICAgICAgYXBwbHlCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGJveC5oaWRlKCk7XG5cdCAgICAgICAgY2FsbGJhY2soaW5wdXRGaWVsZC52YWwoKSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBhcHBseUJ1dHRvbi5hdHRyKHtcblx0ICAgICAgICB0ZXh0OiAnQXBwbHknXG5cdCAgICAgIH0pO1xuXHQgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuZm9jdXMoKTtcblx0ICAgICAgZnVuY3Rpb24gaW5wdXRGaWVsZE51bWJlckhhbmRsZXIoKSB7XG5cdCAgICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnZhbHVlID0gaW5wdXRGaWVsZC5lbGVtZW50LnZhbHVlLnJlcGxhY2UoL1teXFxkLi1dL2csICcnKTtcblx0ICAgICAgfVxuXHQgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBpbnB1dEZpZWxkTnVtYmVySGFuZGxlcik7XG5cdCAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ3Bvc2l0aW9uJ10gPSAncmVsYXRpdmUnO1xuXHQgICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydiYWNrZ3JvdW5kQ29sb3InXSA9ICcjZDJkMmQyJztcblx0ICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMnB4IHNvbGlkICNjYmNiY2InO1xuXHQgICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydwYWRkaW5nJ10gPSAnMHB4IDBweCAzLjVweCAycHgnO1xuXHQgICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyM4YzhjOGMnO1xuXHQgICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydtYXJnaW4nXSA9ICcxcHggMnB4Jztcblx0ICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnZmxvYXQnXSA9ICdyaWdodCc7XG5cdCAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4Jztcblx0ICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcycHggc29saWQgI2RhZGJkYSc7XG5cdCAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzhweCc7XG5cdCAgICAgIGJveC5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcxcHggc29saWQgI2Q0ZDJkMyc7XG5cdCAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcxcHggc29saWQgI2Q0ZDJkMyc7XG5cdCAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWyd3aWR0aCddID0gJzE3OXB4Jztcblx0ICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExLjVweCc7XG5cdCAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnMC41cHgnO1xuXHQgICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ2NvbG9yJ10gPSAnIzY3Njc2Nyc7XG5cdCAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWydmb250RmFtaWx5J10gPSAnTXlyaWFkIHBybyBTZW1pYm9sZCc7XG5cdCAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ3RleHRBbGlnbiddID0gJ2NlbnRlcic7XG5cdCAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ2ZvbnRTaXplJ10gPSAnMTFweCc7XG5cdCAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ3BhZGRpbmdUb3AnXSA9ICczcHgnO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydib3JkZXJSYWRpdXMnXSA9ICczcHgnO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyNlNGU0ZTQnO1xuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7XG5cdCAgICAgIHZhciBrZXkgPSB2b2lkIDAsXG5cdCAgICAgICAgICBvYmogPSB7fSxcblx0ICAgICAgICAgIHN1Yk9iaiA9IHt9O1xuXHQgICAgICBpZiAoZ2FPcHRpb25zT2JqW2ldID09PSAnZGlhbG9nQm94Jykge1xuXHQgICAgICAgIGtleSA9ICcmbmJzcDsgJm5ic3A7ICcgKyBpO1xuXHQgICAgICAgIG9ialtrZXldID0ge307XG5cdCAgICAgICAgb2JqW2tleV0gPSB7XG5cdCAgICAgICAgICBzdHlsZTogc3ViQ2F0U3R5bGUsXG5cdCAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgICAgICAvLyBsZXQgcG9wdXBWYWwgPSBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG5cdCAgICAgICAgICAgIC8vICAgc2VsZi5hbmFseXNlcihwYXJzZUludChzdHIpKTtcblx0ICAgICAgICAgICAgLy8gfSk7XG5cdCAgICAgICAgICAgIGlmIChpID09PSAnRml4ZWQtTnVtYmVyJykge1xuXHQgICAgICAgICAgICAgIC8vIHNlbGYuYW5hbHlzZXIocGFyc2VJbnQod2luZG93LnByb21wdCgnRW50ZXIgdmFsdWUnKSkpO1xuXHQgICAgICAgICAgICAgIHZhciBwb3B1cFZhbCA9IHBvcHVwKGZ1bmN0aW9uIChzdHIpIHtcblx0ICAgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIocGFyc2VJbnQoc3RyKSk7XG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gJ1Bvc2l0aW9uJykge1xuXHQgICAgICAgICAgICAgIHZhciBfcG9wdXBWYWwgPSBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG5cdCAgICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHsgcG9zaXRpb246IHN0ciB9KTtcblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAga2V5ID0gJyYjOTY2NiZuYnNwOyAnICsgaTtcblx0ICAgICAgICBvYmpba2V5XSA9IHt9O1xuXHQgICAgICAgIG9ialtrZXldLmFjdGlvbiA9ICdjbGljayc7XG5cdCAgICAgICAgb2JqW2tleV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcblx0ICAgICAgICBvYmpba2V5XS5oYW5kbGVyID0gW107XG5cdFxuXHQgICAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoaikge1xuXHQgICAgICAgICAgdmFyIHN1Yk1lbnVOYW1lID0gZ2FPcHRpb25zT2JqW2ldW2pdO1xuXHQgICAgICAgICAgc3ViT2JqID0ge307XG5cdCAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0gPSB7fTtcblx0ICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXS5oYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyBbJ01pbmltdW0nLCAnTWF4aW11bScsICdNZWFuJywgJ01lZGlhbicsICdTdGFuZGFyZCBEZXZpYXRpb24nXVxuXHQgICAgICAgICAgICAvLyBbJ1ByZXZpb3VzIERhdGFzZXQnLCAnTmV4dCBEYXRhc2V0J11cblx0ICAgICAgICAgICAgLy8gWydOZXh0JywgJ1ByZXZpb3VzJ11cblx0ICAgICAgICAgICAgaWYgKHN1Yk1lbnVOYW1lID09PSAnTWluaW11bScgfHwgc3ViTWVudU5hbWUgPT09ICdNYXhpbXVtJyB8fCBzdWJNZW51TmFtZSA9PT0gJ01lYW4nIHx8IHN1Yk1lbnVOYW1lID09PSAnTWVkaWFuJyB8fCBzdWJNZW51TmFtZSA9PT0gJ1N0YW5kYXJkIERldmlhdGlvbicpIHtcblx0ICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHN1Yk1lbnVOYW1lKTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ1ByZXZpb3VzIERhdGFzZXQnKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7IHJlbGRhdGFzZXRwb3NpdGlvbjogLTEgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdOZXh0IERhdGFzZXQnKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7IHJlbGRhdGFzZXRwb3NpdGlvbjogMSB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ05leHQnKSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcih7IHJlbHBvc2l0aW9uOiAtMSB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ1ByZXZpb3VzJykge1xuXHQgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoeyByZWxwb3NpdGlvbjogMSB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfTtcblx0ICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXS5hY3Rpb24gPSAnY2xpY2snO1xuXHQgICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLnN0eWxlID0gc3ViQ2F0U3R5bGU7XG5cdCAgICAgICAgICBvYmpba2V5XS5oYW5kbGVyLnB1c2goc3ViT2JqKTtcblx0ICAgICAgICAgIGlmIChqICE9PSBnYU9wdGlvbnNPYmpbaV0ubGVuZ3RoIC0gMSkge1xuXHQgICAgICAgICAgICBvYmpba2V5XS5oYW5kbGVyLnB1c2goe1xuXHQgICAgICAgICAgICAgICcnOiB7XG5cdCAgICAgICAgICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZDVkMmQyJyxcblx0ICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMXB4Jyxcblx0ICAgICAgICAgICAgICAgICAgbWFyZ2luOiAnMXB4Jyxcblx0ICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzBweCdcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ2FPcHRpb25zT2JqW2ldLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICBfbG9vcDIoaik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGNvbnRleHRBcnJheS5wdXNoKG9iaik7XG5cdCAgICAgIGNvbnRleHRBcnJheS5wdXNoKHtcblx0ICAgICAgICAnJzoge1xuXHQgICAgICAgICAgc3R5bGU6IHtcblx0ICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2Q1ZDJkMicsXG5cdCAgICAgICAgICAgIGhlaWdodDogJzFweCcsXG5cdCAgICAgICAgICAgIG1hcmdpbjogJzFweCcsXG5cdCAgICAgICAgICAgIHBhZGRpbmc6ICcwcHgnXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgZm9yICh2YXIgaSBpbiBnYU9wdGlvbnNPYmopIHtcblx0ICAgICAgX2xvb3AoaSk7XG5cdCAgICB9XG5cdFxuXHQgICAgY29udGV4dEFycmF5LnB1c2goe1xuXHQgICAgICAnJm5ic3A7ICZuYnNwOyBSZXNldCc6IHtcblx0ICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgICAgc2VsZi5hbmFseXNlcigncmVzZXQnKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICBzdHlsZTogc3ViQ2F0U3R5bGVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgY29udGV4dE1lbnUuYXBwZW5kQXNMaXN0KGNvbnRleHRBcnJheSk7XG5cdFxuXHQgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcignQ29udGV4dEljb24nLCBmdW5jdGlvbiAocG9zeCwgcG9zeSwgcmFkKSB7XG5cdCAgICAgIHZhciB4ID0gcG9zeCxcblx0ICAgICAgICAgIHkgPSBwb3N5LFxuXHQgICAgICAgICAgciA9IHJhZCAqIDIsXG5cdCAgICAgICAgICBzcGFjZSA9IE1hdGgucm91bmQociAvIDQpLFxuXHQgICAgICAgICAgaGFsZldpZHRoID0gTWF0aC5yb3VuZChyIC8gMikgKiAwLjcsXG5cdCAgICAgICAgICBzdGFydFggPSB4IC0gaGFsZldpZHRoLFxuXHQgICAgICAgICAgZW5kWCA9IHggKyBoYWxmV2lkdGgsXG5cdCAgICAgICAgICBzdGFydFkgPSB5ICsgc3BhY2UsXG5cdCAgICAgICAgICBlbmRZID0geSAtIHNwYWNlO1xuXHQgICAgICByZXR1cm4gWydNJywgc3RhcnRYLCB5LCAnTCcsIGVuZFgsIHksICdNJywgc3RhcnRYLCBzdGFydFksICdMJywgZW5kWCwgc3RhcnRZLCAnTScsIHN0YXJ0WCwgZW5kWSwgJ0wnLCBlbmRYLCBlbmRZXTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdyb3VwLmFkZFN5bWJvbChjb250ZXh0TWVudSk7XG5cdCAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG5cdCAgICByZXR1cm4gdG9vbGJhcjtcblx0ICB9O1xuXHRcblx0ICBMZWdlbmRFeHQucHJvdG90eXBlLmdldExvZ2ljYWxTcGFjZSA9IGZ1bmN0aW9uIChhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KSB7XG5cdCAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuXHQgICAgdmFyIGxvZ2ljYWxTcGFjZSxcblx0ICAgICAgICB3aWR0aCA9IDAsXG5cdCAgICAgICAgaGVpZ2h0ID0gMCxcblx0ICAgICAgICBpLFxuXHQgICAgICAgIGxuO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuXHQgICAgICB3aWR0aCA9IE1hdGgubWF4KGxvZ2ljYWxTcGFjZS53aWR0aCwgd2lkdGgpO1xuXHQgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcblx0ICAgICAgdGhpcy50b29sYmFyc1tpXS5oZWlnaHQgPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuXHQgICAgfVxuXHQgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHdpZHRoOiB3aWR0aCA+IGF2YWlsYWJsZVdpZHRoID8gMCA6IHdpZHRoLFxuXHQgICAgICBoZWlnaHQ6IGhlaWdodCA+IGF2YWlsYWJsZUhlaWdodCA/IDAgOiBoZWlnaHRcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgTGVnZW5kRXh0LnByb3RvdHlwZS5wbGFjZUluQ2FudmFzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIF9zZWxmLnBhZGRpbmcgPSA1O1xuXHQgICAgX3NlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG5cdCAgICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUoKSB7XG5cdCAgICAgICAgcmV0dXJuICdUb29sQm94RXh0Jztcblx0ICAgICAgfSxcblx0ICAgICAgcmVmOiBmdW5jdGlvbiByZWYob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIG9ialsnMCddO1xuXHQgICAgICB9LFxuXHQgICAgICBzZWxmOiBmdW5jdGlvbiBzZWxmKCkge1xuXHQgICAgICAgIHJldHVybiBfc2VsZjtcblx0ICAgICAgfSxcblx0ICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uIHByaW9yaXR5KCkge1xuXHQgICAgICAgIHJldHVybiAyO1xuXHQgICAgICB9LFxuXHQgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChvYmopIHtcblx0ICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcblx0ICAgICAgfSxcblx0ICAgICAgb3JpZW50YXRpb246IFt7XG5cdCAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHBvc2l0aW9uOiBbe1xuXHQgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgYWxpZ25tZW50OiBbe1xuXHQgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgIHJldHVybiBvYmoucmlnaHQ7XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcblx0ICAgICAgICAgICAgICByZXR1cm4gX3NlbGYuZ2V0TG9naWNhbFNwYWNlKHBhcmVudC5nZXRXaWR0aCgpLCBwYXJlbnQuZ2V0SGVpZ2h0KCkpO1xuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9XVxuXHQgICAgICB9XVxuXHQgICAgfV0pO1xuXHQgIH07XG5cdFxuXHQgIExlZ2VuZEV4dC5wcm90b3R5cGUuc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgbWVzLnggPSB4O1xuXHQgICAgbWVzLnkgPSB5O1xuXHQgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcblx0ICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICBMZWdlbmRFeHQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgIHZhciBtZWFzdXJlbWVudCA9IHRoaXMubWVhc3VyZW1lbnQsXG5cdCAgICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuXHQgICAgICAgIGxuLFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgdG9vbGJhcjtcblx0ICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcblx0ICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcblx0ICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG5cdCAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcblx0ICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcblx0ICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcblx0ICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuXHQgICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEZ1c2lvbkNoYXJ0cy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdsZWdlbmRFeHQnLCBMZWdlbmRFeHQpO1xuXHR9XSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBHcm93dGhBbmFseXNlciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBHcm93dGhBbmFseXNlcihkYXRhKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR3Jvd3RoQW5hbHlzZXIpO1xuXHRcblx0ICAgIHRoaXMuZGF0YSA9IGRhdGEubWFwKGZ1bmN0aW9uIChhKSB7XG5cdCAgICAgIHJldHVybiBhLm1hcChmdW5jdGlvbiAoYikge1xuXHQgICAgICAgIHJldHVybiBiO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy5Gb3JtdWxhZSA9IEZvcm11bGFlO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEdyb3d0aEFuYWx5c2VyLCBbe1xuXHQgICAga2V5OiAnYW5hbHlzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gYW5hbHlzZShtb2RlKSB7XG5cdCAgICAgIHZhciBpID0gMCxcblx0ICAgICAgICAgIGlpID0gMCxcblx0ICAgICAgICAgIGogPSAwLFxuXHQgICAgICAgICAgamogPSAwLFxuXHQgICAgICAgICAgbnVtID0gMCxcblx0ICAgICAgICAgIGNoZWNrQXJyID0gW10sXG5cdCAgICAgICAgICBjaGVja051bSA9IDAsXG5cdCAgICAgICAgICBkYXRhQXIgPSB0aGlzLmRhdGEsXG5cdCAgICAgICAgICBuRGF0YUFyID0gW10sXG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXSxcblx0ICAgICAgICAgIHRlbXAgPSAwO1xuXHQgICAgICBpZiAodHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnICYmIG1vZGUudG9Mb3dlckNhc2UoKSA9PT0gJ3Jlc2V0Jykge1xuXHQgICAgICAgIHJldHVybiBkYXRhQXIubWFwKGZ1bmN0aW9uIChhKSB7XG5cdCAgICAgICAgICByZXR1cm4gYS5tYXAoZnVuY3Rpb24gKGIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGI7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIGlmICghaXNOYU4obW9kZSkpIHtcblx0ICAgICAgICAvLyBIYW5kbGluZyBhIG51bWJlclxuXHQgICAgICAgIGNoZWNrTnVtID0gK21vZGU7XG5cdCAgICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgICAgdGVtcEFyID0gW107XG5cdCAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG5cdCAgICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcblx0ICAgICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBtb2RlID0gdGhpcy5Gb3JtdWxhZVttb2RlXTtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXTtcblx0ICAgICAgICAgIGNoZWNrTnVtID0gbW9kZShkYXRhQXJbaV0pO1xuXHQgICAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHQgICAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG5cdCAgICAgICAgICAgIGlmIChjaGVja051bSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgIHRlbXAgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdGVtcCA9IDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0ZW1wQXIucHVzaCh0ZW1wKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5yZWxwb3NpdGlvbikpIHtcblx0ICAgICAgICBtb2RlID0gbW9kZS5yZWxwb3NpdGlvbjtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXTtcblx0ICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcblx0ICAgICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuXHQgICAgICAgICAgICBpZiAoaiArIG1vZGUgPj0gMCAmJiBqICsgbW9kZSA8IGpqKSB7XG5cdCAgICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1baiArIG1vZGVdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNoZWNrTnVtID0gbnVtO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucG9zaXRpb24pKSB7XG5cdCAgICAgICAgbW9kZSA9IG1vZGUucG9zaXRpb247XG5cdCAgICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgICAgdGVtcEFyID0gW107XG5cdCAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG5cdCAgICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcblx0ICAgICAgICAgICAgaWYgKG1vZGUgPj0gMCAmJiBtb2RlIDwgamopIHtcblx0ICAgICAgICAgICAgICBjaGVja051bSA9IGRhdGFBcltpXVttb2RlXTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBjaGVja051bSA9IG51bTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnJlbGRhdGFzZXRwb3NpdGlvbikpIHtcblx0ICAgICAgICBtb2RlID0gbW9kZS5yZWxkYXRhc2V0cG9zaXRpb247XG5cdCAgICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgICAgdGVtcEFyID0gW107XG5cdCAgICAgICAgICBpZiAoaSArIG1vZGUgPj0gMCAmJiBpICsgbW9kZSA8IGlpKSB7XG5cdCAgICAgICAgICAgIGNoZWNrQXJyID0gZGF0YUFyW2kgKyBtb2RlXTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNoZWNrQXJyID0gZGF0YUFyW2ldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHQgICAgICAgICAgICBjaGVja051bSA9IGNoZWNrQXJyW2pdO1xuXHQgICAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG5cdCAgICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBudW0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGZvciAoaSA9IDAsIGlpID0gbkRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG5cdCAgICAgICAgZm9yIChqID0gMCwgamogPSBuRGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcblx0ICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG5EYXRhQXJbaV1bal0pKSB7XG5cdCAgICAgICAgICAgIG5EYXRhQXJbaV1bal0gPSBudWxsO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbkRhdGFBcjtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBHcm93dGhBbmFseXNlcjtcblx0fSgpO1xuXHRcblx0dmFyIEZvcm11bGFlID0ge1xuXHQgIE1pbmltdW06IGZ1bmN0aW9uIE1pbmltdW0oYXJyKSB7XG5cdCAgICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYSA+IGIgPyBiIDogYTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgTWF4aW11bTogZnVuY3Rpb24gTWF4aW11bShhcnIpIHtcblx0ICAgIHJldHVybiBhcnIucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgIHJldHVybiBhIDwgYiA/IGIgOiBhO1xuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBNZWFuOiBmdW5jdGlvbiBNZWFuKGFycikge1xuXHQgICAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGEgKyBiO1xuXHQgICAgfSkgLyBhcnIubGVuZ3RoO1xuXHQgIH0sXG5cdCAgTWVkaWFuOiBmdW5jdGlvbiBNZWRpYW4oYXJyKSB7XG5cdCAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoYSkge1xuXHQgICAgICByZXR1cm4gYTtcblx0ICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGEgLSBiO1xuXHQgICAgfSlbYXJyLmxlbmd0aCAvIDJdO1xuXHQgIH0sXG5cdCAgJ1N0YW5kYXJkIERldmlhdGlvbic6IGZ1bmN0aW9uIFN0YW5kYXJkRGV2aWF0aW9uKHZhbHVlcykge1xuXHQgICAgZnVuY3Rpb24gYXZlcmFnZShkYXRhKSB7XG5cdCAgICAgIHZhciBzdW0sIGF2Zztcblx0ICAgICAgc3VtID0gZGF0YS5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgdmFsdWUpIHtcblx0ICAgICAgICByZXR1cm4gc3VtICsgdmFsdWU7XG5cdCAgICAgIH0sIDApO1xuXHRcblx0ICAgICAgYXZnID0gc3VtIC8gZGF0YS5sZW5ndGg7XG5cdCAgICAgIHJldHVybiBhdmc7XG5cdCAgICB9XG5cdCAgICB2YXIgYXZnID0gMCxcblx0ICAgICAgICBzcXVhcmVEaWZmcyA9IDAsXG5cdCAgICAgICAgc3FyRGlmZiA9IDAsXG5cdCAgICAgICAgYXZnU3F1YXJlRGlmZiA9IDAsXG5cdCAgICAgICAgc3RkRGV2ID0gMCxcblx0ICAgICAgICBkaWZmID0gMDtcblx0ICAgIGF2ZyA9IGF2ZXJhZ2UodmFsdWVzKTtcblx0ICAgIHNxdWFyZURpZmZzID0gdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgZGlmZiA9IHZhbHVlIC0gYXZnO1xuXHQgICAgICBzcXJEaWZmID0gZGlmZiAqIGRpZmY7XG5cdCAgICAgIHJldHVybiBzcXJEaWZmO1xuXHQgICAgfSk7XG5cdCAgICBhdmdTcXVhcmVEaWZmID0gYXZlcmFnZShzcXVhcmVEaWZmcyk7XG5cdCAgICBzdGREZXYgPSBNYXRoLnNxcnQoYXZnU3F1YXJlRGlmZik7XG5cdCAgICByZXR1cm4gc3RkRGV2O1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gR3Jvd3RoQW5hbHlzZXI7XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBncm93dGgtYW5hbHlzZXItZXM1Lm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDM1NWZhOGQzNDU5MDE3YTU0MmYyIiwiY29uc3QgR3Jvd3RoQW5hbHlzZXIgPSByZXF1aXJlKCcuL2dyb3d0aGFuYWx5c2VyJyk7XG5cbkZ1c2lvbkNoYXJ0cy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ2xlZ2VuZC1leHQnLCBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIExlZ2VuZEV4dCAoKSB7XG4gICAgdGhpcy50b29sYm94ID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcbiAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG4gICAgdGhpcy5TeW1ib2xTdG9yZSA9IHRoaXMudG9vbGJveC5TeW1ib2xTdG9yZTtcbiAgfVxuICBMZWdlbmRFeHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGVnZW5kRXh0O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUucmVuZGVyQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjaGFydEluc3RhbmNlID0gdGhpcy50c09iamVjdC5jaGFydEluc3RhbmNlLFxuICAgICAgY29tcG9uZW50U3RvcmUgPSBjaGFydEluc3RhbmNlLmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCksXG4gICAgICBpID0gMDtcbiAgICBmb3IgKGkgPSAwOyBjb21wb25lbnRTdG9yZS5nZXRDYW52YXNCeUluZGV4KGkpOyArK2kpIHtcbiAgICAgIGNvbXBvbmVudFN0b3JlLmdldENhbnZhc0J5SW5kZXgoaSkuZ2V0Q29tcG9zaXRpb24oKS5QbG90TWFuYWdlci5wbG90KCk7XG4gICAgfVxuICB9O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUuYW5hbHlzZXIgPSBmdW5jdGlvbiAobW9kZSkge1xuICAgIHZhciBnYSA9IHRoaXMuZ2EgfHwge30sXG4gICAgICBzdG9yZSA9IHRoaXMudHNPYmplY3QuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcbiAgICAgIGNhbnZhcyA9IHN0b3JlLmdldENhbnZhc0J5SW5kZXgoMCksXG4gICAgICBuYXYgPSBzdG9yZS5nZXROYXZpZ2F0b3JCeUluZGV4KDApLFxuICAgICAgY29tcCA9IGNhbnZhcy5nZXRDb21wb3NpdGlvbigpLFxuICAgICAgZHMgPSBnYS5kcyB8fCBjb21wLmRhdGFzZXQsXG4gICAgICBpLFxuICAgICAgaWRNYXAgPSBnYS5pZE1hcCB8fCB7fSxcbiAgICAgIHN0b3JlQXIgPSBnYS5zdG9yZUFyIHx8IFtdLFxuICAgICAgblN0b3JlQXJyID0gW10sXG4gICAgICB5QXhpcyA9IGNhbnZhcy5jb21wb3NpdGlvbi55QXhpcztcbiAgICAvLyBDaGFuZ2luZyB5IEF4aXMgZm9ybWF0dG9yXG4gICAgaWYgKG1vZGUgPT09ICdyZXNldCcpIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCArICclJztcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIERlY2xhcmF0aW9uIGVuZHNcbiAgICB0aGlzLmdhID0gZ2E7XG4gICAgaWYgKCFnYS5zdG9yZUFyKSB7XG4gICAgICBzdG9yZSA9IHt9O1xuICAgICAgaWYgKCFnYS5pZE1hcCkge1xuICAgICAgICBkcy5mb3JFYWNoU2VyaWVzKGZ1bmN0aW9uIChhLCBiLCBjLCBzZXJpZXMpIHtcbiAgICAgICAgICBzdG9yZVtzZXJpZXMuZ2V0SWQoKV0gPSBzZXJpZXMuZ2V0T3JpZ2luYWxEYXRhKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGkgaW4gc3RvcmUpIHtcbiAgICAgICAgICBzdG9yZUFyLnB1c2goc3RvcmVbaV0pO1xuICAgICAgICAgIGlkTWFwW2ldID0gc3RvcmVBci5sZW5ndGggLSAxO1xuICAgICAgICAgIC8vID0gc3RvcmVbaV0ubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiAyMCAqIGUgKyAoTWF0aC5yYW5kb20oKSAqIDEwMDApOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBnYS5pZE1hcCA9IGlkTWFwO1xuICAgICAgICBnYS5kcyA9IGRzO1xuICAgICAgICBnYS5zdG9yZUFyID0gc3RvcmVBcjtcbiAgICAgICAgZ2EuZ0FuYWx5c2VyID0gbmV3IEdyb3d0aEFuYWx5c2VyKHN0b3JlQXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBuU3RvcmVBcnIgPSBnYS5nQW5hbHlzZXIuYW5hbHlzZShtb2RlKTtcbiAgICBkcy5zZXREYXRhQnlTZXJpZXMoZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgaWYgKG5TdG9yZUFyci5sZW5ndGgpIHtcbiAgICAgICAgc2VyaWVzLnNldE9yaWdpbmFsRGF0YShuU3RvcmVBcnJbaWRNYXBbc2VyaWVzLmdldElkKCldXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29tcC5pbXBsLnVwZGF0ZSgpO1xuICB9O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChyZXF1aXJlKSB7XG4gICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICByZXF1aXJlKFtcbiAgICAgICd4QXhpcycsXG4gICAgICAneUF4aXMnLFxuICAgICAgJ2dyYXBoaWNzJyxcbiAgICAgICdjaGFydCcsXG4gICAgICAnZGF0YXNldCcsXG4gICAgICAnUGxvdE1hbmFnZXInLFxuICAgICAgJ2NhbnZhc0NvbmZpZycsXG4gICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAncmVhY3RpdmVNb2RlbCcsXG4gICAgICAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsXG4gICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgJ3NtYXJ0TGFiZWwnLFxuICAgICAgJ2NoYXJ0SW5zdGFuY2UnLFxuICAgICAgJ2NhbnZhc0RhdGEnLFxuICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgeEF4aXMsXG4gICAgICAgICAgICB5QXhpcyxcbiAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICBkYXRhc2V0LFxuICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICBjYW52YXNDb25maWcsXG4gICAgICAgICAgICBtYXJrZXJNYW5hZ2VyLFxuICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgIGdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICBzcGFjZU1hbmFnZXJJbnN0YW5jZSxcbiAgICAgICAgICAgIHNtYXJ0TGFiZWwsXG4gICAgICAgICAgICBjaGFydEluc3RhbmNlLFxuICAgICAgICAgICAgY2FudmFzRGF0YSkge1xuICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcbiAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcbiAgICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0RhdGEgPSBjYW52YXNEYXRhO1xuICAgICAgfVxuICAgIF0pO1xuICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgIHRoaXMudHNPYmplY3QgPSBpbnN0YW5jZS5jaGFydEluc3RhbmNlO1xuICAgIHRoaXMuc3RhcnREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcbiAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG4gICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBMZWdlbmRFeHQucHJvdG90eXBlLmNyZWF0ZVRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRvb2xiYXIsXG4gICAgICBncm91cCxcbiAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgY29udGV4dE1lbnUsXG4gICAgICBjb250ZXh0QXJyYXkgPSBbXSxcbiAgICAgIGdhT3B0aW9uc09iaiA9IHt9LFxuICAgICAgcG9wdXAsXG4gICAgICBwYXBlciA9IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydENvbnRhaW5lciA9IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyLFxuICAgICAgc3ViQ2F0U3R5bGUgPSB7XG4gICAgICAgICdmb250LXNpemUnOiAnMTJweCcsXG4gICAgICAgICdjb2xvcic6ICcjNjk2OTY5JyxcbiAgICAgICAgJ2ZvbnRGYW1pbHknOiAnTXlyaWFkIFBybyBTZW1pYm9sZCdcbiAgICAgIH07XG5cbiAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuXG4gICAgdG9vbGJhci5zZXRDb25maWcoe1xuICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgfSk7XG5cbiAgICBncm91cCA9IG5ldyB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXAoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuXG4gICAgZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgIH0pO1xuXG4gICAgZ2FPcHRpb25zT2JqID0ge1xuICAgICAgJ0ZpeGVkLU51bWJlcic6ICdkaWFsb2dCb3gnLFxuICAgICAgJ0Z1bmN0aW9ucyc6IFsnTWluaW11bScsICdNYXhpbXVtJywgJ01lYW4nLCAnTWVkaWFuJywgJ1N0YW5kYXJkIERldmlhdGlvbiddLFxuICAgICAgJ1Bvc2l0aW9uJzogJ2RpYWxvZ0JveCcsXG4gICAgICAnRGF0YXNldCc6IFsnUHJldmlvdXMgRGF0YXNldCcsICdOZXh0IERhdGFzZXQnXSxcbiAgICAgICdSZWxhdGl2ZS1Qb3NpdGlvbic6IFsnTmV4dCcsICdQcmV2aW91cyddXG4gICAgfTtcblxuICAgIGNvbnRleHRNZW51ID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2xXaXRoQ29udGV4dCgnQ29udGV4dEljb24nLCB7XG4gICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgfSwge1xuICAgICAgd2lkdGg6IDI0LFxuICAgICAgaGVpZ2h0OiAyNCxcbiAgICAgIHBvc2l0aW9uOiAncmlnaHQnLFxuICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICBzeW1ib2xTdHJva2U6ICcjNjk2OTY5J1xuICAgIH0pO1xuXG4gICAgY29udGV4dEFycmF5LnB1c2goe1xuICAgICAgJ0dyb3d0aCBBbmFseXNlcic6IHtcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAnY29sb3InOiAnIzY5Njk2OScsXG4gICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ015cmlhZCBwcm8gU2VtaWJvbGQnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBwb3B1cCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdmFyIGJveCxcbiAgICAgICAgaGVhZGVyLFxuICAgICAgICBzdHlsZSA9IHtcbiAgICAgICAgICBmb250U2l6ZTogMTAgKyAncHgnLFxuICAgICAgICAgIGxpbmVIZWlnaHQ6IDE1ICsgJ3B4JyxcbiAgICAgICAgICBmb250RmFtaWx5OiAnTHVjaWRhIEdyYW5kZScsXG4gICAgICAgICAgc3Ryb2tlOiAnIzY3Njc2NycsXG4gICAgICAgICAgJ3N0cm9rZS13aWR0aCc6ICcyJ1xuICAgICAgICB9LFxuICAgICAgICBoZWFkZXJXaWR0aCA9IDE4MCxcbiAgICAgICAgaGVhZGVyVGV4dCxcbiAgICAgICAgY3Jvc3MsXG4gICAgICAgIGlucHV0RmllbGQsXG4gICAgICAgIGFwcGx5QnV0dG9uLFxuICAgICAgICB4ID0gNTAwLFxuICAgICAgICB5ID0gMTAwO1xuXG4gICAgICBib3ggPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICcjZjdmN2Y3JyxcbiAgICAgICAgeDogeCAtIDIwMCxcbiAgICAgICAgeTogeSArIDEwMCxcbiAgICAgICAgd2lkdGg6IDE4MCxcbiAgICAgICAgaGVpZ2h0OiA4MFxuICAgICAgfSwgc3R5bGUsIGNoYXJ0Q29udGFpbmVyKTtcblxuICAgICAgaGVhZGVyID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAnI2U4ZThlOCcsXG4gICAgICAgIHdpZHRoOiBoZWFkZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiAyMFxuICAgICAgfSwgc3R5bGUsIGJveCk7XG5cbiAgICAgIGhlYWRlclRleHQgPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgIHdpZHRoOiBoZWFkZXJXaWR0aCAqIDAuNixcbiAgICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgICAgeDogMTAsXG4gICAgICAgIHk6IDJcbiAgICAgIH0sIHN0eWxlLCBoZWFkZXIpO1xuXG4gICAgICBoZWFkZXJUZXh0LmF0dHIoe1xuICAgICAgICB0ZXh0OiAnUHJvdmlkZSBTcGVjaWZpYyBWYWx1ZSdcbiAgICAgIH0pO1xuXG4gICAgICBjcm9zcyA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgd2lkdGg6IDEwLFxuICAgICAgICBoZWlnaHQ6IDEwLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgZmxvYXQ6ICdyaWdodCcsXG4gICAgICAgIHRleHQ6ICdYJyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgIH0sIHN0eWxlLCBoZWFkZXIpO1xuXG4gICAgICBjcm9zcy5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJveC5oaWRlKCk7XG4gICAgICB9KTtcblxuICAgICAgaW5wdXRGaWVsZCA9IHBhcGVyLmh0bWwoJ2lucHV0Jywge1xuICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICB4OiAxMCxcbiAgICAgICAgeTogMzBcbiAgICAgIH0sIHN0eWxlLCBib3gpO1xuXG4gICAgICBhcHBseUJ1dHRvbiA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgd2lkdGg6IDUwLFxuICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICB4OiAxMjAsXG4gICAgICAgIHk6IDMwLFxuICAgICAgICBmaWxsOiAnIzU1NTU1NSdcbiAgICAgIH0sIHtcbiAgICAgICAgZm9udFNpemU6IDEwICsgJ3B4JyxcbiAgICAgICAgbGluZUhlaWdodDogMTUgKyAncHgnLFxuICAgICAgICBmb250RmFtaWx5OiAnTHVjaWRhIEdyYW5kZScsXG4gICAgICAgIGZpbGw6ICcjZWFlYWVhJyxcbiAgICAgICAgY29sb3I6ICcjZWFlYWVhJyxcbiAgICAgICAgc3Ryb2tlOiAnI2VhZWFlYScsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG4gICAgICB9LCBib3gpO1xuXG4gICAgICBhcHBseUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJveC5oaWRlKCk7XG4gICAgICAgIGNhbGxiYWNrKGlucHV0RmllbGQudmFsKCkpO1xuICAgICAgfSk7XG4gICAgICBhcHBseUJ1dHRvbi5hdHRyKHtcbiAgICAgICAgdGV4dDogJ0FwcGx5J1xuICAgICAgfSk7XG4gICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIGZ1bmN0aW9uIGlucHV0RmllbGROdW1iZXJIYW5kbGVyICgpIHtcbiAgICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnZhbHVlID0gaW5wdXRGaWVsZC5lbGVtZW50LnZhbHVlLnJlcGxhY2UoL1teXFxkLi1dL2csICcnKTtcbiAgICAgIH1cbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGlucHV0RmllbGROdW1iZXJIYW5kbGVyKTtcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ3Bvc2l0aW9uJ10gPSAncmVsYXRpdmUnO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnYmFja2dyb3VuZENvbG9yJ10gPSAnI2QyZDJkMic7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcycHggc29saWQgI2NiY2JjYic7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydwYWRkaW5nJ10gPSAnMHB4IDBweCAzLjVweCAycHgnO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjOGM4YzhjJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ21hcmdpbiddID0gJzFweCAycHgnO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnZmxvYXQnXSA9ICdyaWdodCc7XG4gICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzhweCc7XG4gICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzJweCBzb2xpZCAjZGFkYmRhJztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzhweCc7XG4gICAgICBib3guZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMXB4IHNvbGlkICNkNGQyZDMnO1xuICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzFweCBzb2xpZCAjZDRkMmQzJztcbiAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWyd3aWR0aCddID0gJzE3OXB4JztcbiAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnZm9udFNpemUnXSA9ICcxMS41cHgnO1xuICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICcwLjVweCc7XG4gICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ2NvbG9yJ10gPSAnIzY3Njc2Nyc7XG4gICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnZm9udEZhbWlseSddID0gJ015cmlhZCBwcm8gU2VtaWJvbGQnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsndGV4dEFsaWduJ10gPSAnY2VudGVyJztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ2ZvbnRTaXplJ10gPSAnMTFweCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydwYWRkaW5nVG9wJ10gPSAnM3B4JztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ2JvcmRlclJhZGl1cyddID0gJzNweCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyNlNGU0ZTQnO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpIGluIGdhT3B0aW9uc09iaikge1xuICAgICAgbGV0IGtleSxcbiAgICAgICAgb2JqID0ge30sXG4gICAgICAgIHN1Yk9iaiA9IHt9O1xuICAgICAgaWYgKGdhT3B0aW9uc09ialtpXSA9PT0gJ2RpYWxvZ0JveCcpIHtcbiAgICAgICAga2V5ID0gJyZuYnNwOyAmbmJzcDsgJyArIGk7XG4gICAgICAgIG9ialtrZXldID0ge307XG4gICAgICAgIG9ialtrZXldID0ge1xuICAgICAgICAgIHN0eWxlOiBzdWJDYXRTdHlsZSxcbiAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBsZXQgcG9wdXBWYWwgPSBwb3B1cChmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAvLyAgIHNlbGYuYW5hbHlzZXIocGFyc2VJbnQoc3RyKSk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIGlmIChpID09PSAnRml4ZWQtTnVtYmVyJykge1xuICAgICAgICAgICAgICAvLyBzZWxmLmFuYWx5c2VyKHBhcnNlSW50KHdpbmRvdy5wcm9tcHQoJ0VudGVyIHZhbHVlJykpKTtcbiAgICAgICAgICAgICAgbGV0IHBvcHVwVmFsID0gcG9wdXAoZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIocGFyc2VJbnQoc3RyKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpID09PSAnUG9zaXRpb24nKSB7XG4gICAgICAgICAgICAgIGxldCBwb3B1cFZhbCA9IHBvcHVwKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHtwb3NpdGlvbjogc3RyfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrZXkgPSAnJiM5NjY2Jm5ic3A7ICcgKyBpO1xuICAgICAgICBvYmpba2V5XSA9IHt9O1xuICAgICAgICBvYmpba2V5XS5hY3Rpb24gPSAnY2xpY2snO1xuICAgICAgICBvYmpba2V5XS5zdHlsZSA9IHN1YkNhdFN0eWxlO1xuICAgICAgICBvYmpba2V5XS5oYW5kbGVyID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FPcHRpb25zT2JqW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgbGV0IHN1Yk1lbnVOYW1lID0gZ2FPcHRpb25zT2JqW2ldW2pdO1xuICAgICAgICAgIHN1Yk9iaiA9IHt9O1xuICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXSA9IHt9O1xuICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXS5oYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gWydNaW5pbXVtJywgJ01heGltdW0nLCAnTWVhbicsICdNZWRpYW4nLCAnU3RhbmRhcmQgRGV2aWF0aW9uJ11cbiAgICAgICAgICAgIC8vIFsnUHJldmlvdXMgRGF0YXNldCcsICdOZXh0IERhdGFzZXQnXVxuICAgICAgICAgICAgLy8gWydOZXh0JywgJ1ByZXZpb3VzJ11cbiAgICAgICAgICAgIGlmIChzdWJNZW51TmFtZSA9PT0gJ01pbmltdW0nIHx8XG4gICAgICAgICAgICAgIHN1Yk1lbnVOYW1lID09PSAnTWF4aW11bScgfHwgc3ViTWVudU5hbWUgPT09ICdNZWFuJyB8fFxuICAgICAgICAgICAgICBzdWJNZW51TmFtZSA9PT0gJ01lZGlhbicgfHwgc3ViTWVudU5hbWUgPT09ICdTdGFuZGFyZCBEZXZpYXRpb24nKSB7XG4gICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoc3ViTWVudU5hbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ1ByZXZpb3VzIERhdGFzZXQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3JlbGRhdGFzZXRwb3NpdGlvbjogLTF9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViTWVudU5hbWUgPT09ICdOZXh0IERhdGFzZXQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3JlbGRhdGFzZXRwb3NpdGlvbjogMX0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ05leHQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuYW5hbHlzZXIoe3JlbHBvc2l0aW9uOiAtMX0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJNZW51TmFtZSA9PT0gJ1ByZXZpb3VzJykge1xuICAgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKHtyZWxwb3NpdGlvbjogMX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLmFjdGlvbiA9ICdjbGljayc7XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLnN0eWxlID0gc3ViQ2F0U3R5bGU7XG4gICAgICAgICAgb2JqW2tleV0uaGFuZGxlci5wdXNoKHN1Yk9iaik7XG4gICAgICAgICAgaWYgKGogIT09IGdhT3B0aW9uc09ialtpXS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBvYmpba2V5XS5oYW5kbGVyLnB1c2goe1xuICAgICAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZDVkMmQyJyxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogJzFweCcsXG4gICAgICAgICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzBweCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGV4dEFycmF5LnB1c2gob2JqKTtcbiAgICAgIGNvbnRleHRBcnJheS5wdXNoKHtcbiAgICAgICAgJyc6IHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2Q1ZDJkMicsXG4gICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxuICAgICAgICAgICAgbWFyZ2luOiAnMXB4JyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICcwcHgnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb250ZXh0QXJyYXkucHVzaCh7XG4gICAgICAnJm5ic3A7ICZuYnNwOyBSZXNldCc6IHtcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYuYW5hbHlzZXIoJ3Jlc2V0Jyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFjdGlvbjogJ2NsaWNrJyxcbiAgICAgICAgc3R5bGU6IHN1YkNhdFN0eWxlXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250ZXh0TWVudS5hcHBlbmRBc0xpc3QoY29udGV4dEFycmF5KTtcblxuICAgIHRoaXMuU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ0NvbnRleHRJY29uJywgZnVuY3Rpb24gKHBvc3gsIHBvc3ksIHJhZCkge1xuICAgICAgdmFyIHggPSBwb3N4LFxuICAgICAgICB5ID0gcG9zeSxcbiAgICAgICAgciA9IHJhZCAqIDIsXG4gICAgICAgIHNwYWNlID0gTWF0aC5yb3VuZChyIC8gNCksXG4gICAgICAgIGhhbGZXaWR0aCA9IE1hdGgucm91bmQociAvIDIpICogMC43LFxuICAgICAgICBzdGFydFggPSAoeCAtIGhhbGZXaWR0aCksXG4gICAgICAgIGVuZFggPSAoeCArIGhhbGZXaWR0aCksXG4gICAgICAgIHN0YXJ0WSA9ICh5ICsgc3BhY2UpLFxuICAgICAgICBlbmRZID0gKHkgLSBzcGFjZSk7XG4gICAgICByZXR1cm4gWydNJywgc3RhcnRYLCB5LCAnTCcsIGVuZFgsIHksICdNJywgc3RhcnRYLCBzdGFydFksICdMJywgZW5kWCwgc3RhcnRZLCAnTScsIHN0YXJ0WCwgZW5kWSwgJ0wnLCBlbmRYLCBlbmRZXTtcbiAgICB9KTtcblxuICAgIGdyb3VwLmFkZFN5bWJvbChjb250ZXh0TWVudSk7XG4gICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgIHJldHVybiB0b29sYmFyO1xuICB9O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUuZ2V0TG9naWNhbFNwYWNlID0gZnVuY3Rpb24gKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcbiAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgIHZhciBsb2dpY2FsU3BhY2UsXG4gICAgICB3aWR0aCA9IDAsXG4gICAgICBoZWlnaHQgPSAwLFxuICAgICAgaSxcbiAgICAgIGxuO1xuXG4gICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuICAgICAgd2lkdGggPSBNYXRoLm1heChsb2dpY2FsU3BhY2Uud2lkdGgsIHdpZHRoKTtcbiAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcbiAgICAgIHRoaXMudG9vbGJhcnNbaV0uaGVpZ2h0ID0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICB9XG4gICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHdpZHRoID4gYXZhaWxhYmxlV2lkdGggPyAwIDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodCA+IGF2YWlsYWJsZUhlaWdodCA/IDAgOiBoZWlnaHRcbiAgICB9O1xuICB9O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUucGxhY2VJbkNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWRkaW5nID0gNTtcbiAgICBzZWxmLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ1Rvb2xCb3hFeHQnO1xuICAgICAgfSxcbiAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqWycwJ107XG4gICAgICB9LFxuICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH0sXG4gICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICAgIH0sXG4gICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG4gICAgICB9LFxuICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmhvcml6b250YWw7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiBbe1xuICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxpZ25tZW50OiBbe1xuICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICByZXR1cm4gb2JqLnJpZ2h0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG4gICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldExvZ2ljYWxTcGFjZShwYXJlbnQuZ2V0V2lkdGgoKSwgcGFyZW50LmdldEhlaWdodCgpKTtcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfV1cbiAgICAgICAgfV1cbiAgICAgIH1dXG4gICAgfV0pO1xuICB9O1xuXG4gIExlZ2VuZEV4dC5wcm90b3R5cGUuc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICB2YXIgbWVzID0gdGhpcy5tZWFzdXJlbWVudDtcbiAgICBtZXMueCA9IHg7XG4gICAgbWVzLnkgPSB5O1xuICAgIG1lcy53aWR0aCA9IHdpZHRoO1xuICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBMZWdlbmRFeHQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuICAgICAgbG4sXG4gICAgICBpLFxuICAgICAgdG9vbGJhcjtcbiAgICB4ID0geCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueCA6IHg7XG4gICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgIHdpZHRoID0gd2lkdGggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LndpZHRoIDogd2lkdGg7XG4gICAgaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC5oZWlnaHQgOiBoZWlnaHQ7XG4gICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxuID0gdG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgIHRvb2xiYXIuZHJhdyh4LCB5KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ2xlZ2VuZEV4dCcsIExlZ2VuZEV4dCk7XG59XSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZXh0ZW5zaW9uLmpzIiwiJ3VzZSBzdHJpY3QnO1xuY2xhc3MgR3Jvd3RoQW5hbHlzZXIge1xuICBjb25zdHJ1Y3RvciAoZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGEubWFwKChhKSA9PiB7XG4gICAgICByZXR1cm4gYS5tYXAoKGIpID0+IHsgcmV0dXJuIGI7IH0pO1xuICAgIH0pO1xuICAgIHRoaXMuRm9ybXVsYWUgPSBGb3JtdWxhZTtcbiAgfVxuICBhbmFseXNlIChtb2RlKSB7XG4gICAgbGV0IGkgPSAwLFxuICAgICAgaWkgPSAwLFxuICAgICAgaiA9IDAsXG4gICAgICBqaiA9IDAsXG4gICAgICBudW0gPSAwLFxuICAgICAgY2hlY2tBcnIgPSBbXSxcbiAgICAgIGNoZWNrTnVtID0gMCxcbiAgICAgIGRhdGFBciA9IHRoaXMuZGF0YSxcbiAgICAgIG5EYXRhQXIgPSBbXSxcbiAgICAgIHRlbXBBciA9IFtdLFxuICAgICAgdGVtcCA9IDA7XG4gICAgaWYgKHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJyAmJiBtb2RlLnRvTG93ZXJDYXNlKCkgPT09ICdyZXNldCcpIHtcbiAgICAgIHJldHVybiBkYXRhQXIubWFwKChhKSA9PiB7XG4gICAgICAgIHJldHVybiBhLm1hcCgoYikgPT4geyByZXR1cm4gYjsgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlKSkgeyAvLyBIYW5kbGluZyBhIG51bWJlclxuICAgICAgY2hlY2tOdW0gPSArbW9kZTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgbW9kZSA9IHRoaXMuRm9ybXVsYWVbbW9kZV07XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBjaGVja051bSA9IG1vZGUoZGF0YUFyW2ldKTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcbiAgICAgICAgICBpZiAoY2hlY2tOdW0gPT09IDApIHtcbiAgICAgICAgICAgIHRlbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXAgPSAxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRlbXBBci5wdXNoKHRlbXApO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucmVscG9zaXRpb24pKSB7XG4gICAgICBtb2RlID0gbW9kZS5yZWxwb3NpdGlvbjtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG4gICAgICAgICAgaWYgKGogKyBtb2RlID49IDAgJiYgaiArIG1vZGUgPCBqaikge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1baiArIG1vZGVdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja051bSA9IG51bTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnBvc2l0aW9uKSkge1xuICAgICAgbW9kZSA9IG1vZGUucG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIGlmIChtb2RlID49IDAgJiYgbW9kZSA8IGpqKSB7XG4gICAgICAgICAgICBjaGVja051bSA9IGRhdGFBcltpXVttb2RlXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBudW07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5yZWxkYXRhc2V0cG9zaXRpb24pKSB7XG4gICAgICBtb2RlID0gbW9kZS5yZWxkYXRhc2V0cG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBpZiAoaSArIG1vZGUgPj0gMCAmJiBpICsgbW9kZSA8IGlpKSB7XG4gICAgICAgICAgY2hlY2tBcnIgPSBkYXRhQXJbaSArIG1vZGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrQXJyID0gZGF0YUFyW2ldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBjaGVja051bSA9IGNoZWNrQXJyW2pdO1xuICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcbiAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gbnVtKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChpID0gMCwgaWkgPSBuRGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGZvciAoaiA9IDAsIGpqID0gbkRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG5EYXRhQXJbaV1bal0pKSB7XG4gICAgICAgICAgbkRhdGFBcltpXVtqXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5EYXRhQXI7XG4gIH1cbn1cblxudmFyIEZvcm11bGFlID0ge1xuICBNaW5pbXVtOiAoYXJyKSA9PiB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhID4gYiA/IGIgOiBhO1xuICAgIH0pO1xuICB9LFxuICBNYXhpbXVtOiAoYXJyKSA9PiB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhIDwgYiA/IGIgOiBhO1xuICAgIH0pO1xuICB9LFxuICBNZWFuOiAoYXJyKSA9PiB7XG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhICsgYjtcbiAgICB9KSAvIGFyci5sZW5ndGg7XG4gIH0sXG4gIE1lZGlhbjogKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIubWFwKChhKSA9PiBhKS5zb3J0KChhLCBiKSA9PiB7IHJldHVybiBhIC0gYjsgfSlbYXJyLmxlbmd0aCAvIDJdO1xuICB9LFxuICAnU3RhbmRhcmQgRGV2aWF0aW9uJzogKHZhbHVlcykgPT4ge1xuICAgIGZ1bmN0aW9uIGF2ZXJhZ2UgKGRhdGEpIHtcbiAgICAgIHZhciBzdW0sIGF2ZztcbiAgICAgIHN1bSA9IGRhdGEucmVkdWNlKGZ1bmN0aW9uIChzdW0sIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBzdW0gKyB2YWx1ZTtcbiAgICAgIH0sIDApO1xuXG4gICAgICBhdmcgPSBzdW0gLyBkYXRhLmxlbmd0aDtcbiAgICAgIHJldHVybiBhdmc7XG4gICAgfVxuICAgIHZhciBhdmcgPSAwLFxuICAgICAgc3F1YXJlRGlmZnMgPSAwLFxuICAgICAgc3FyRGlmZiA9IDAsXG4gICAgICBhdmdTcXVhcmVEaWZmID0gMCxcbiAgICAgIHN0ZERldiA9IDAsXG4gICAgICBkaWZmID0gMDtcbiAgICBhdmcgPSBhdmVyYWdlKHZhbHVlcyk7XG4gICAgc3F1YXJlRGlmZnMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgZGlmZiA9IHZhbHVlIC0gYXZnO1xuICAgICAgc3FyRGlmZiA9IGRpZmYgKiBkaWZmO1xuICAgICAgcmV0dXJuIHNxckRpZmY7XG4gICAgfSk7XG4gICAgYXZnU3F1YXJlRGlmZiA9IGF2ZXJhZ2Uoc3F1YXJlRGlmZnMpO1xuICAgIHN0ZERldiA9IE1hdGguc3FydChhdmdTcXVhcmVEaWZmKTtcbiAgICByZXR1cm4gc3RkRGV2O1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3d0aEFuYWx5c2VyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2dyb3d0aGFuYWx5c2VyLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==